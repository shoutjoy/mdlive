<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <!-- GitHub Pages ìºì‹œ ë°©ì§€ -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#1a1a24">
  <meta name="description" content="ì—°êµ¬Â·ë…¼ë¬¸ ì „ìš© ë§ˆí¬ë‹¤ìš´ ì—ë””í„° â€” ë°•ì¤‘í¬">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="MD PRO V20">
  <link rel="manifest" id="pwa-manifest">
  <title>Markdown PDF Editor Pro</title>
  <link
    href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Figtree:wght@300;400;500;600;700&display=swap"
    rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/9.1.6/marked.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js"></script>
  <link rel="stylesheet" href="style.css">
  <script>
    // GitHub Pages ë°°í¬ ì‹œ êµ¬ë²„ì „ Service Worker(blob: URL) ì¦‰ì‹œ í•´ì œ
    // â†’ ì˜¤ë˜ëœ ìºì‹œê°€ ìƒˆ JS/CSSë¥¼ ë®ì–´ì“°ëŠ” ë¬¸ì œ ë°©ì§€ (http/httpsì—ì„œë§Œ ë™ì‘, file:// ì œì™¸)
    if ('serviceWorker' in navigator && (location.protocol === 'http:' || location.protocol === 'https:')) {
      navigator.serviceWorker.getRegistrations().then(function(regs) {
        regs.forEach(function(reg) {
          var sw = reg.active || reg.waiting || reg.installing;
          if (sw && sw.scriptURL && sw.scriptURL.startsWith('blob:')) {
            reg.unregister();
            console.log('[MDPro] êµ¬ë²„ì „ blob SW í•´ì œë¨');
          }
        });
      });
      // ëª¨ë“  caches ì‚­ì œ (ë²„ì „ ì—… ì‹œ ê°•ì œ í´ë¦¬ì–´)
      if (window.caches) {
        caches.keys().then(function(keys) {
          var old = keys.filter(function(k) { return k !== 'mdpro-v20-cache-v1'; });
          old.forEach(function(k) { caches.delete(k); });
        });
      }
    }
  </script>
  <script>
    // index.js ë¡œë“œ ì „ ë˜ëŠ” ì‹¤íŒ¨ ì‹œ onclickì—ì„œ ì°¸ì¡° ì˜¤ë¥˜ ë°©ì§€ (ë‹¤ë¥¸ ê²½ë¡œ/í™˜ê²½ì—ì„œ ë™ì‘ ë³´ì¥)
    (function() {
      var noop = function() {};
      if (typeof window.DeepResearch === 'undefined') {
        window.DeepResearch = new Proxy({}, { get: function() { return noop; } });
      }
      if (typeof window.AiImage === 'undefined') {
        window.AiImage = new Proxy({}, { get: function() { return noop; } });
      }
    })();
  </script>
</head>

<body>
  <div id="app">

    <!-- TITLEBAR -->
    <header id="titlebar">
      <div id="app-logo">
        <div class="logo-icon">M</div>MD PRO By ë°•ì¤‘í¬ PhD
      </div>
      <div style="flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;overflow:hidden;min-width:0;position:relative">
        <span id="titlebar-path-display"
          style="font-size:12px;font-family:var(--fm);color:var(--tx2);
            white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
            max-width:100%;letter-spacing:0.01em;display:block"
          title="">Untitled Document</span>
        <input id="doc-title" type="text" value="Untitled Document" spellcheck="false"
          style="position:absolute;opacity:0;pointer-events:none;width:1px;height:1px">
      </div>
      <div id="tba">
        <span id="rm-badge">RESEARCH</span>
        <span id="app-datetime" class="app-datetime" title="í˜„ì¬ ë‚ ì§œÂ·ì‹œê°„" style="font-size:11px;font-family:var(--fm);color:var(--tx2);margin-right:8px;white-space:nowrap"></span>
        <button class="btn btn-sm" id="app-lock-btn" onclick="if(typeof AppLock!=='undefined'&&AppLock.hasLock())AppLock.lockNow()" data-tooltip="ì•± ì ê¸ˆ (Ctrl+G)" title="ì•± ì ê¸ˆ (Ctrl+G)" style="display:none;background:rgba(124,106,247,.15);border:1px solid rgba(124,106,247,.35);color:#9d8cf7">ğŸ”’ ì ê¸ˆ</button>
        <button class="btn btn-sm btn-settings" onclick="App.showHK()" data-tooltip="ë‹¨ì¶•í‚¤ ëª©ë¡ &amp; ì„¤ì • (Alt+?)" data-key="Alt+?" title="ì„¤ì •">âš™ ì„¤ì •</button>
        <button class="btn btn-sm btn-tmpl" onclick="App.showTmpl()" data-tooltip="ë…¼ë¬¸ ì–‘ì‹ ì„ íƒ">ğŸ“‹ ì–‘ì‹</button>
        <button class="btn btn-sm btn-research" onclick="App.toggleRM()" data-tooltip="Research Mode (ë‹¨ë½ ì¤„ë²ˆí˜¸)"
          data-key="Ctrl+Shift+R">ğŸ”¬ Research</button>
        <button class="btn btn-sm" onclick="DeepResearch.show()" data-tooltip="Deep Research (AI ì§ˆë¬¸)"
          style="background:linear-gradient(135deg,#1a2a40 0%,#1e3558 100%);color:#6ac8f7;border:1px solid rgba(106,200,247,.35);font-weight:600">ğŸ“š Deep Research</button>
        <button class="btn btn-sm btn-ref" onclick="App.showCite()" data-tooltip="ì°¸ê³ ë¬¸í—Œ ê´€ë¦¬ & ì¸ìš©"
          data-key="Ctrl+Shift+C">ğŸ“š References</button>
        <button class="btn btn-sm btn-scholar" onclick="Scholar.show()" data-tooltip="Google Scholar ê²€ìƒ‰ (ìƒˆ ì°½)"
          data-key="Ctrl+Shift+G">ğŸ” Scholar</button>
        <button class="btn btn-sm" onclick="AiPPT.open()" data-tooltip="AI PPT â€” ScholarSlideì—ì„œ ìŠ¬ë¼ì´ë“œ ë§Œë“¤ê¸°"
          data-key="Ctrl+Shift+P"
          style="background:rgba(247,201,106,.15);border-color:rgba(247,201,106,.4);color:#f7c96a;font-weight:600">ğŸ“Š AI PPT</button>
      </div>
    </header>

    <!-- TAB BAR: [ìƒˆíŒŒì¼][ì—´ê¸°][ì €ì¥][ëª¨ë‘ì €ì¥][ì¸ì‡„] | íƒ­ëª©ë¡ -->
    <div id="tab-bar">
      <!-- ì¢Œì¸¡ ê³ ì • íŒŒì¼ ì•¡ì…˜ ë²„íŠ¼ë“¤ -->
      <div id="tab-file-actions">
        <button class="tfab tfab-new" title="ìƒˆ íŒŒì¼ (Ctrl+N)" onclick="TM.newTab()">
          <span class="tfab-icon">ï¼‹</span><span class="tfab-label">ìƒˆíŒŒì¼</span>
        </button>
        <button class="tfab tfab-open" title="íŒŒì¼ ì—´ê¸° (Ctrl+O)" onclick="TM.openFile()">
          <span class="tfab-icon">ğŸ“‚</span><span class="tfab-label">ì—´ê¸°</span>
        </button>
        <button class="tfab tfab-save" title="ì €ì¥ (Ctrl+S)" onclick="App.showSaveDlg()">
          <span class="tfab-icon">ğŸ’¾</span><span class="tfab-label">ì €ì¥</span>
        </button>
        <button class="tfab tfab-saveall" id="tab-save-all-btn" title="ëª¨ë‘ ì €ì¥ (Ctrl+Shift+S)" onclick="TM.saveAll()">
          <span class="tfab-icon">ğŸ—‚</span><span class="tfab-label">ëª¨ë‘ì €ì¥</span>
        </button>
        <button class="tfab tfab-print" title="ì¸ì‡„ / PDF (Ctrl+P)" onclick="App.printDoc()">
          <span class="tfab-icon">ğŸ–¨</span><span class="tfab-label">ì¸ì‡„</span>
        </button>
        <input type="file" id="tab-file-input" accept=".md,.txt,.html" multiple style="display:none" onchange="TM._onFileSelected(event)">
      </div>
      <!-- êµ¬ë¶„ì„  -->
      <div class="tab-file-actions-sep"></div>
      <!-- íƒ­ ëª©ë¡ (ìŠ¤í¬ë¡¤ ê°€ëŠ¥) -->
      <div id="tab-list"></div>
    </div>

    <!-- TOOLBAR -->
    <div id="toolbar">
      <!-- â˜° ì‚¬ì´ë“œë°” í† ê¸€ -->
      <div class="tg"><button class="tb" onclick="App.toggleSidebar()" data-tooltip="ì‚¬ì´ë“œë°”">â˜°</button></div>
      <div class="ts"></div>

      <!-- ğŸŸ¡ í—¤ë”© â€” ë…¸ë€ìƒ‰ ê³„ì—´ -->
      <div class="tg">
        <button class="tb tb-heading" onclick="ED.h(1)" data-tooltip="ì œëª© H1" data-key="Ctrl+Alt+1"><b>H1</b></button>
        <button class="tb tb-heading" onclick="ED.h(2)" data-tooltip="ì œëª© H2" data-key="Ctrl+Alt+2"><b>H2</b></button>
        <button class="tb tb-heading" onclick="ED.h(3)" data-tooltip="ì œëª© H3" data-key="Ctrl+Alt+3"><b>H3</b></button>
      </div>
      <div class="ts"></div>

      <!-- ğŸŸ  í…ìŠ¤íŠ¸ ì„œì‹ â€” ì˜¤ë Œì§€ ê³„ì—´ -->
      <div class="tg">
        <button class="tb tb-fmt" id="bold-btn" onclick="ED.bold()" data-tooltip="Smart Bold"
          data-key="Ctrl+B"><b>B</b></button>
        <button class="tb tb-fmt" id="italic-btn" onclick="ED.italic()" data-tooltip="ê¸°ìš¸ì„ê¼´"
          data-key="Ctrl+I"><i>I</i></button>
        <button class="tb tb-fmt" onclick="ED.strike()" data-tooltip="ì·¨ì†Œì„ ">SÌ¶</button>
        <button class="tb tb-fmt" onclick="ED.inlineCode()" data-tooltip="ì¸ë¼ì¸ ì½”ë“œ"><code
            style="font-size:10px">`c`</code></button>
      </div>
      <div class="ts"></div>

      <!-- ğŸŸ  ê¸€ì í¬ê¸° â€” ì˜¤ë Œì§€ ê³„ì—´ -->
      <div class="tg" style="gap:0">
        <button class="tb tb-fmt" onclick="FS.dec()" data-tooltip="ì„ íƒ ê¸€ì í¬ê¸° ì¤„ì´ê¸° (Shift+Alt+,)"
          style="min-width:22px;font-size:14px;font-weight:700;padding:0 4px">âˆ’</button>
        <div id="fsize-display"
          style="min-width:38px;text-align:center;font-family:var(--fm);font-size:12px;font-weight:600;color:#f7a06a;line-height:26px;cursor:pointer;user-select:none;background:#2a2a3a;border-top:1px solid #3a3a50;border-bottom:1px solid #3a3a50"
          data-tooltip="í•œë²ˆ í´ë¦­: ëª©ë¡ / ë‘ë²ˆ í´ë¦­: ì§ì ‘ ì…ë ¥" onclick="FS.clickPick(event)" ondblclick="FS.startEdit(event)">12pt
        </div>
        <input id="fsize-input" type="text" value="12" onblur="FS.endEdit()" onkeydown="FS.editKey(event)"
          style="display:none;width:46px;text-align:center;font-family:var(--fm);font-size:12px;font-weight:600;color:#f7a06a;background:#2a2a3a;border:1px solid var(--ac);border-radius:3px;outline:none;padding:0 4px;height:22px;line-height:22px">
        <button class="tb tb-fmt" onclick="FS.inc()" data-tooltip="ì„ íƒ ê¸€ì í¬ê¸° í‚¤ìš°ê¸° (Shift+Alt+.)"
          style="min-width:22px;font-size:14px;font-weight:700;padding:0 4px">+</button>
      </div>

      <!-- ğŸŸ  ìƒ‰ìƒ â€” ì˜¤ë Œì§€ ê³„ì—´ -->
      <div class="tg">
        <button class="tb tb-fmt" id="fc-btn" onclick="App.openColorPicker('text')" data-tooltip="ê¸€ì ìƒ‰ìƒ"
          style="flex-direction:column;gap:1px">
          <span style="font-size:11px;font-weight:700">A</span>
          <span id="fc-bar" style="width:14px;height:2px;border-radius:1px;background:#e8e8f0"></span>
        </button>
        <button class="tb tb-fmt" id="hl-btn" onclick="App.openColorPicker('bg')" data-tooltip="í˜•ê´‘íœ í•˜ì´ë¼ì´íŠ¸"
          style="flex-direction:column;gap:1px">
          <span style="font-size:11px">ğŸ–Š</span>
          <span id="hl-bar"
            style="width:14px;height:2px;border-radius:1px;background:transparent;border:1px solid var(--bd)"></span>
        </button>
      </div>
      <div class="ts"></div>

      <!-- ğŸŸ¢ ì •ë ¬ â€” í˜•ê´‘ ì´ˆë¡ ê³„ì—´ -->
      <div class="tg">
        <button class="tb tb-layout" onclick="ED.align('left')" data-tooltip="ì™¼ìª½ ì •ë ¬" data-key="Shift+Alt+L">â‡¤</button>
        <button class="tb tb-layout" onclick="ED.align('center')" data-tooltip="ê°€ìš´ë° ì •ë ¬"
          data-key="Shift+Alt+C">â‡”</button>
        <button class="tb tb-layout" onclick="ED.align('right')" data-tooltip="ì˜¤ë¥¸ìª½ ì •ë ¬" data-key="Shift+Alt+R">â‡¥</button>
      </div>
      <div class="ts"></div>

      <!-- ğŸŸ¢ ëª©ë¡Â·ì¸ìš© â€” í˜•ê´‘ ì´ˆë¡ ê³„ì—´ -->
      <div class="tg">
        <button class="tb tb-layout" onclick="ED.list('ul')" data-tooltip="ëª©ë¡">â€¢ List</button>
        <button class="tb tb-layout" id="txt2list-btn" onclick="ED.textToList()" data-tooltip="ì„ íƒí•œ í…ìŠ¤íŠ¸ â†’ ëª©ë¡ í•­ëª© (ì¤„ë§ˆë‹¤ â€¢ ì¶”ê°€)" data-key="Alt+5">â‰¡ List</button>
        <button class="tb tb-layout" onclick="ED.textToNumberedList()" data-tooltip="ì„ íƒí•œ í…ìŠ¤íŠ¸ â†’ ìˆ«ì ëª©ë¡ (ì¤„ë§ˆë‹¤ 1. 2. 3. ì¶”ê°€)" data-key="Alt+6">1. List</button>
        <button class="tb tb-layout" onclick="ED.bquote()" data-tooltip="ì¸ìš©êµ¬" data-key="Ctrl+.">â</button>
      </div>
      <div class="ts"></div>

      <!-- ğŸ”µ í‘œ â€” íŒŒë€/ë³´ë¼ ê³„ì—´ -->
      <div class="tg">
        <button class="tb tb-table" onclick="ED.table()" data-tooltip="í‘œ ì‚½ì…" data-key="Alt+8">âŠ í‘œ</button>
        <button class="tb tb-table" onclick="ED.tableRow()" data-tooltip="í–‰ ì¶”ê°€" data-key="Alt+9">+í–‰</button>
        <button class="tb tb-table" onclick="ED.tableCol()" data-tooltip="ì—´ ì¶”ê°€" data-key="Alt+0">+ì—´</button>
        <button class="tb tb-table" onclick="ED.mergeH()" data-tooltip="ê°€ë¡œ ë³‘í•© (colspan)"
          data-key="Alt+Shift+H">âŠH</button>
        <button class="tb tb-table" onclick="ED.mergeV()" data-tooltip="ì„¸ë¡œ ë³‘í•© (rowspan)"
          data-key="Alt+Shift+V">âŠV</button>
        <button class="tb tb-table" onclick="ED.textToTable()" data-tooltip="ì„ íƒ í…ìŠ¤íŠ¸ë¥¼ í‘œë¡œ ë³€í™˜ (ì‰¼í‘œ/íƒ­/íŒŒì´í”„ êµ¬ë¶„ì ìë™ ê°ì§€)"
          data-key="Alt+7">â‡¥í‘œ</button>
        <button class="tb tb-table-tidy" onclick="ED.tidyTable()" data-tooltip="HTML í‘œ ë“¤ì—¬ì“°ê¸° ì •ëˆ (ì»¤ì„œë¥¼ í‘œ ì•ˆì— ë†“ê³  ì‹¤í–‰)">âœ¦
          Tidy</button>
        <button class="tb tb-table" onclick="ED.mdTableToHtml()" data-tooltip="ë§ˆí¬ë‹¤ìš´ í‘œë¥¼ HTML í‘œë¡œ ë³€í™˜ (ì»¤ì„œë¥¼ í‘œ ì•ˆì— ë‘ê±°ë‚˜ ì„ íƒ í›„ ì‹¤í–‰)" data-key="Alt+H">â‡„ HTMLí‘œ</button>
        <button class="tb tb-table" onclick="App.showCaption('table')" data-tooltip="í‘œ ìº¡ì…˜">ã€ˆí‘œã€‰</button>
        <button class="tb tb-table" onclick="App.showCaption('fig')" data-tooltip="ê·¸ë¦¼ ìº¡ì…˜">[ê·¸ë¦¼]</button>
      </div>
      <div class="ts"></div>

      <!-- ğŸ”µ ì½”ë“œ â€” íŒŒë€/ë³´ë¼ ê³„ì—´ -->
      <div class="tg">
        <button class="tb tb-code" onclick="App.showCode()" data-tooltip="ì½”ë“œ ë¸”ë¡ ì–¸ì–´ ì„ íƒ (ë©”ë‰´) / Alt+C = ë§ˆì§€ë§‰ ì–¸ì–´ ì§ì ‘ ì‚½ì…">âŒ¨
          Code</button>
      </div>
      <div class="ts"></div>

      <!-- ğŸ”´ ì‚½ì…/íŠ¹ìˆ˜ â€” ë¶„í™/ì—°ë³´ë¼ ê³„ì—´ -->
      <div class="tg">
        <button class="tb tb-insert" onclick="ED.pageBreak()" data-tooltip="í˜ì´ì§€ ë‚˜ëˆ„ê¸°" data-key="Ctrl+Enter">â‹¯ PB</button>
        <button class="tb tb-insert" onclick="ED.lineBreak()" data-tooltip="ì¤„ë°”ê¿ˆ &lt;br&gt;"
          data-key="Ctrl+Shift+Enter">â†©</button>
        <button class="tb tb-insert" onclick="ED.insertNbsp()" data-tooltip="ë¶ˆì—°ì† ê³µë°± &amp;nbsp; ì‚½ì…"
          data-key="Ctrl+Shift+Space">âµ</button>
        <button class="tb tb-insert" onclick="App.showImg()" data-tooltip="ì´ë¯¸ì§€">ğŸ–¼</button>
        <button class="tb tb-insert" onclick="App.showLink()" data-tooltip="ë§í¬ (ìƒˆ íƒ­)">ğŸ”—</button>
        <button class="tb tb-insert" onclick="ED.footnote()" data-tooltip="ê°ì£¼">â€ </button>
        <button class="tb tb-insert" onclick="ED.math()" data-tooltip="ìˆ˜ì‹(LaTeX)">âˆ‘</button>
        <button class="tb tb-insert" onclick="App.showCite()" data-tooltip="ì¸ìš© ì‚½ì…" data-key="Ctrl+Shift+C">ğŸ“–</button>
        <button class="tb tb-insert" onclick="STATS.show()" data-tooltip="APA í†µê³„ ì‚½ì…"
          data-key="Shift+Alt+9">ğ‘“(x)</button>
        <button class="tb tb-insert" onclick="App.insertDate()" data-tooltip="ì˜¤ëŠ˜ ë‚ ì§œÂ·ì‹œê°„ ì‚½ì… (2026-02-27(ê¸ˆ) ì˜¤ì „ 12:04 í˜•ì‹)"
          data-key="Shift+Alt+D">ğŸ“…</button>
        <button class="tb tb-insert" onclick="CharMap.show()" data-tooltip="ë¬¸ìí‘œ â€” íŠ¹ìˆ˜ë¬¸ì ì‚½ì… (Ctrl+Q)"
          data-key="Ctrl+Q">Î©</button>
        <button class="tb tb-translate" onclick="Translator.show()" data-tooltip="ë²ˆì—­ê¸° (Shift+Alt+G)"
          data-key="Shift+Alt+G">ğŸŒ</button>
      </div>
      <div class="ts"></div>

      <!-- ğŸ” ì°¾ê¸° -->
      <div class="tg"><button class="tb tb-util" onclick="App.toggleFind()" data-tooltip="ì°¾ê¸°/ë°”ê¾¸ê¸°"
          data-key="Ctrl+F">ğŸ”</button></div>
      <div class="spacer"></div>

      <!-- âš™ ë³´ê¸° ëª¨ë“œ -->
      <div class="tg">
        <button class="tb tb-view" onclick="App.setViewCycle('split')" id="vm-split" data-tooltip="ë¶„í•  ë³´ê¸° (Alt+1)"
          data-key="Alt+1">Split</button>
        <button class="tb tb-view" onclick="App.setViewCycle('editor')" id="vm-editor" data-tooltip="ì—ë””í„°ë§Œ (Alt+2)"
          data-key="Alt+2">Edit</button>
        <button class="tb tb-view" onclick="App.setViewCycle('preview')" id="vm-preview" data-tooltip="ë¯¸ë¦¬ë³´ê¸°ë§Œ (Alt+3)"
          data-key="Alt+3">View</button>
      </div>
      <div class="ts"></div>
      <div class="tg">
        <button class="tb tb-pv" id="pw-btn" onclick="PW.open()" data-tooltip="ìƒˆì°½ ë¯¸ë¦¬ë³´ê¸°" data-key="Ctrl+Shift+P">ğŸ——
          PV</button>
        <button class="tb tb-pv" onclick="PW.openSlide()" data-tooltip="ìŠ¬ë¼ì´ë“œ ëª¨ë“œë¡œ ë°”ë¡œ ì—´ê¸° (ìƒˆì°½)" data-key="Ctrl+Shift+T">ğŸ“½
          Slide</button>
        <button class="tb tb-pv" onclick="PW.forceRefresh()" data-tooltip="ìƒˆì°½ ê°•ì œ ìƒˆë¡œê³ ì¹¨">â†»</button>
      </div>
      <div class="ts"></div>
      <div class="tg">
        <button class="tb tb-sys" onclick="App.toggleTheme()" data-tooltip="ì „ì²´ ë‹¤í¬/ë¼ì´íŠ¸ í† ê¸€ (Alt+4)" data-key="Alt+4">â—‘</button>
        <button class="tb tb-sys active" id="ln-btn" onclick="LN.toggle()" data-tooltip="ì¤„ ë²ˆí˜¸">ln</button>
      </div>
    </div>

    <!-- SIDEBAR -->
    <nav id="sidebar">
      <!-- ì‚¬ì´ë“œë°” íƒ­ í—¤ë” -->
      <div id="sb-tabs">
        <button class="sb-tab active" id="sb-tab-toc" onclick="SB.switchTab('toc')">ğŸ“‘ ëª©ì°¨</button>
        <button class="sb-tab" id="sb-tab-files" onclick="SB.switchTab('files')">ğŸ—‚ íŒŒì¼</button>
      </div>

      <!-- TOC íŒ¨ë„ -->
      <div id="sb-panel-toc" class="sb-panel active">
        <div id="sb-hdr">
          <div style="display:flex;gap:4px;align-items:center;padding:4px 8px">
            <button class="btn btn-g btn-sm" style="font-size:10px;padding:1px 7px" onclick="TOC.insertTOC()"
              data-tooltip="ëª©ì°¨ ìë™ ì‚½ì…">ğŸ“‘ ì‚½ì…</button>
            <button class="btn-ic" onclick="TOC.build(document.getElementById('editor').value)"
              data-tooltip="ëª©ì°¨ ìƒˆë¡œê³ ì¹¨">â†»</button>
          </div>
        </div>
        <div id="toc-list">
          <div style="padding:12px;color:var(--tx3);font-size:12px">í—¤ë”©(#) ì¶”ê°€ ì‹œ ìë™ ìƒì„±</div>
        </div>
      </div>

      <!-- FILES íŒ¨ë„ -->
      <div id="sb-panel-files" class="sb-panel">

        <!-- ì†ŒìŠ¤ ì „í™˜ íƒ­: ë¡œì»¬ / GitHub -->
        <div id="files-src-tabs">
          <button class="fsrc-tab active" id="fsrc-local" onclick="SB.switchSource('local')">ğŸ’» ë¡œì»¬</button>
          <button class="fsrc-tab" id="fsrc-github" onclick="SB.switchSource('github')">ğŸ™ GitHub</button>
        </div>

        <!-- ë¡œì»¬ ì„œë¸ŒíŒ¨ë„ -->
        <div id="files-sub-local" class="files-sub active">
          <div id="files-hdr">
            <button class="btn btn-g btn-sm" id="files-folder-btn" onclick="FM.selectFolder()"
              title="í´ë” ì„ íƒ">ğŸ“ ì„ íƒ</button>
            <span id="files-folder-name" title="ì„ íƒëœ í´ë”">ë¯¸ì„ íƒ</span>
            <button class="btn-ic" id="files-hidden-toggle-btn" onclick="FM.toggleShowHidden()"
              title="ìˆ¨ê¹€ íŒŒì¼ í‘œì‹œ (.git ë“±)" style="display:none">ğŸ‘</button>
            <button class="btn-ic" id="files-refresh-btn" onclick="FM.refresh()"
              title="ì‹¤ì œ íŒŒì¼ ë™ê¸°í™”" style="display:none">â†»</button>
            <button class="btn btn-g btn-sm" id="files-open-btn" onclick="FM.openInExplorer()"
              title="ì„ íƒëœ ë¡œì»¬ í´ë”ë¥¼ íŒŒì¼ íƒìƒ‰ê¸°ì—ì„œ ì—´ê¸°" style="display:none">ğŸ“‚</button>
            <button class="btn-ic" id="files-fold-toggle-btn" onclick="FM.toggleFoldAll()"
              title="ì „ì²´ í´ë” ì ‘ê¸°/í¼ì¹˜ê¸°" style="display:none">â–½</button>
          </div>
          <div id="files-search">
            <input type="text" id="files-search-input" placeholder="íŒŒì¼ ê²€ìƒ‰..." oninput="FM.search(this.value)">
          </div>
          <div id="files-list">
            <div class="files-empty">í´ë”ë¥¼ ì„ íƒí•˜ë©´ .md/.txt/.html íŒŒì¼ ëª©ë¡ì´ í‘œì‹œë©ë‹ˆë‹¤</div>
          </div>
          <!-- ë¡œì»¬ ì•¡ì…˜ ë°”: í•­ìƒ í‘œì‹œ -->
          <div id="fm-local-actions">
            <button id="fm-newfile-btn" onclick="FM.createLocalFile()" title="í˜„ì¬ í´ë”ì— ìƒˆ íŒŒì¼ ë§Œë“¤ê¸°">
              <span class="fm-act-icon">ğŸ“„</span>
              <span class="fm-act-label">ìƒˆ íŒŒì¼</span>
            </button>
            <button id="fm-mkdir-btn" onclick="FM.createFolder()" title="í˜„ì¬ í´ë”ì— ìƒˆ í´ë” ë§Œë“¤ê¸°">
              <span class="fm-act-icon">ğŸ“</span>
              <span class="fm-act-label">ìƒˆ í´ë”</span>
            </button>
          </div>
          <!-- GitHub ë™ê¸°í™” ë°”: í´ë” ì„ íƒ í›„ í‘œì‹œ -->
          <div id="fm-sync-bar" style="display:none">
            <div id="fm-git-actions">
              <button id="fm-clone-btn" onclick="FM.cloneFromGitHub()" title="GitHub â†’ ë¡œì»¬ í´ë” Clone URL ë³µì‚¬">
                <span>â˜</span> Clone
              </button>
              <button id="fm-pull-btn" onclick="FM.pullFromGitHub()" title="GitHub â†’ ë¡œì»¬ ìºì‹œ (Pull)">
                <span id="fm-pull-icon">â¬‡</span> Pull
              </button>
              <button id="fm-sync-btn" onclick="FM.syncToGitHub()" title="ë¡œì»¬ ìºì‹œ â†’ GitHub (Push)">
                <span id="fm-sync-icon">â¬†</span> Push
              </button>
              <span id="fm-sync-status"></span>
            </div>
          </div>
        </div>

        <!-- GitHub ì„œë¸ŒíŒ¨ë„ -->
        <div id="files-sub-github" class="files-sub">
          <div id="gh-hdr">
            <button class="btn btn-g btn-sm" id="gh-settings-btn" onclick="GH.showSettings()"
              title="GitHub ì„¤ì •">âš™ ì„¤ì •</button>
            <button type="button" id="gh-hdr-save-btn" onclick="GH.saveSettings()" title="ì—°ê²° í…ŒìŠ¤íŠ¸ &amp; ì €ì¥"
              class="gh-hdr-save-circle">âœ“</button>
            <span id="gh-hdr-ok-msg" style="display:none;font-size:10px;color:var(--ok);font-weight:600;margin-left:2px;opacity:0;transition:opacity .25s" aria-live="polite"></span>
            <a id="gh-repo-link" href="#" target="_blank" title="GitHub ì €ì¥ì†Œ ì—´ê¸°"
              style="display:none" class="btn-ic">â†—</a>
            <span id="gh-repo-name" style="flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap">ë¯¸ì—°ê²°</span>
            <button class="btn-ic" id="gh-refresh-btn" onclick="GH.refresh()"
              title="ìƒˆë¡œê³ ì¹¨" style="display:none">â†»</button>
          </div>
          <div id="gh-search">
            <div style="display:flex;gap:4px;align-items:center">
              <input type="text" id="gh-search-input" placeholder="íŒŒì¼ ê²€ìƒ‰..."
                oninput="GH.search(this.value)" style="flex:1">
              <button class="btn-ic" id="gh-fold-toggle-btn" onclick="GH.toggleFoldAll()"
                title="ì „ì²´ í´ë” ì ‘ê¸°/í¼ì¹˜ê¸°" style="font-size:11px;padding:2px 5px;flex-shrink:0">â–½</button>
            </div>
          </div>
          <div id="gh-list">
            <div class="files-empty">GitHub ì €ì¥ì†Œë¥¼ ì—°ê²°í•˜ì„¸ìš”</div>
          </div>

      <div id="sb-stats" class="sb-stats-one-row">
        <button onclick="PVShare.openModal()" title="md-viewer ê³µìœ  ê´€ë¦¬"
          style="flex-shrink:0;background:rgba(88,200,248,.15);
            border:1px solid rgba(88,200,248,.35);border-radius:5px;
            color:#58c8f8;font-size:10px;padding:2px 8px;cursor:pointer;
            font-family:var(--fm);font-weight:600;white-space:nowrap">
          ğŸ“¤ ê³µê°œì„¤ì •</button>
        <button id="gh-newfile-btn" onclick="GH.createNewFile()" title="í˜„ì¬ GitHub ì €ì¥ì†Œì— ìƒˆ íŒŒì¼ ë§Œë“¤ê¸°" style="display:none" class="sb-gh-btn">
          <span class="fm-act-icon">ğŸ“„</span>
          <span class="fm-act-label">ìƒˆ íŒŒì¼</span>
        </button>
        <button id="gh-mkdir-btn" onclick="GH.createNewFolder()" title="í˜„ì¬ GitHub ì €ì¥ì†Œì— ìƒˆ í´ë” ë§Œë“¤ê¸°" style="display:none" class="sb-gh-btn">
          <span class="fm-act-icon">ğŸ“</span>
          <span class="fm-act-label">ìƒˆ í´ë”</span>
        </button>
      </div>
      <!-- sb-stats ë°”ë¡œ ì•„ë˜: ìƒˆ ì»¤ë°‹ / ê¸°ê¸° ë©”ì‹œì§€ + ì»¤ë°‹ íˆìŠ¤í† ë¦¬ (ê¸€ì”¨ ì‘ê²Œ) -->
      <div id="sb-gh-messages">
        <div style="display:flex;gap:6px;align-items:center;flex-wrap:wrap">
          <div id="gh-new-commits-banner" style="display:none">
            <span id="gh-new-commits-msg"></span>
            <button onclick="GH.dismissCommitBanner()">âœ•</button>
          </div>
          <button class="btn-ic" id="gh-commit-history-btn" onclick="App.showCommitHistory()"
            title="ì»¤ë°‹ íˆìŠ¤í† ë¦¬" style="font-size:11px;padding:2px 5px;flex-shrink:0">ğŸ“œ</button>
        </div>
        <div id="gh-device-bar" style="display:none">
          <span id="gh-device-info"></span>
        </div>
      </div>
    </nav>

    <!-- SIDEBAR RESIZER -->
    <div id="sidebar-resizer" title="ë“œë˜ê·¸í•˜ì—¬ ì‚¬ì´ë“œë°” ë„ˆë¹„ ì¡°ì ˆ"></div>

    <!-- MAIN -->
    <main id="main">
      <div id="find-bar">
        <span style="font-size:11px;color:var(--tx3)">ì°¾ê¸°</span>
        <input id="fi" type="text" placeholder="ê²€ìƒ‰ì–´..." onkeydown="App.findKey(event)">
        <span style="font-size:11px;color:var(--tx3)">ë°”ê¾¸ê¸°</span>
        <input id="ri" type="text" placeholder="ë°”ê¿€ ë‚´ìš©...">
        <button class="btn btn-g btn-sm" onclick="App.findNext()">ë‹¤ìŒ</button>
        <button class="btn btn-g btn-sm" onclick="App.replaceOne()">ë°”ê¾¸ê¸°</button>
        <button class="btn btn-g btn-sm" onclick="App.replaceAll()">ëª¨ë‘</button>
        <button class="btn-ic" onclick="App.toggleFind()">âœ•</button>
        <span id="fc-cnt" style="font-size:11px;color:var(--tx3)"></span>
      </div>
      <div id="editor-wrap">
        <div id="editor-pane">
          <div id="ed-hdr">
            <span class="pane-lbl"><span></span>Editor</span>
            <span class="spacer"></span>
            <div style="display:flex;align-items:center;gap:3px;margin-right:6px">
              <button class="tb" id="ed-sync-btn" onclick="SS.toggle()" data-tooltip="ë‚´ë¶€ PV ìŠ¤í¬ë¡¤ ë™ê¸°í™” ON/OFF (Shift+Alt+M)" data-key="Shift+Alt+M" style="font-size:10px;padding:0 7px;height:22px;color:#6af7b0;border:1px solid rgba(106,247,176,.35);border-radius:4px;font-weight:600;background:rgba(106,247,176,.12)">ğŸ”— ë™ê¸°í™”</button>
              <button class="tb" id="ed-pv-sync-btn" onclick="if(typeof PW!=='undefined'&&PW.hasWin())PW.sendToggleSync()" data-tooltip="ìƒˆì°½ PV ìŠ¤í¬ë¡¤ ë™ê¸°í™” ON/OFF (ìƒˆì°½ ë¯¸ë¦¬ë³´ê¸° ì—´ë¦¼ ì‹œ)"
                style="font-size:10px;padding:0 7px;height:22px;color:#888;border:1px solid rgba(255,255,255,.15);border-radius:4px;font-weight:600;background:rgba(255,255,255,.05)">ğŸ”— PV ë™ê¸°í™” OFF</button>
              <button class="tb tb-sys" id="ed-theme-btn" onclick="App.toggleEditorTheme()" data-tooltip="ì—ë””í„° ë‹¤í¬/ë¼ì´íŠ¸ (í´ë¦­ ì‹œ ì „í™˜)" style="font-size:14px" title="ì—ë””í„° í…Œë§ˆ">â—‘</button>
              <button class="tb tb-sys" onclick="EZ.dec()" data-tooltip="ì—ë””í„° ì¶•ì†Œ (Ctrl+9)" style="font-size:13px;font-weight:700;height:20px;padding:0 5px">âˆ’</button>
              <span id="ez-lbl" style="font-size:9.5px;font-family:var(--fm);color:#6acff7;min-width:30px;text-align:center">ì¶•ì†Œ</span>
              <button class="tb tb-sys" onclick="EZ.inc()" data-tooltip="ì—ë””í„° í™•ëŒ€ (Ctrl+0)" style="font-size:13px;font-weight:700;height:20px;padding:0 5px">ï¼‹</button>
            </div>
          </div>
          <div id="ed-container">
            <div id="line-numbers" class="vis">
              <div class="lnc" id="lnc"></div>
            </div>
            <div id="editor-line-highlight" aria-hidden="true"></div>
            <textarea id="editor" class="wln" placeholder="# ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”&#10;&#10;ì—¬ê¸°ì— Markdownì„ ì‘ì„±í•˜ì„¸ìš”.&#10;Alt+? â†’ ë‹¨ì¶•í‚¤ ëª©ë¡"
              spellcheck="false"></textarea>
          </div>
        </div>
        <!-- SPLIT RESIZER -->
        <div id="split-resizer" title="ë“œë˜ê·¸í•˜ì—¬ ì°½ í¬ê¸° ì¡°ì ˆ"></div>
        <div id="preview-pane">
          <div id="pv-hdr">
            <span class="pane-lbl"><span style="background:var(--ac2)"></span>PV</span>
            <span class="spacer"></span>
            <div style="display:flex;align-items:center;gap:3px">
              <!-- í™•ëŒ€/ì¶•ì†Œ -->
              <button class="tb tb-sys" onclick="PV.zoomOut()" data-tooltip="ë¯¸ë¦¬ë³´ê¸° ì¶•ì†Œ"
                style="font-size:14px;font-weight:700">ï¼</button>
              <span id="pv-zoom-lbl"
                style="font-size:10px;font-family:var(--fm);color:#6acff7;min-width:32px;text-align:center">100%</span>
              <button class="tb tb-sys" onclick="PV.zoomIn()" data-tooltip="ë¯¸ë¦¬ë³´ê¸° í™•ëŒ€"
                style="font-size:14px;font-weight:700">ï¼‹</button>
              <div class="ts"></div>
              <!-- PPT ëª¨ë“œ -->
              <button class="tb" id="ppt-btn" onclick="PV.togglePPT()"
                data-tooltip="PPT ëª¨ë“œ â€” íŒ¨ë„ ë„ˆë¹„ì— ë§ì¶° í™•ëŒ€ í›„ í˜ì´ì§€ ë‹¨ìœ„ ì´ë™ (â†‘â†“ í‚¤)"
                style="font-size:10px;padding:0 7px;height:22px;color:#f0c060;border:1px solid rgba(240,192,96,.35);border-radius:4px;font-weight:600">ğŸ¬
                PPT</button>
              <button class="tb" id="slide-mode-btn" onclick="SlideMode.toggle()"
                data-tooltip="ìŠ¬ë¼ì´ë“œ ëª¨ë“œ â€” page-break ê¸°ì¤€ 16:9 ì¹´ë“œë¡œ ë¯¸ë¦¬ë³´ê¸°"
                style="font-size:10px;padding:0 7px;height:22px;color:#9d8cf7;border:1px solid rgba(124,106,247,.35);border-radius:4px;font-weight:600">ğŸ“½ Slide</button>
              <button class="tb" id="pv-trans-btn" onclick="PV.toggleTrans()"
                data-tooltip="í˜ì´ì§€ ë°©í–¥ ì „í™˜ (ê°€ë¡œ/ì„¸ë¡œ)"
                style="font-size:10px;padding:0 7px;height:22px;color:#f0c060;border:1px solid rgba(240,192,96,.35);border-radius:4px;font-weight:600">â†”
                Trans</button>
              <div class="ts"></div>
              <!-- í°íŠ¸ í¬ê¸° -->
              <div class="ts"></div>
              <span style="font-size:9px;color:rgba(255,255,255,.4);font-family:var(--fm)">í°íŠ¸</span>
              <button class="tb tb-sys" onclick="PV.fontDown()" data-tooltip="í°íŠ¸ ì¶•ì†Œ" style="font-size:11px">á´¬ï¼</button>
              <span id="pv-font-lbl"
                style="font-size:10px;font-family:var(--fm);color:#6acff7;min-width:28px;text-align:center">11pt</span>
              <button class="tb tb-sys" onclick="PV.fontUp()" data-tooltip="í°íŠ¸ í™•ëŒ€" style="font-size:11px">á´¬ï¼‹</button>
              <div class="ts"></div>
              <!-- Dark í…Œë§ˆ -->
              <button class="tb" id="pv-dark-btn" onclick="PV.toggleDark()" data-tooltip="ë¯¸ë¦¬ë³´ê¸° ë‹¤í¬ í…Œë§ˆ í† ê¸€"
                style="font-size:10px;padding:0 7px;height:22px;color:#7ab8ff;border:1px solid rgba(100,160,255,.3);border-radius:4px;font-weight:600">â—‘
                Dark</button>
              <div class="ts"></div>
              <button class="tb tb-a4" id="a4-ruler-btn" onclick="A4Ruler.toggle()"
                data-tooltip="A4 í˜ì´ì§€ êµ¬ë¶„ì„  í‘œì‹œ/ìˆ¨ê¸°ê¸° â€” 297mm ìœ„ì¹˜ì— ë¹¨ê°„ ì ì„ ">ğŸ“„ A4</button>
              <button class="tb tb-copy-rich" id="copy-rich-btn" onclick="CP.copyRich()"
                data-tooltip="ì„œì‹ ìˆëŠ” ë³µì‚¬ â€” WordÂ·êµ¬ê¸€ë…ìŠ¤ì— ë¶™ì—¬ë„£ê¸° ì‹œ ì„œì‹ ìœ ì§€">ğŸ“‹ ë³µì‚¬</button>
              <button class="tb tb-copy-text" id="copy-text-btn" onclick="CP.copyText()"
                data-tooltip="í…ìŠ¤íŠ¸ ë³µì‚¬ â€” ì„œì‹ ì—†ì´ ìˆœìˆ˜ í…ìŠ¤íŠ¸ë§Œ">ï¼¡ í…ìŠ¤íŠ¸</button>
             
              <button class="tb" id="pv-sync-btn" onclick="SS.toggle()"
                data-tooltip="ì—ë””í„° â†” PV ìŠ¤í¬ë¡¤ ë™ê¸°í™” ON/OFF"
                style="font-size:10px;padding:0 7px;height:22px;color:#6af7b0;border:1px solid rgba(106,247,176,.35);border-radius:4px;font-weight:600;background:rgba(106,247,176,.12)">ğŸ”— ë™ê¸°í™” ON</button>
              <button class="tb" id="pv-share-btn" onclick="PVShare.copy()"
                data-tooltip="í˜„ì¬ ë¬¸ì„œ ê³µìœ  ë§í¬ ë³µì‚¬ (GitHub ì €ì¥ íŒŒì¼ë§Œ ê°€ëŠ¥)"
                style="font-size:10px;padding:0 7px;height:22px;color:#58c8f8;border:1px solid rgba(88,200,248,.3);border-radius:4px;font-weight:600;display:none">ğŸ”— ê³µìœ </button>
            </div>
          </div>
          <div id="preview-container">
          </div>
          <!-- PPT ë„¤ë¹„ê²Œì´ì…˜ -->
          <div id="ppt-nav">
            <button onclick="PV.pptPrev()" title="ì´ì „ í˜ì´ì§€ [â†]">â—€</button>
            <span id="ppt-pg">1 / 1</span>
            <button onclick="PV.pptNext()" title="ë‹¤ìŒ í˜ì´ì§€ [â†’]">â–¶</button>
            <div style="width:1px;height:16px;background:rgba(255,255,255,.2);margin:0 4px"></div>
            <button onclick="PV.togglePPT()" title="PPT ëª¨ë“œ ì¢…ë£Œ [Esc]"
              style="font-size:13px;opacity:.6;background:none;border:none;cursor:pointer;color:#ddd;padding:0 4px">âœ•</button>
          </div>
        </div>
      </div>
      <div id="error-panel">
        <div id="ep-hdr"><span>âš  ì˜¤ë¥˜</span><button class="btn-ic" onclick="App.closeErr()">âœ•</button></div>
        <div id="ep-list"></div>
      </div>
    </main>

    <!-- STATUSBAR -->
    <div id="statusbar">
      <div class="si" id="autosave-indicator">
        <div class="save-dot" id="save-dot"></div><span id="save-st">ì €ì¥ë¨</span>
      </div>
      <div class="ss">|</div>
      <div class="si" id="cursor-pos">ì¤„ 1, ì—´ 1</div>
      <div class="ss">|</div>
      <div class="si" id="statusbar-ar-wrap" style="display:none;align-items:center;gap:4px">
        <button id="gh-ar-btn" onclick="GH.toggleAutoRefresh()" title="ìë™ ìƒˆë¡œê³ ì¹¨ ON/OFF" class="gh-ar-btn gh-ar-btn-circle on"><span class="gh-ar-dot"></span></button>
        <button id="gh-ar-setting-btn" onclick="GH.showArIntervalSetting()" title="ìë™ ìƒˆë¡œê³ ì¹¨ ê°„ê²©(ì´ˆ) ì„¤ì •" class="gh-ar-setting-btn gh-ar-statusbar">âš™</button>
        <span id="gh-ar-countdown" class="gh-ar-countdown" style="display:none" title="ë‹¤ìŒ ìƒˆë¡œê³ ì¹¨ê¹Œì§€ ë‚¨ì€ ì‹œê°„"></span>
      </div>
      <div class="ss" id="statusbar-ar-sep" style="display:none">|</div>
      <div class="si" id="sel-info"></div>
      <div class="ssp"></div>
      <div class="si" id="error-count" onclick="App.toggleErr()"></div>
      <div class="ss" id="ec-sep" style="display:none">|</div>
      <div class="si">UTF-8</div>
      <div class="ss">|</div>
      <div class="si" id="mode-ind">NORMAL</div>
      <div id="doc-stats-bar" class="si"><span id="sw">0 ë‹¨ì–´</span><span id="sc">0 ì</span><span id="sp">ì•½ 0 í˜ì´ì§€</span></div>
    </div>
  </div><!-- #app -->

  <!-- GITHUB SETTINGS MODAL -->
  <div class="ov" id="gh-modal" onclick="if(event.target===this)GH.hideSettings()">
    <div class="modal" style="max-width:460px">
      <div class="mh">
        <span>ğŸ™ GitHub ì—°ê²° ì„¤ì •</span>
        <button class="btn-ic" onclick="GH.hideSettings()">âœ•</button>
      </div>
      <!-- ìë™ìƒˆë¡œê³ ì¹¨ / ì´ˆì„¤ì • / ì‹œê°„í‘œì‹œ (í…ìŠ¤íŠ¸ë¡œ í‘œì‹œ) -->
      <div class="gh-modal-ar-row">
        <span style="font-size:11px;color:var(--tx2);margin-right:4px">ìë™ ìƒˆë¡œê³ ì¹¨</span>
        <button id="gh-ar-btn-modal" onclick="GH.toggleAutoRefresh()" title="ìë™ ìƒˆë¡œê³ ì¹¨ ON/OFF" class="gh-ar-btn">ğŸ”„ ON</button>
        <button id="gh-ar-setting-btn-modal" onclick="GH.showArIntervalSetting()" title="ìë™ ìƒˆë¡œê³ ì¹¨ ê°„ê²©(ì´ˆ) ì„¤ì •" class="gh-ar-setting-btn">âš™ ì´ˆì„¤ì •</button>
        <span id="gh-ar-countdown-modal" class="gh-ar-countdown" style="display:none" title="ë‹¤ìŒ ìƒˆë¡œê³ ì¹¨ê¹Œì§€ ë‚¨ì€ ì‹œê°„"></span>
      </div>

      <!-- â”€â”€ ì£¼ì†Œ 3ê°œ í•œëˆˆì— ë³´ê¸°/í¸ì§‘ â”€â”€ -->
      <div style="padding:10px 16px 8px;background:rgba(160,144,255,.06);
          border-bottom:1px solid rgba(160,144,255,.15);display:flex;flex-direction:column;gap:7px">

        <!-- ì•± ì†ŒìŠ¤ -->
        <div style="display:flex;align-items:center;gap:7px">
          <span style="font-size:10.5px;color:var(--tx3);white-space:nowrap;width:80px;flex-shrink:0">ì´ ì•± ì†ŒìŠ¤</span>
          <div style="display:flex;align-items:center;gap:5px;flex:1;min-width:0">
            <a id="app-src-link" href="https://github.com/shoutjoy/mdlive" target="_blank" rel="noopener noreferrer"
              style="font-size:11px;color:#a090ff;text-decoration:none;font-family:var(--fm);
                padding:2px 7px;border-radius:4px;background:rgba(160,144,255,.12);
                border:1px solid rgba(160,144,255,.25);white-space:nowrap;overflow:hidden;
                text-overflow:ellipsis;max-width:160px"
              onmouseover="this.style.background='rgba(160,144,255,.22)'"
              onmouseout="this.style.background='rgba(160,144,255,.12)'">shoutjoy/mdlive â†—</a>
            <input id="app-src-input-inline" type="text" placeholder="owner/repo"
              style="display:none;font-size:11px;font-family:var(--fm);padding:2px 7px;
                border-radius:4px;background:var(--bg3);border:1px solid var(--ac);
                color:var(--tx);outline:none;flex:1;min-width:80px"
              onkeydown="if(event.key==='Enter')_saveAppSrc();if(event.key==='Escape')_cancelAppSrc()">
            <button onclick="_editAppSrc()"
              style="font-size:10px;padding:2px 6px;border-radius:3px;border:1px solid rgba(160,144,255,.3);
                background:transparent;color:var(--tx3);cursor:pointer;flex-shrink:0" title="í¸ì§‘">âœï¸</button>
            <button id="app-src-save-inline" onclick="_saveAppSrc()"
              style="display:none;font-size:10px;padding:2px 7px;border-radius:3px;
                border:1px solid rgba(106,247,176,.4);background:rgba(106,247,176,.1);
                color:#6af7b0;cursor:pointer;flex-shrink:0">ì €ì¥</button>
          </div>
        </div>

        <!-- ì €ì¥ì†Œ -->
        <div style="display:flex;align-items:center;gap:7px">
          <span style="font-size:10.5px;color:var(--tx3);white-space:nowrap;width:80px;flex-shrink:0">ì €ì¥ì†Œ</span>
          <input type="text" id="gh-repo-input" class="gh-input"
            placeholder="username/my-notes" autocomplete="off" spellcheck="false"
            style="flex:1;font-size:12px;padding:4px 8px">
        </div>

        <!-- md-viewer -->
        <div style="display:flex;align-items:center;gap:7px">
          <span style="font-size:10.5px;color:var(--tx3);white-space:nowrap;width:80px;flex-shrink:0">md-viewer ê³µìœ </span>
          <input type="text" id="pvs-repo-inline" class="gh-input"
            placeholder="owner/md-viewer" autocomplete="off" spellcheck="false"
            style="flex:1;font-size:12px;padding:4px 8px">
        </div>

      </div>
      <script>
      /* ì €ì¥ëœ ì•± ì†ŒìŠ¤ ì£¼ì†Œ ë³µì› */
      (function(){
        var saved = localStorage.getItem('mdpro_app_src');
        if(saved){
          var lnk=document.getElementById('app-src-link');
          if(lnk){ lnk.href='https://github.com/'+saved; lnk.textContent=saved+' â†—'; }
        }
        /* md-viewer ì €ì¥ì†Œ ë³µì› */
        var pvsaved = localStorage.getItem('pvshare_cfg');
        if(pvsaved){ try{ var pc=JSON.parse(pvsaved); var pi=document.getElementById('pvs-repo-inline'); if(pi&&pc.repo) pi.value=pc.repo; }catch(e){} }
      })();
      function _editAppSrc(){
        var lnk=document.getElementById('app-src-link');
        var inp=document.getElementById('app-src-input-inline');
        var sav=document.getElementById('app-src-save-inline');
        inp.value=lnk.href.replace('https://github.com/','');
        lnk.style.display='none'; inp.style.display=''; sav.style.display='';
        inp.focus(); inp.select();
      }
      function _saveAppSrc(){
        var inp=document.getElementById('app-src-input-inline');
        var lnk=document.getElementById('app-src-link');
        var sav=document.getElementById('app-src-save-inline');
        var val=inp.value.trim().replace(/^\/+/,'').replace(/\/+$/,'');
        if(!val)return;
        lnk.href='https://github.com/'+val; lnk.textContent=val+' â†—';
        localStorage.setItem('mdpro_app_src',val);
        lnk.style.display=''; inp.style.display='none'; sav.style.display='none';
      }
      function _cancelAppSrc(){
        var lnk=document.getElementById('app-src-link');
        var inp=document.getElementById('app-src-input-inline');
        var sav=document.getElementById('app-src-save-inline');
        lnk.style.display=''; inp.style.display='none'; sav.style.display='none';
      }
      </script>

      <div style="padding:16px;display:flex;flex-direction:column;gap:14px">
        <div class="gh-field">
          <label class="gh-label">Personal Access Token (PAT)</label>
          <input type="password" id="gh-token-input" class="gh-input"
            placeholder="ghp_xxxxxxxxxxxxxxxxxxxx" autocomplete="off" spellcheck="false">
          <div class="gh-hint">
            GitHub â†’ Settings â†’ Developer settings â†’ Personal access tokens â†’ Tokens (classic) â†’
            <b>repo</b> ê¶Œí•œ ì²´í¬ í›„ ìƒì„±
            <a href="https://github.com/settings/tokens/new" target="_blank">í† í° ë°œê¸‰ â†’</a>
          </div>
        </div>
        <div class="gh-field">
          <label class="gh-label">ë¸Œëœì¹˜</label>
          <input type="text" id="gh-branch-input" class="gh-input"
            placeholder="main" autocomplete="off" spellcheck="false">
        </div>
        <div class="gh-field">
          <label class="gh-label">í´ë” ê²½ë¡œ (ë¹„ì›Œë‘ë©´ ë£¨íŠ¸ ì „ì²´)</label>
          <input type="text" id="gh-path-input" class="gh-input"
            placeholder="notes/  ë˜ëŠ” ë¹„ì›Œë‘ê¸°" autocomplete="off" spellcheck="false">
        </div>
        <div class="gh-field">
          <label class="gh-label">ì´ ê¸°ê¸° ì´ë¦„ (ì»¤ë°‹ ë©”ì‹œì§€ì— ìë™ ì‚½ì…)</label>
          <input type="text" id="gh-device-input" class="gh-input"
            placeholder="ì˜ˆ: MacBook, ì—°êµ¬ì‹¤PC, iPad" autocomplete="off" spellcheck="false">
          <div class="gh-hint">ì»¤ë°‹ íˆìŠ¤í† ë¦¬ì—ì„œ ì–´ëŠ ê¸°ê¸°ì—ì„œ ì‘ì„±í–ˆëŠ”ì§€ ì¶”ì í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</div>
        </div>
        <div id="gh-conn-status"></div>
        <div class="mf">
          <button class="btn btn-g btn-sm" onclick="GH.hideSettings()">ì·¨ì†Œ</button>
          <button class="btn btn-ac btn-sm" onclick="GH.saveSettings()">ì—°ê²° í…ŒìŠ¤íŠ¸ &amp; ì €ì¥</button>
        </div>
      </div>
    </div>
  </div>

  <!-- COMMIT HISTORY MODAL -->
  <div class="ov" id="gh-history-modal" onclick="if(event.target===this)App.hideModal('gh-history-modal')">
    <div class="modal" style="max-width:520px;max-height:80vh;display:flex;flex-direction:column">
      <div class="mh">
        <span>&#x1F4DC; ì»¤ë°‹ íˆìŠ¤í† ë¦¬</span>
        <div style="display:flex;gap:6px;align-items:center">
          <span id="gh-history-repo" style="font-size:10px;color:var(--tx3)"></span>
          <button class="btn-ic" onclick="GH.refreshHistory()" title="ìƒˆë¡œê³ ì¹¨">&#x21BB;</button>
          <button class="btn-ic" onclick="App.hideModal('gh-history-modal')">&#x2715;</button>
        </div>
      </div>
      <div style="padding:8px 12px;border-bottom:1px solid var(--bd);flex-shrink:0">
        <input type="text" id="gh-history-search" placeholder="ì»¤ë°‹ ë©”ì‹œì§€ / ì‘ì„±ì ê²€ìƒ‰..."
          oninput="GH.filterHistory(this.value)"
          style="width:100%;background:var(--bg3);border:1px solid var(--bd);border-radius:5px;color:var(--tx);font-size:11px;padding:5px 9px;outline:none;box-sizing:border-box">
      </div>
      <div id="gh-history-list" style="flex:1;overflow-y:auto;padding:4px 0;scrollbar-width:thin"></div>
      <div class="mf">
        <span id="gh-history-count" style="font-size:10.5px;color:var(--tx3)"></span>
        <button class="btn btn-g btn-sm" onclick="App.hideModal('gh-history-modal')">ë‹«ê¸°</button>
      </div>
    </div>
  </div>

  <!-- GH SAVE OPTIONS MODAL -->
  <div class="ov" id="gh-save-modal" onclick="if(event.target===this)App.hideModal('gh-save-modal')">
    <div class="modal gh-save-modal-box" id="gh-save-modal-box"
      style="min-width:460px;width:clamp(460px,55vw,780px);max-width:90vw;overflow:visible;position:relative">
      <!-- ë¦¬ì‚¬ì´ì¦ˆ í•¸ë“¤ (ìš°ì¸¡ í•˜ë‹¨) -->
      <div id="gh-save-resize-handle"
        style="position:absolute;bottom:0;right:0;width:18px;height:18px;cursor:se-resize;
               display:flex;align-items:flex-end;justify-content:flex-end;padding:3px;
               color:var(--tx3);font-size:11px;user-select:none;z-index:10"
        title="ë“œë˜ê·¸í•˜ì—¬ í¬ê¸° ì¡°ì ˆ">âŠ¿</div>
      <!-- ë¦¬ì‚¬ì´ì¦ˆ í•¸ë“¤ (ìš°ì¸¡ ì¤‘ê°„) -->
      <div id="gh-save-resize-right"
        style="position:absolute;top:50%;right:-4px;transform:translateY(-50%);
               width:8px;height:40px;cursor:ew-resize;border-radius:4px;
               background:var(--bd);opacity:0.5;z-index:10"
        title="ë“œë˜ê·¸í•˜ì—¬ ë„ˆë¹„ ì¡°ì ˆ"></div>
      <div class="mh">
        <span>ğŸ’¾ ì €ì¥ ë°©ë²• ì„ íƒ</span>
        <button class="btn-ic" onclick="App.hideModal('gh-save-modal')">âœ•</button>
      </div>
      <div style="padding:14px 16px;display:flex;flex-direction:column;gap:10px">
        <div>
          <label style="font-size:11px;color:var(--tx3);display:block;margin-bottom:4px">íŒŒì¼ ê²½ë¡œ / íŒŒì¼ëª…</label>
          <input type="text" id="gh-save-file-path" class="gh-input"
            placeholder="ê²½ë¡œ/íŒŒì¼ëª….md" autocomplete="off"
            style="font-size:12px;font-family:monospace;width:100%;box-sizing:border-box">
        </div>
        <!-- ì»¤ë°‹ ë©”ì‹œì§€ -->
        <div class="gh-field" id="gh-save-commit-section">
          <label class="gh-label">ì»¤ë°‹ ë©”ì‹œì§€</label>
          <input type="text" id="gh-save-commit-msg" class="gh-input"
            placeholder="Update íŒŒì¼ëª…" autocomplete="off"
            style="width:100%;box-sizing:border-box">
        </div>
        <!-- íŒŒì¼ëª… ë³€ê²½ ê°ì§€ ì•ˆë‚´ -->
        <div id="gh-rename-notice" style="display:none;font-size:10.5px;padding:8px 10px;
          background:rgba(247,201,106,.1);border:1px solid rgba(247,201,106,.3);
          border-radius:6px;color:#f7c96a;line-height:1.6">
          <b>âš  íŒŒì¼ëª…ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤</b><br>
          <span id="gh-rename-detail"></span><br>
          GitHubì—ì„œ ê¸°ì¡´ íŒŒì¼ì„ ì‚­ì œí•˜ê³  ìƒˆ ì´ë¦„ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.
        </div>
        <!-- ë²„íŠ¼ í–‰ 1: ì €ì¥ ì˜µì…˜ -->
        <div class="mf" style="gap:6px;flex-wrap:wrap">
          <button class="btn btn-g btn-sm" onclick="App.hideModal('gh-save-modal')">ì·¨ì†Œ</button>
          <button class="btn btn-g btn-sm" onclick="App.ghSaveLocal()"
            title="í˜„ì¬ ë‚´ìš©ì„ .md íŒŒì¼ë¡œ ë‹¤ìš´ë¡œë“œ">ğŸ’¾ ë¡œì»¬</button>
          <button class="btn btn-ac btn-sm" id="gh-save-commit-btn"
            onclick="App.ghSaveCommit()">ğŸ™ GitHub ì»¤ë°‹</button>
        </div>
        <!-- ë²„íŠ¼ í–‰ 2: ê³µê°œ Push ì˜µì…˜ -->
        <div style="display:flex;gap:6px;margin-top:4px">
          <button class="btn btn-sm" style="flex:1;
              background:rgba(88,200,248,.12);border:1px solid rgba(88,200,248,.35);color:#58c8f8"
            onclick="App.hideModal('gh-save-modal');PVShare.quickPushCurrent()"
            title="md-viewer ì €ì¥ì†Œì—ë§Œ Push â€” GitHub ì»¤ë°‹ ì—†ìŒ">
            ğŸ“¤ md-viewerë§Œ Push</button>
          <button class="btn btn-sm" style="flex:1;
              background:rgba(106,247,176,.1);border:1px solid rgba(106,247,176,.3);color:#6af7b0"
            onclick="App.ghSaveAndPushViewer()"
            title="GitHub ì»¤ë°‹ + md-viewer Push ë™ì‹œ ì‹¤í–‰">
            ğŸ™+ğŸ“¤ ì»¤ë°‹ &amp; ê³µê°œ</button>
        </div>
        <!-- í¬ê¸° íŒíŠ¸ -->
        <div style="text-align:right;font-size:10px;color:var(--tx3);margin-top:2px;user-select:none">
          â†” ìš°ì¸¡ ë˜ëŠ” âŠ¿ ëª¨ì„œë¦¬ ë“œë˜ê·¸ë¡œ í¬ê¸° ì¡°ì ˆ
        </div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MODALS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

  <!-- HOTKEY OVERLAY -->
  <div id="hk-overlay" onclick="App.hideHK()">
    <div id="hk-panel" onclick="event.stopPropagation()">
      <h2 style="display:flex;align-items:center;justify-content:space-between;gap:12px;width:100%;margin-bottom:0">
        <span>âŒ¨ ë‹¨ì¶•í‚¤ ëª©ë¡ &amp; ì„¤ì •</span>
        <div style="display:flex;align-items:center;gap:6px;margin-left:auto;flex-shrink:0">
          <button class="btn btn-g btn-sm" id="hk-edit-btn" onclick="HK.toggleEdit()" style="font-size:11px">âœ í¸ì§‘</button>
          <button class="btn-ic" onclick="App.hideHK()">âœ•</button>
        </div>
      </h2>

      <!-- ë‹¨ì¶•í‚¤ ëª©ë¡ ë Œë” ì˜ì—­ (í—¤ë” ë°”ë¡œ ì•„ë˜, í•«í‚¤ ë“±ë¡ ì°½ ì˜¤ë¥¸ìª½ì— í¸ì§‘ ë²„íŠ¼) -->
      <div id="hk-list-wrap" style="margin-top:14px;padding-top:12px;border-top:1px solid var(--bd);min-height:120px"></div>

      <!-- í¸ì§‘ ëª¨ë“œ ì•ˆë‚´ -->
      <div id="hk-edit-hint"
        style="display:none;background:rgba(124,106,247,.1);border:1px solid var(--ac);border-radius:6px;padding:8px 12px;margin-bottom:12px;font-size:11px;color:var(--tx2);line-height:1.6">
        <b style="color:var(--ac)">í¸ì§‘ ëª¨ë“œ</b> â€” ì„¤ëª… í´ë¦­ í›„ ìˆ˜ì • | ë‹¨ì¶•í‚¤ í´ë¦­ í›„ ìˆ˜ì • | <kbd
          style="background:var(--bg5);border:1px solid var(--bd);border-radius:3px;padding:1px 5px;font-size:10px">Del</kbd>
        í–‰ ì‚­ì œ | <button onclick="HK.addRow()" class="btn btn-g btn-sm"
          style="font-size:10px;padding:2px 7px;vertical-align:middle">+ í–‰ ì¶”ê°€</button>
      </div>

      <!-- í˜„ì¬ ì¤„ í•˜ì´ë¼ì´íŠ¸ ON/OFF -->
      <div id="hk-line-highlight-row" style="margin-top:12px;padding-top:10px;border-top:1px solid var(--bd);display:flex;align-items:center;gap:8px;flex-wrap:wrap;min-width:0">
        <span style="font-size:11px;color:var(--tx2);flex-shrink:0">ì—ë””í„° í˜„ì¬ ì¤„ í•˜ì´ë¼ì´íŠ¸</span>
        <button type="button" class="btn btn-g btn-sm" id="hk-line-highlight-btn" onclick="EditorLineHighlight.toggle()" style="font-size:11px;flex-shrink:0">ON</button>
        <span style="font-size:11px;color:var(--tx3);margin-left:8px;flex-shrink:0">ì‘ì„±ì ì •ë³´</span>
        <input type="text" id="hk-author-name" placeholder="ì´ë¦„" title="ì´ë¦„" style="font-size:11px;padding:4px 6px;min-width:100px;flex:1;max-width:140px;background:var(--bg3);border:1px solid var(--bd);border-radius:4px;color:var(--tx);box-sizing:border-box">
        <input type="text" id="hk-author-affiliation" placeholder="ì†Œì†" title="ì†Œì†" style="font-size:11px;padding:4px 6px;min-width:120px;flex:1;max-width:180px;background:var(--bg3);border:1px solid var(--bd);border-radius:4px;color:var(--tx);box-sizing:border-box">
        <input type="text" id="hk-author-email" placeholder="ë©”ì¼" title="ë©”ì¼" style="font-size:11px;padding:4px 6px;min-width:130px;flex:1;max-width:200px;background:var(--bg3);border:1px solid var(--bd);border-radius:4px;color:var(--tx);box-sizing:border-box">
        <input type="text" id="hk-author-contact" placeholder="ì—°ë½ì²˜" title="ì—°ë½ì²˜" style="font-size:11px;padding:4px 6px;min-width:100px;flex:1;max-width:140px;background:var(--bg3);border:1px solid var(--bd);border-radius:4px;color:var(--tx);box-sizing:border-box">
        <button type="button" class="btn btn-g btn-sm" onclick="AuthorInfo.saveInputs()" style="font-size:11px;flex-shrink:0">ì €ì¥</button>
        <button type="button" class="btn btn-p btn-sm" onclick="AuthorInfo.insertAllIntoEditor(); App.hideHK();" style="font-size:11px;flex-shrink:0" title="ì‘ì„±í•œ ì‘ì„±ì ì •ë³´ë¥¼ ì—ë””í„°ì— ì‚½ì…">ì‘ì„±ëœ ê²ƒì€ ë¬¸ì„œì— ì‚½ì…</button>
      </div>

      <div style="margin-top:10px;font-size:11px;color:var(--tx3)" id="hk-footer-note">
        í‘œ ë‚´ë¶€: Tabâ†’ë‹¤ìŒ ì…€ | Enterâ†’ìƒˆ í–‰ | âŒ¨ Code ë²„íŠ¼â†’ì–¸ì–´ ì„ íƒ | Alt+Câ†’ë§ˆì§€ë§‰ ì–¸ì–´ ì§ì ‘ ì‚½ì…
      </div>
      <!-- ë¡œê·¸ì¸ í›„ ì„¤ì •: ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ / ì•± ì ê¸ˆ / ìë™ ì ê¸ˆ -->
      <div id="hk-settings-row" style="margin-top:12px;padding-top:10px;border-top:1px solid var(--bd);display:none;flex-wrap:wrap;gap:8px;align-items:center">
        <span style="font-size:11px;color:var(--tx3);margin-right:4px">ì„¤ì •</span>
        <button type="button" class="btn btn-g btn-sm" id="hk-btn-change-pw" onclick="App.hideHK();if(typeof AppLock!=='undefined')AppLock.showChangePw();" style="font-size:11px">ğŸ”‘ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</button>
        <button type="button" class="btn btn-g btn-sm" id="hk-btn-lock" onclick="App.hideHK();if(typeof AppLock!=='undefined')AppLock.lockNow();" style="font-size:11px">ğŸ”’ ì•± ì ê¸ˆ</button>
        <span style="font-size:11px;color:var(--tx3);margin-left:8px">ìë™ ì ê¸ˆ</span>
        <input type="number" id="hk-autolock-input" min="0" max="120" step="1" placeholder="0=ë„ê¸°" title="ë¶„ ë‹¨ìœ„ (0=ë„ê¸°, ìµœëŒ€ 120)"
          style="font-size:11px;padding:4px 8px;width:56px;background:var(--bg3);border:1px solid var(--bd);border-radius:4px;color:var(--tx1)"
          onchange="if(typeof AppLock!=='undefined')AppLock.setAutoLockMinutes(this.value||0)" />
        <span style="font-size:11px;color:var(--tx3)">ë¶„</span>
      </div>
      <!-- ì‘ì„±ì ì •ë³´ ì‚½ì…: Shift+Alt+A ì‚½ì… í•­ëª© ì„ íƒ + ì‚½ì… ë²„íŠ¼ -->
      <div id="hk-author-insert-row" style="margin-top:12px;padding-top:10px;border-top:1px solid var(--bd);display:flex;flex-wrap:wrap;gap:10px;align-items:center">
        <span style="font-size:11px;color:var(--tx3)">Shift+Alt+A ì‚½ì… í•­ëª©</span>
        <label style="display:flex;align-items:center;gap:4px;cursor:pointer;font-size:11px;color:var(--tx2)"><input type="checkbox" id="hk-insert-name" checked style="accent-color:var(--ac)"> ì´ë¦„</label>
        <label style="display:flex;align-items:center;gap:4px;cursor:pointer;font-size:11px;color:var(--tx2)"><input type="checkbox" id="hk-insert-affiliation" style="accent-color:var(--ac)"> ì†Œì†</label>
        <label style="display:flex;align-items:center;gap:4px;cursor:pointer;font-size:11px;color:var(--tx2)"><input type="checkbox" id="hk-insert-email" style="accent-color:var(--ac)"> ë©”ì¼</label>
        <label style="display:flex;align-items:center;gap:4px;cursor:pointer;font-size:11px;color:var(--tx2)"><input type="checkbox" id="hk-insert-contact" style="accent-color:var(--ac)"> ì—°ë½ì²˜</label>
        <button type="button" class="btn btn-p btn-sm" onclick="AuthorInfo.insertIntoEditor(); App.hideHK();" style="font-size:11px">ì‚½ì…</button>
      </div>
      <!-- AI API Key (Google AI Studio) -->
      <div id="ai-apikey-row" style="margin-top:12px;padding-top:10px;border-top:1px solid var(--bd);display:flex;flex-wrap:wrap;gap:8px;align-items:center">
        <span style="font-size:11px;color:var(--tx3);margin-right:4px">AI API Key</span>
        <input id="ai_apikey" type="password" placeholder="Google AI Studio API í‚¤"
          style="font-size:11px;padding:4px 8px;min-width:140px;max-width:260px;flex:1;background:var(--bg3);border:1px solid var(--bd);border-radius:4px;color:var(--tx1)"
          title="https://aistudio.google.com/api-keys ì—ì„œ ë°œê¸‰">
        <a href="https://aistudio.google.com/api-keys" target="_blank" rel="noopener" style="font-size:11px;color:var(--ac)" title="API í‚¤ ë°œê¸‰">í‚¤ ë°œê¸‰</a>
        <button type="button" class="btn btn-g btn-sm" id="ai-apikey-btn-save" onclick="AiApiKey.save()" style="font-size:11px">ì €ì¥</button>
        <button type="button" class="btn btn-g btn-sm" id="ai-apikey-btn-show" onclick="AiApiKey.toggleShow()" style="font-size:11px" title="í‚¤ ë³´ê¸°">ğŸ‘ í‚¤ë³´ê¸°</button>
      </div>
      <div style="margin-top:6px;font-size:11px;color:var(--tx3);line-height:1.5">
        <a href="https://aistudio.google.com/api-keys" target="_blank" rel="noopener" style="color:var(--ac)">https://aistudio.google.com/api-keys</a> ë§í¬ì—ì„œ API í‚¤ë¥¼ ìƒì„±í•˜ì—¬ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.
      </div>
      <!-- Scholar API Key (SerpAPI, Google Scholar ê²€ìƒ‰ìš©) -->
      <div id="scholar-apikey-row" style="margin-top:12px;padding-top:10px;border-top:1px solid var(--bd);display:flex;flex-wrap:wrap;gap:8px;align-items:center">
        <span style="font-size:11px;color:var(--tx3);margin-right:4px">Scholar API Key</span>
        <input id="scholar_apikey" type="password" placeholder="SerpAPI í‚¤ ë˜ëŠ” ì½”ë“œ ë¶™ì—¬ë„£ê¸°"
          style="font-size:11px;padding:4px 8px;min-width:140px;max-width:260px;flex:1;background:var(--bg3);border:1px solid var(--bd);border-radius:4px;color:var(--tx1)"
          title="í‚¤ë§Œ ë„£ê±°ë‚˜ getJson(...) ì½”ë“œ ë¶™ì—¬ë„£ìœ¼ë©´ api_key ìë™ ì¶”ì¶œ">
        <a href="https://serpapi.com/google-scholar-api" target="_blank" rel="noopener" style="font-size:11px;color:var(--ac)" title="SerpAPI í‚¤ ë°œê¸‰">í‚¤ ë°œê¸‰</a>
        <button type="button" class="btn btn-g btn-sm" id="scholar-apikey-btn-save" onclick="ScholarApiKey.save()" style="font-size:11px">ì €ì¥</button>
        <button type="button" class="btn btn-g btn-sm" id="scholar-apikey-btn-show" onclick="ScholarApiKey.toggleShow()" style="font-size:11px" title="í‚¤ ë³´ê¸°">ğŸ‘ í‚¤ë³´ê¸°</button>
      </div>
      <!-- getJson(...) ì½”ë“œ ë¶™ì—¬ë„£ê¸° â†’ api_key ì¶”ì¶œ -->
      <div id="scholar-code-paste-wrap" style="margin-top:8px;">
        <div style="font-size:11px;color:var(--tx3);margin-bottom:4px">ì½”ë“œì—ì„œ í‚¤ ì¶”ì¶œ (getJson ì½”ë“œ ë¶™ì—¬ë„£ê¸°)</div>
        <textarea id="scholar_code_paste" placeholder='getJson({ engine: "google_scholar", q: "...", api_key: "ì—¬ê¸°ì—_ì‹¤ì œ_í‚¤" }, ...);'
          style="width:100%;height:36px;min-height:36px;font-size:11px;font-family:var(--fm);padding:6px 8px;background:var(--bg3);border:1px solid var(--bd);border-radius:4px;color:var(--tx1);resize:none;box-sizing:border-box"></textarea>
        <div style="margin-top:6px;display:flex;align-items:center;gap:8px;flex-wrap:wrap">
          <button type="button" class="btn btn-p btn-sm" onclick="ScholarApiKey.extractFromPasteBox()" style="font-size:11px">í‚¤ ì¶”ì¶œ â†’ ìœ„ ì…ë ¥ë€ì— ë„£ê¸°</button>
          <span id="scholar-extract-feedback" style="font-size:11px;color:var(--ok);display:none">âœ“ api_key ì¶”ì¶œë¨</span>
        </div>
      </div>
      <div style="margin-top:6px;font-size:11px;color:var(--tx3);line-height:1.5">
        Scholar API Key(SerpAPI)ë¥¼ ì…ë ¥í•˜ë©´ <strong>ì°¸ê³ ë¬¸í—Œ ê²€ìƒ‰</strong>ì—ì„œ <strong>AI (Google Scholar)</strong> ëª¨ë“œë¡œ ì‹¤ì œ Google Scholar ê²°ê³¼ë¥¼ ì•± ì•ˆì—ì„œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. <a href="https://serpapi.com/google-scholar-api" target="_blank" rel="noopener" style="color:var(--ac)">https://serpapi.com/google-scholar-api</a> ì—ì„œ í‚¤ ë°œê¸‰(ë¬´ë£Œ í• ë‹¹ëŸ‰ ìˆìŒ). ì½”ë“œ ì˜ˆì‹œ ë¶™ì—¬ë„£ê¸° ì‹œ <code>api_key</code> ìë™ ì¶”ì¶œ.
      </div>
      <div style="margin-top:8px;display:flex;gap:6px;justify-content:flex-end" id="hk-edit-actions"
        style="display:none">
        <button class="btn btn-g btn-sm" onclick="HK.resetDefault()">â†© ê¸°ë³¸ê°’ ë³µì›</button>
        <button class="btn btn-p btn-sm" onclick="HK.saveEdit()">ì €ì¥</button>
      </div>

    </div>
  </div>

  <!-- SAVE DIALOG -->
  <div class="ov" id="save-modal" onclick="if(event.target===this)App.hideModal('save-modal')">
    <div class="modal" style="max-width:420px">
      <div class="mh">
        <span>&#x1F4BE; ì €ì¥ ë°©ë²• ì„ íƒ</span>
        <button class="btn-ic" onclick="App.hideModal('save-modal')">&#x2715;</button>
      </div>
      <div style="padding:12px 16px;display:flex;flex-direction:column;gap:8px">
        <!-- í˜„ì¬ ì €ì¥ ìœ„ì¹˜ í‘œì‹œ -->
        <div id="save-current-info" style="display:none;padding:8px 10px;background:var(--bg3);border:1px solid var(--bd);border-radius:6px;font-size:11px">
          <div style="color:var(--tx3);margin-bottom:3px">í˜„ì¬ ì €ì¥ ìœ„ì¹˜</div>
          <div id="save-current-path" style="color:var(--ac);font-family:var(--fm);word-break:break-all"></div>
        </div>
        <!-- í˜•ì‹ ë²„íŠ¼ë“¤ -->
        <button class="btn btn-g" style="justify-content:flex-start;padding:10px 13px;gap:10px" onclick="App.saveMD()">
          <span style="font-size:17px">&#x1F4DD;</span>
          <div style="text-align:left">
            <div style="font-weight:600;font-size:12px">Markdown (.md)</div>
            <div style="font-size:10.5px;color:var(--tx2)">ì›ë³¸ ë§ˆí¬ë‹¤ìš´ íŒŒì¼</div>
          </div>
        </button>
        <button class="btn btn-g" style="justify-content:flex-start;padding:10px 13px;gap:10px" onclick="App.saveTXT()">
          <span style="font-size:17px">&#x1F4C4;</span>
          <div style="text-align:left">
            <div style="font-weight:600;font-size:12px">Plain Text (.txt)</div>
            <div style="font-size:10.5px;color:var(--tx2)">ë§ˆí¬ë‹¤ìš´ ê¸°í˜¸ ì œê±°í•œ í…ìŠ¤íŠ¸</div>
          </div>
        </button>
        <button class="btn btn-g" style="justify-content:flex-start;padding:10px 13px;gap:10px" onclick="App.saveHTML()">
          <span style="font-size:17px">&#x1F310;</span>
          <div style="text-align:left">
            <div style="font-weight:600;font-size:12px">HTML (.html)</div>
            <div style="font-size:10.5px;color:var(--tx2)">A4 ë‹¤ì¤‘ í˜ì´ì§€ ìŠ¤íƒ€ì¼ í¬í•¨</div>
          </div>
        </button>
        <button class="btn btn-g" style="justify-content:flex-start;padding:10px 13px;gap:10px" onclick="App.printDoc()">
          <span style="font-size:17px">&#x1F5A8;</span>
          <div style="text-align:left">
            <div style="font-weight:600;font-size:12px">ì¸ì‡„ / PDFë¡œ ì €ì¥</div>
            <div style="font-size:10.5px;color:var(--tx2)">ë¸Œë¼ìš°ì € ì¸ì‡„ì°½ &rarr; PDF (ì „ì²´ í˜ì´ì§€)</div>
          </div>
        </button>
        <!-- GitHub ì»¤ë°‹ ë²„íŠ¼ -->
        <button class="btn" id="save-git-btn" onclick="App.saveAndGitCommit()"
          style="justify-content:flex-start;padding:10px 13px;gap:10px;background:rgba(124,106,247,.15);border:1px solid rgba(124,106,247,.4);color:#c0baff">
          <span style="font-size:17px">&#x1F419;</span>
          <div style="text-align:left">
            <div style="font-weight:600;font-size:12px">GitHub ì»¤ë°‹</div>
            <div style="font-size:10.5px;opacity:.75">ì§€ì •í´ë” ì €ì¥ í›„ ì´ íŒŒì¼ë§Œ GitHubì— ì»¤ë°‹</div>
          </div>
        </button>
        <!-- md-viewer Push ë²„íŠ¼ -->
        <button class="btn" onclick="App.hideModal('save-modal');PVShare.quickPushCurrent()"
          style="justify-content:flex-start;padding:10px 13px;gap:10px;background:rgba(88,200,248,.12);border:1px solid rgba(88,200,248,.35);color:#58c8f8">
          <span style="font-size:17px">ğŸ“¤</span>
          <div style="text-align:left">
            <div style="font-weight:600;font-size:12px">md-viewerì— Push (ê³µê°œ)</div>
            <div style="font-size:10.5px;opacity:.75">md-viewer ì €ì¥ì†Œì— push â†’ ê³µìœ  ë§í¬ ë°œê¸‰</div>
          </div>
        </button>
        <!-- ê°ì£¼ ì„¤ì • -->
        <div style="display:flex;align-items:center;gap:8px;padding:7px 10px;background:var(--bg3);border-radius:6px;border:1px solid var(--bd)">
          <span>&#x1F516;</span>
          <div style="flex:1;font-size:11px;color:var(--tx)">ì£¼ì„([^n]) í‘œì‹œ</div>
          <label style="display:flex;align-items:center;gap:4px;cursor:pointer;font-size:11px;color:var(--tx2)">
            <input type="checkbox" id="show-footnotes-chk" checked style="accent-color:var(--ac)"> í‘œì‹œ
          </label>
        </div>
      </div>
      <div class="mf"><button class="btn btn-g btn-sm" onclick="App.hideModal('save-modal')">ë‹«ê¸°</button></div>
    </div>
  </div>

  <!-- APA STATS MODAL -->
  <div class="ov" id="stats-modal">
    <div class="modal" style="max-width:560px">
      <h3>ğ‘“(x) APA í†µê³„ ê²°ê³¼ ì‚½ì… <span style="font-size:11px;color:var(--tx3);font-weight:400">Shift+Alt+9</span></h3>
      <!-- Analysis type selector -->
      <div style="display:flex;gap:6px;flex-wrap:wrap;margin-bottom:14px" id="stats-type-row">
        <button class="btn btn-tog btn-sm active" onclick="STATS.setType('ttest')" id="st-ttest">t-test</button>
        <button class="btn btn-tog btn-sm" onclick="STATS.setType('anova')" id="st-anova">ANOVA</button>
        <button class="btn btn-tog btn-sm" onclick="STATS.setType('regression')" id="st-regression">Regression</button>
        <button class="btn btn-tog btn-sm" onclick="STATS.setType('correlation')"
          id="st-correlation">Correlation</button>
        <button class="btn btn-tog btn-sm" onclick="STATS.setType('chisq')" id="st-chisq">Chi-square</button>
        <button class="btn btn-tog btn-sm" onclick="STATS.setType('sem')" id="st-sem">SEM</button>
        <button class="btn btn-tog btn-sm" onclick="STATS.setType('logistic')" id="st-logistic">Logistic</button>
        <button class="btn btn-tog btn-sm" onclick="STATS.setType('multilevel')" id="st-multilevel">Multilevel</button>
        <button class="btn btn-tog btn-sm" onclick="STATS.setType('custom')" id="st-custom"
          style="border-color:var(--ac2);color:var(--ac2)">âœ Custom</button>
      </div>
      <!-- Fields area -->
      <div id="stats-fields" style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:10px"></div>
      <!-- Custom area (hidden by default) -->
      <div id="stats-custom-area" style="display:none;margin-bottom:10px">
        <div class="fg"><label class="fl">ì»¤ìŠ¤í…€ ì´ë¦„</label><input class="fi" id="custom-name" type="text"
            placeholder="ì˜ˆ: Mixed ANOVA"></div>
        <div class="fg"><label class="fl">ì¶œë ¥ í¬ë§· <span style="color:var(--tx3);font-size:10px">{ë³€ìˆ˜ëª…} ì‚¬ìš©</span></label>
          <input class="fi" id="custom-fmt" type="text" placeholder="ì˜ˆ: (F({df1}, {df2}) = {F}, p = {p})">
        </div>
        <div class="fg" id="custom-vars-area"><label class="fl">ë³€ìˆ˜ ëª©ë¡ <span style="color:var(--tx3);font-size:10px">ì½¤ë§ˆë¡œ
              êµ¬ë¶„</span></label>
          <input class="fi" id="custom-vars" type="text" placeholder="df1, df2, F, p"
            oninput="STATS.updateCustomVars()">
        </div>
        <div id="custom-fields" style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:8px"></div>
        <div style="margin-top:8px;display:flex;gap:6px;align-items:center">
          <button class="btn btn-g btn-sm" onclick="STATS.saveCustom()">ğŸ’¾ ì €ì¥</button>
          <select id="custom-saved-sel" class="fi" style="width:auto;flex:1;padding:4px 8px;font-size:11px"
            onchange="STATS.loadCustom(this.value)">
            <option value="">â€” ì €ì¥ëœ ì»¤ìŠ¤í…€ â€”</option>
          </select>
          <button class="btn btn-g btn-sm" style="color:var(--er)" onclick="STATS.deleteCustom()">ì‚­ì œ</button>
        </div>
      </div>
      <!-- Preview -->
      <div
        style="background:var(--bg3);border:1px solid var(--bd);border-radius:var(--r);padding:8px 12px;margin-bottom:12px;font-family:var(--fm);font-size:12px;color:var(--tx);min-height:28px">
        <span style="font-size:10px;color:var(--tx3);margin-right:6px">ë¯¸ë¦¬ë³´ê¸°:</span><span id="stats-preview"
          style="color:var(--ac)"></span>
      </div>
      <div class="mf">
        <button class="btn btn-g btn-sm" onclick="App.hideModal('stats-modal')">ì·¨ì†Œ</button>
        <button class="btn btn-p btn-sm" onclick="STATS.insert()">ì‚½ì…</button>
      </div>
    </div>
  </div>

  <!-- CITATION MANAGER -->
  <div class="ov" id="cite-modal">
    <div class="modal xl" id="cite-modal-box">
      <div class="cite-modal-hdr" style="display:flex;align-items:center;justify-content:space-between;gap:8px;flex-wrap:wrap;margin-bottom:8px">
        <h3 style="margin:0;font-size:15px;font-weight:600;color:var(--txh)">ğŸ“š ì°¸ê³ ë¬¸í—Œ ê´€ë¦¬ &amp; ì¸ìš© ì‚½ì…</h3>
        <div style="display:flex;align-items:center;gap:6px;flex-shrink:0">
          <button class="btn btn-p btn-sm" id="cite-ins-btn" onclick="CM.insert()" style="display:none;font-size:11px">âœ” ì„ íƒ í•­ëª© ì¸ìš© ì‚½ì…</button>
          <button class="btn-ic" id="cite-modal-maximize-btn" onclick="CiteModal.toggleMaximize();event.stopPropagation()" title="ìµœëŒ€í™”" style="font-size:14px;padding:4px 8px">â›¶</button>
          <button class="btn btn-g btn-sm" onclick="App.hideModal('cite-modal')" style="font-size:11px">ë‹«ê¸°</button>
        </div>
      </div>
      <div class="tab-row" style="display:flex;gap:2px;padding:8px 0 0;border-bottom:1px solid var(--bd);flex-shrink:0">
        <button type="button" class="tr-tab active" data-tab="add" onclick="CM.tab('add')">â‘  ì°¸ê³ ë¬¸í—Œ ì¶”ê°€</button>
        <button type="button" class="tr-tab" data-tab="cite" onclick="CM.tab('cite')">â‘¡ ì¸ìš© ì‚½ì…</button>
        <button type="button" class="tr-tab" data-tab="convert" onclick="CM.tab('convert')">â‘¢ ìŠ¤íƒ€ì¼ ë³€í™˜</button>
        <button type="button" class="tr-tab" data-tab="lib" onclick="CM.tab('lib')">â‘£ ì €ì¥ëœ ëª©ë¡</button>
        <button type="button" class="tr-tab" data-tab="manual" onclick="CM.tab('manual')">â‘¤ ìˆ˜ë™ì°¸ê³ ë¬¸í—Œì‚½ì…</button>
        <button type="button" class="tr-tab" data-tab="search" onclick="CM.tab('search')" style="color:var(--ac2)">â‘¥ ë…¼ë¬¸ê²€ìƒ‰</button>
        <button type="button" class="tr-tab" data-tab="ai-search" onclick="CM.tab('ai-search')" style="color:var(--ac)">â‘¦ AI ê²€ìƒ‰ ëª¨ë“œ</button>
      </div>

      <!-- ADD -->
      <div class="tp active" id="cp-add">
        <div class="fg">
          <label class="fl">ì…ë ¥ êµ¬ë¶„ ë°©ì‹</label>
          <div style="display:flex;gap:8px;margin-bottom:10px">
            <button id="sep-blank-btn" class="btn btn-tog active btn-sm" style="flex:1" onclick="CM.setSep('blank')">
              ğŸ“‹ ë¹ˆ ì¤„ë¡œ êµ¬ë¶„<br><span style="font-size:10px;color:inherit;opacity:.8">í•­ëª© ì‚¬ì´ì— ë¹ˆ ì¤„ 1ê°œ</span>
            </button>
            <button id="sep-line-btn" class="btn btn-tog btn-sm" style="flex:1" onclick="CM.setSep('line')">
              â†µ ì—”í„°(ì¤„ë°”ê¿ˆ)ë¡œ êµ¬ë¶„<br><span style="font-size:10px;color:inherit;opacity:.8">ê° ì¤„ = 1ê°œ ì°¸ê³ ë¬¸í—Œ</span>
            </button>
          </div>
        </div>
        <div class="fg">
          <label class="fl">APA í˜•ì‹ ì°¸ê³ ë¬¸í—Œ ë¶™ì—¬ë„£ê¸°</label>
          <textarea id="cite-raw" class="fi" style="min-height:130px" placeholder="ì—¬ê¸°ì— ì°¸ê³ ë¬¸í—Œì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”..."></textarea>
          <div style="display:flex;gap:8px;margin-top:7px;align-items:center;flex-wrap:wrap">
            <button class="btn btn-p btn-sm" onclick="CM.parse()">ì•±ì—ì„œ ì‚¬ìš©í•˜ê¸° â†’</button>
            <button class="btn btn-g btn-sm" onclick="document.getElementById('cite-raw').value=''">ì§€ìš°ê¸°</button>
            <label class="btn btn-g btn-sm" style="cursor:pointer">ğŸ“ TXT ë¶ˆëŸ¬ì˜¤ê¸°<input type="file" accept=".txt,.bib,.ris"
                style="display:none" onchange="CM.loadFile(event)"></label>
            <span id="cite-msg" style="font-size:11px;color:var(--ok)"></span>
          </div>
          <div style="margin-top:7px;font-size:11px;color:var(--tx3)" id="sep-desc">í˜„ì¬: ë¹ˆ ì¤„ë¡œ êµ¬ë¶„ â€” í•­ëª© ì‚¬ì´ì— ë¹ˆ ì¤„ í•˜ë‚˜ë¥¼ ë„£ì–´
            êµ¬ë¶„í•˜ì„¸ìš”.</div>
        </div>
      </div>

      <!-- CITE -->
      <div class="tp" id="cp-cite">
        <div style="display:flex;gap:7px;margin-bottom:9px;align-items:center">
          <input type="text" id="cite-search" class="fi" style="flex:1" placeholder="ì €ì, ì—°ë„, í‚¤ì›Œë“œë¡œ ê²€ìƒ‰..."
            oninput="CM.filter()">
          <button class="btn btn-g btn-sm" onclick="CM.selAll()">ì „ì²´ ì„ íƒ</button>
          <button class="btn btn-g btn-sm" onclick="CM.clrSel()">ì„ íƒ í•´ì œ</button>
        </div>
        <div id="cite-list-area">
          <div class="cite-empty">ì¶”ê°€ íƒ­ì—ì„œ ë¨¼ì € ì°¸ê³ ë¬¸í—Œì„ ì…ë ¥í•˜ì„¸ìš”.</div>
        </div>
        <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-top:8px">
          <label style="font-size:12px;color:var(--tx2)">ì‚½ì… í˜•ì‹:</label>
          <select id="cite-style" class="fi" style="width:auto;padding:4px 8px">
            <option value="inline">ì¸ë¼ì¸: (ì €ì, ì—°ë„)</option>
            <option value="narrative">ì„œìˆ í˜•: ì €ì(ì—°ë„)</option>
            <option value="multi">ë³µìˆ˜: (A, ì—°ë„; B, ì—°ë„)</option>
            <option value="footnote">ê°ì£¼: [^n]</option>
          </select>
          <span id="cite-sc" style="font-size:11px;color:var(--tx3);margin-left:auto">0ê°œ ì„ íƒë¨</span>
        </div>
      </div>

      <!-- CONVERT -->
      <div class="tp" id="cp-convert">
        <div style="display:flex;gap:8px;margin-bottom:12px;align-items:center;flex-wrap:wrap">
          <label style="font-size:12px;color:var(--tx2)">ì…ë ¥ ìŠ¤íƒ€ì¼:</label>
          <select id="from-style" class="fi" style="width:auto;padding:4px 8px">
            <option value="apa" selected>APA 7 (ê¸°ë³¸)</option>
            <option value="mla">MLA 9</option>
            <option value="chicago">Chicago (Author-Date)</option>
            <option value="vancouver">Vancouver</option>
          </select>
          <span style="font-size:12px;color:var(--tx2)">â†’ ë³€í™˜ ëŒ€ìƒ:</span>
          <select id="to-style" class="fi" style="width:auto;padding:4px 8px">
            <option value="mla" selected>MLA 9</option>
            <option value="apa">APA 7</option>
            <option value="chicago">Chicago (Author-Date)</option>
            <option value="vancouver">Vancouver</option>
          </select>
          <button class="btn btn-p btn-sm" onclick="CM.convertStyle()">ë³€í™˜</button>
        </div>
        <div class="fg">
          <label class="fl">ë³€í™˜í•  ì°¸ê³ ë¬¸í—Œ (ì €ì¥ ëª©ë¡ ë¯¸ì„ íƒ ì‹œ ì§ì ‘ ì…ë ¥)</label>
          <textarea id="conv-input" class="fi" style="min-height:80px"
            placeholder="Kim, J. H., &amp; Lee, S. (2023). SEM in education. Journal of Educational Research, 45(2), 123â€“145."></textarea>
        </div>
        <div class="fg">
          <label class="fl">ë³€í™˜ ê²°ê³¼ <span id="conv-label" style="color:var(--ac);font-weight:600"></span></label>
          <textarea id="conv-output" class="fi" style="min-height:80px" readonly
            placeholder="ë³€í™˜ ê²°ê³¼ê°€ ì—¬ê¸° í‘œì‹œë©ë‹ˆë‹¤..."></textarea>
        </div>
        <div style="display:flex;gap:8px">
          <button class="btn btn-g btn-sm" onclick="CM.copyConverted()">ğŸ“‹ ë³µì‚¬</button>
          <button class="btn btn-p btn-sm" onclick="CM.insertConverted()">ì—ë””í„°ì— ì‚½ì…</button>
        </div>
      </div>

      <!-- LIB -->
      <div class="tp" id="cp-lib">
        <div style="display:flex;gap:7px;margin-bottom:9px;align-items:center;flex-wrap:wrap">
          <span style="font-size:12px;color:var(--tx2)">ì €ì¥ <span id="lib-cnt"
              style="color:var(--ac);font-weight:600">0</span>ê±´</span>
          <span class="spacer"></span>
          <button class="btn btn-g btn-sm" onclick="CM.insertRefSection()">ğŸ“„ ì°¸ê³ ë¬¸í—Œ ì„¹ì…˜ ì‚½ì…</button>
          <button class="btn btn-g btn-sm" onclick="CM.downloadLibTxt()">â¬‡ TXT ë‹¤ìš´ë¡œë“œ</button>
          <button class="btn btn-g btn-sm" onclick="CM.downloadLibMd()">â¬‡ MD ë‹¤ìš´ë¡œë“œ</button>
          <button class="btn btn-g btn-sm" onclick="CM.loadLibFromMd()">ğŸ“‚ MD ë¶ˆëŸ¬ì˜¤ê¸°</button>
          <button class="btn btn-g btn-sm" style="color:var(--er)" onclick="CM.clearAll()">ì „ì²´ ì‚­ì œ</button>
          <button class="btn btn-g btn-sm" onclick="CM.openLibInNewWindow()" title="ì €ì¥ëœ ëª©ë¡ì„ ë§ˆí¬ë‹¤ìš´ ë¯¸ë¦¬ë³´ê¸° ìƒˆ ì°½ìœ¼ë¡œ">ğŸªŸ ìƒˆì°½ëª©ë¡</button>
        </div>
        <div id="lib-list">
          <div class="cite-empty">ì €ì¥ëœ ì°¸ê³ ë¬¸í—Œì´ ì—†ìŠµë‹ˆë‹¤.</div>
        </div>
      </div>

      <!-- MANUAL REF INSERT (ì¸ìš© ì‚½ì… ì‹œ ì„ íƒëœ í•­ëª©ë§Œ ì¶”ê°€) -->
      <div class="tp" id="cp-manual">
        <div style="display:flex;gap:7px;margin-bottom:9px;align-items:center;flex-wrap:wrap">
          <span style="font-size:12px;color:var(--tx2)">ìˆ˜ë™ì°¸ê³ ë¬¸í—Œ <span id="manual-cnt" style="color:var(--ac);font-weight:600">0</span>ê±´</span>
          <span class="spacer"></span>
          <button class="btn btn-g btn-sm" onclick="CM.insertRefSectionFromManual()">ğŸ“„ ì°¸ê³ ë¬¸í—Œ ì„¹ì…˜ ì‚½ì…</button>
          <button class="btn btn-g btn-sm" onclick="CM.downloadManual()">â¬‡ ëª©ë¡ ë‹¤ìš´ë¡œë“œ</button>
          <button class="btn btn-g btn-sm" style="color:var(--er)" onclick="CM.clearManual()">ì „ì²´ ì‚­ì œ</button>
        </div>
        <div id="manual-ref-log" class="lib-list">
          <div class="cite-empty">ì¸ìš© ì‚½ì… ì‹œ ì„ íƒëœ í•­ëª©ì´ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤.</div>
        </div>
      </div>

      <!-- SEARCH TAB -->
      <div class="tp" id="cp-search">
        <!-- ê²€ìƒ‰ì°½ -->
        <div style="display:flex;gap:6px;margin-bottom:8px;align-items:flex-end;flex-wrap:wrap">
          <div style="flex:1;min-width:200px">
            <label class="fl">ì œëª© / ì €ì / í‚¤ì›Œë“œ</label>
            <input class="fi" id="ref-q" type="text" placeholder="ì˜ˆ) self-efficacy academic achievement Korea"
              onkeydown="if(event.key==='Enter')RefSearch.search()">
          </div>
          <div style="flex:0 0 auto">
            <label class="fl">ì¶œíŒì—°ë„ ì´í›„</label>
            <select class="fi" id="ref-year" style="padding:7px 8px;width:auto">
              <option value="">ì „ì²´</option>
              <option value="2020">2020~</option>
              <option value="2018">2018~</option>
              <option value="2015">2015~</option>
              <option value="2010">2010~</option>
            </select>
          </div>
          <div style="flex:0 0 auto">
            <label class="fl">ê²€ìƒ‰ DB</label>
            <select class="fi" id="ref-db" style="padding:7px 8px;width:auto">
              <option value="crossref">CrossRef (ì „ì²´)</option>
              <option value="openalex">OpenAlex (ì˜¤í”ˆì•¡ì„¸ìŠ¤)</option>
            </select>
          </div>
          <button class="btn btn-p" onclick="RefSearch.search()" style="height:36px;padding:0 16px;flex-shrink:0">ğŸ”
            ê²€ìƒ‰</button>
          <button class="btn btn-g btn-sm" onclick="RefSearch.openScholar()" style="height:36px;flex-shrink:0"
            title="Google Scholar ìƒˆ ì°½">Scholar â†—</button>
        </div>

        <!-- ìƒíƒœ/ê²°ê³¼ìˆ˜ -->
        <div id="ref-status" style="font-size:11px;color:var(--tx3);min-height:18px;margin-bottom:6px"></div>

        <!-- AI ëª¨ë“œ: ê²€ìƒ‰ ëª…ë ¹ í”„ë¡¬í”„íŠ¸ (ref-db=ai ì¼ ë•Œë§Œ í‘œì‹œ) -->
        <div id="ref-ai-prompt-wrap" style="display:none;margin-bottom:8px">
          <label class="fl" style="font-size:10px;color:var(--tx3)">ê²€ìƒ‰ ëª…ë ¹ (Google Scholar)</label>
          <textarea class="fi" id="ref-ai-prompt" rows="2" placeholder="ì˜ˆ) self-efficacy meta-analysis 2020 ì´í›„ í•œêµ­ í•™ìˆ ì§€"
            style="width:100%;resize:vertical;min-height:52px;font-size:12px;margin-top:4px"
            onkeydown="if(event.key==='Enter'&&!event.shiftKey){event.preventDefault();RefSearch.search()}"></textarea>
        </div>

        <!-- ê²°ê³¼ ëª©ë¡ -->
        <div id="ref-results"
          style="border:1px solid var(--bd);border-radius:var(--r);background:var(--bg3);min-height:80px;max-height:340px;overflow-y:auto">
          <div class="cite-empty" id="ref-placeholder">ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ê³  ğŸ” ê²€ìƒ‰ì„ ëˆ„ë¥´ì„¸ìš”.<br><span
              style="font-size:10px;color:var(--tx3)">CrossRef: 1ì–µ ê±´+ | OpenAlex: ì˜¤í”ˆì•¡ì„¸ìŠ¤ ë…¼ë¬¸ íŠ¹í™”</span></div>
        </div>

        <!-- í•˜ë‹¨ ì•ˆë‚´ -->
        <div style="margin-top:8px;font-size:10px;color:var(--tx3);line-height:1.7">
          âœ… <b>+ ì¶”ê°€</b> í´ë¦­ â†’ APA í˜•ì‹ìœ¼ë¡œ â‘£ ì €ì¥ëœ ëª©ë¡ì— ìë™ ì €ì¥ &nbsp;|&nbsp;
          ğŸ“‹ <b>ë³µì‚¬</b> í´ë¦­ â†’ í´ë¦½ë³´ë“œë¡œ ë³µì‚¬ &nbsp;|&nbsp;
          ê²°ê³¼ê°€ ì—†ìœ¼ë©´ <b>Scholar â†—</b>ë¡œ ì§ì ‘ ê²€ìƒ‰
        </div>
      </div>
      <!-- AI ê²€ìƒ‰ ëª¨ë“œ íƒ­ (cite-modal ì „ìš©) â€” ì´ë¯¸ì§€ì™€ ë™ì¼ ë ˆì´ì•„ì›ƒ -->
      <div class="tp" id="cp-ai-search">
        <div style="display:flex;flex-direction:column;gap:10px;margin-bottom:10px">
          <div style="flex:0 0 auto">
            <label style="font-size:10px;color:var(--tx3)">ëª¨ë¸</label>
            <select id="cite-ai-model" class="fi" style="width:100%;max-width:200px;padding:5px 8px;font-size:12px;margin-top:4px">
              <option value="gemini-3-flash-preview" selected>Gemini 3 Flash</option>
              <option value="gemini-2.0-flash">Gemini 2 Flash</option>
              <option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
              <option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
              <option value="gemini-2.0-flash-exp">Gemini 2.0 Flash Exp</option>
            </select>
          </div>
          <div>
            <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap;margin-bottom:4px">
              <label style="font-size:10px;color:var(--tx3)">ì‚¬ì „ í”„ë¡¬í”„íŠ¸ (ìˆ˜ì • ê°€ëŠ¥)</label>
              <select id="cite-ai-preset" class="fi" style="width:auto;padding:4px 8px;font-size:11px" onchange="DeepResearch.applyCiteAiSearchPreset()" title="ì–‘ì‹ ë¶ˆëŸ¬ì˜¤ê¸°">
                <option value="basic">ê¸°ë³¸í˜•</option>
                <option value="research">ì—°êµ¬ìš©</option>
                <option value="meta">ë©”íƒ€ë¶„ì„Â·ë¬¸í—Œê³ ì°°</option>
                <option value="recommend">ì¶”ì²œí˜•</option>
                <option value="data-survey">ìë£Œì¡°ì‚¬ìš©</option>
                <option value="systematic-review">ì²´ê³„ì  ë¬¸í—Œì¡°ì‚¬</option>
                <option value="academic-paper">í•™ìˆ ë…¼ë¬¸í˜• ì¡°ì‚¬</option>
                <option value="citation">ì¸ìš©ì •ë³´ ìˆ˜ì§‘ìš©</option>
              </select>
              <button type="button" class="btn btn-g btn-sm" style="font-size:11px" onclick="DeepResearch.openCitePresetTextWindow()" title="ìƒˆ ì°½ì—ì„œ í”„ë¡¬í”„íŠ¸ ë³´ê¸°Â·í¸ì§‘">ìƒˆì°½ë³´ê¸°</button>
            </div>
            <textarea id="cite-ai-preset-text" class="fi" rows="3" placeholder="ì–‘ì‹ì„ ì„ íƒí•˜ë©´ ì—¬ê¸°ì— ì±„ì›Œì§‘ë‹ˆë‹¤. í•„ìš” ì‹œ ìˆ˜ì •í•˜ì„¸ìš”."
              style="width:100%;height:78px;min-height:78px;max-height:40vh;font-size:12px;resize:both;line-height:1.5;display:block"></textarea>
          </div>
          <div>
            <label style="font-size:10px;color:var(--tx3)">ì§ˆë¬¸</label>
            <textarea id="cite-ai-prompt" class="fi" rows="3" placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”â€¦"
              style="width:100%;margin-top:4px;font-size:13px;resize:vertical;min-height:72px"></textarea>
          </div>
          <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">
            <button class="btn btn-p btn-sm" onclick="DeepResearch.runCiteAiSearchFromModal()" style="font-size:12px">ğŸ” AI ê²€ìƒ‰ ì‹¤í–‰</button>
            <button class="btn btn-g btn-sm" onclick="DeepResearch.show();DeepResearch.switchTab('ai-search');App.hideModal('cite-modal')" style="font-size:11px">ì°¸ê³ ë¬¸í—Œ ëª¨ë‹¬ì—ì„œ ì—´ê¸°</button>
            <button type="button" class="btn btn-g btn-sm" style="font-size:11px" onclick="CiteAiSearchHistory.saveCurrentFromCiteModal()" title="í˜„ì¬ ë‹µë³€ì„ íˆìŠ¤í† ë¦¬ì— ì €ì¥">íˆìŠ¤í† ë¦¬ ì €ì¥</button>
          </div>
        </div>
        <div style="flex:1;display:flex;flex-direction:column;min-height:200px;margin-bottom:10px">
          <div style="padding:6px 0;font-size:10px;color:var(--tx3);font-weight:600;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:4px">
            <span>ë‹µë³€</span>
            <div style="display:flex;gap:4px;align-items:center">
              <button type="button" class="btn btn-sm" onclick="DeepResearch.openResultForTranslateFromCiteModal()" title="ê²°ê³¼ ë²ˆì—­" style="font-size:10px;padding:2px 8px;color:#6ac8f7;border:1px solid rgba(106,200,247,.5);background:rgba(106,200,247,.2);font-weight:600">ê²°ê³¼ë²ˆì—­</button>
              <button type="button" class="btn btn-sm" onclick="DeepResearch.openResultInNewWindowFromCiteModal()" title="ìƒˆ ì°½ì—ì„œ ê²°ê³¼ ë³´ê¸°" style="font-size:10px;padding:2px 8px;color:#6ac8f7;border:1px solid rgba(106,200,247,.5);background:rgba(106,200,247,.2);font-weight:600">ê²°ê³¼ìƒˆì°½</button>
              <button type="button" class="btn btn-sm" onclick="DeepResearch.copyResultFromCiteModal()" title="ê²°ê³¼ ë³µì‚¬" style="font-size:10px;padding:2px 8px;color:#6ac8f7;border:1px solid rgba(106,200,247,.5);background:rgba(106,200,247,.2);font-weight:600">ê²°ê³¼ë³µì‚¬</button>
            </div>
          </div>
          <textarea id="cite-ai-out" class="fi"
            style="flex:1;resize:vertical;min-height:160px;border:1px solid var(--bd);border-radius:var(--r);background:var(--bg3);font-size:13px;line-height:1.7;padding:10px;outline:none;color:var(--tx);font-family:inherit;white-space:pre-wrap"
            placeholder="ë‹µë³€ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤."></textarea>
        </div>
        <div style="margin-top:10px;padding-top:10px;border-top:1px solid var(--bd)">
          <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:6px">
            <span style="font-size:11px;color:var(--tx3);font-weight:600">AI ê²€ìƒ‰ ê²°ê³¼ íˆìŠ¤í† ë¦¬</span>
            <button type="button" class="btn btn-g btn-sm" style="font-size:10px" onclick="CiteAiSearchHistory.clearAll()" title="ì „ì²´ ì‚­ì œ">ì „ì²´ ì‚­ì œ</button>
          </div>
          <div id="cite-ai-history-list" style="max-height:140px;overflow-y:auto;padding:4px 0"
            data-empty="Deep Research AI ê²€ìƒ‰ì—ì„œ &#39;íˆìŠ¤í† ë¦¬ ì €ì¥&#39;ì„ ëˆ„ë¥´ë©´ ì—¬ê¸°ì— ì €ì¥ë©ë‹ˆë‹¤."></div>
        </div>
        <div id="cite-ai-search-footer" style="display:none;margin-top:12px;padding-top:10px;border-top:1px solid var(--bd);align-items:center;gap:8px;flex-wrap:wrap" class="mf">
          <button class="btn btn-p btn-sm" onclick="DeepResearch.insertFromCiteModal()">ë¬¸ì„œì— ì‚½ì…</button>
          <button class="btn btn-sm" onclick="DeepResearch.insertToNewFileFromCiteModal()" title="ìƒˆ íŒŒì¼ë¡œ ì‚½ì…" style="color:#6ac8f7;border:1px solid rgba(106,200,247,.5);background:rgba(106,200,247,.2);font-weight:600;padding:2px 10px">ï¼‹</button>
          <input type="text" id="cite-ai-insert-hint" class="fi" placeholder="ìƒˆíŒŒì¼ë¡œ ì‚½ì… (íŒŒì¼ëª… ì…ë ¥)" style="font-size:11px;color:var(--tx2);width:160px;min-width:0;padding:4px 8px" title="ë¹„ìš°ë©´ ìë™ íŒŒì¼ëª…">
        </div>
      </div>
    </div>
  </div>

  <!-- CODE MODAL (toolbar button) -->
  <div class="ov" id="code-modal">
    <div class="modal" style="max-width:380px">
      <h3>ì½”ë“œ ë¸”ë¡ ì–¸ì–´ ì„ íƒ</h3>
      <div class="mb">
        <select class="fi" id="code-lang">
          <option value="">ì—†ìŒ</option>
          <option value="python">Python</option>
          <option value="javascript">JavaScript</option>
          <option value="typescript">TypeScript</option>
          <option value="java">Java</option>
          <option value="c">C</option>
          <option value="cpp">C++</option>
          <option value="r">R</option>
          <option value="matlab">MATLAB</option>
          <option value="sql">SQL</option>
          <option value="bash">Bash/Shell</option>
          <option value="latex">LaTeX</option>
          <option value="html">HTML</option>
          <option value="css">CSS</option>
          <option value="json">JSON</option>
          <option value="yaml">YAML</option>
          <option value="markdown">Markdown</option>
        </select>
      </div>
      <div class="mf">
        <button class="btn btn-g btn-sm" onclick="App.hideModal('code-modal')">ì·¨ì†Œ</button>
        <button class="btn btn-p btn-sm" onclick="ED.codeBlockModal()">ì‚½ì…</button>
      </div>
    </div>
  </div>

  <!-- LINK MODAL -->
  <div class="ov" id="link-modal">
    <div class="modal" style="max-width:420px">
      <h3>ğŸ”— ë§í¬ ì‚½ì… <span style="font-size:11px;color:var(--ac2)">(ìƒˆ íƒ­)</span></h3>
      <div class="mb">
        <div class="fg"><label class="fl">í‘œì‹œ í…ìŠ¤íŠ¸</label><input class="fi" id="link-text" type="text"
            placeholder="ë§í¬ í…ìŠ¤íŠ¸"></div>
        <div class="fg"><label class="fl">URL</label><input class="fi" id="link-url" type="text"
            placeholder="https://..."></div>
      </div>
      <div class="mf">
        <button class="btn btn-g btn-sm" onclick="App.hideModal('link-modal')">ì·¨ì†Œ</button>
        <button class="btn btn-p btn-sm" onclick="ED.link()">ì‚½ì…</button>
      </div>
    </div>
  </div>

  <!-- IMAGE MODAL -->
  <div class="ov" id="image-modal" onclick="if(event.target===this)App.hideModal('image-modal')">
    <div class="modal img-modal-layout" id="image-modal-box" style="max-width:720px;display:flex;flex-direction:column;max-height:90vh" onclick="event.stopPropagation()">
      <div class="mh img-modal-drag" style="cursor:move;user-select:none;display:flex;align-items:center;justify-content:space-between">
        <span>ğŸ–¼ ì´ë¯¸ì§€</span>
        <div style="display:flex;align-items:center;gap:6px">
          <button class="btn btn-g btn-sm" onclick="App.hideModal('image-modal');event.stopPropagation()" style="font-size:11px">ë‹«ê¸°</button>
          <button class="btn btn-g btn-sm" id="img-modal-maximize" onclick="AiImage.toggleMaximize();event.stopPropagation()" title="ì „ì²´í™”ë©´" style="font-size:11px">ì „ì²´í™”ë©´</button>
        </div>
      </div>
      <div id="img-modal-body" style="flex:1;display:flex;min-height:0;overflow:hidden">
        <div id="img-left-sidebar" style="width:200px;flex-shrink:0;border-right:1px solid var(--bd);display:flex;flex-direction:column;background:var(--bg3)">
          <div style="padding:10px 12px;display:flex;flex-direction:column;gap:6px">
            <button type="button" class="btn btn-g btn-sm img-side-tab active" data-tab="insert" onclick="AiImage.switchTab('insert')" style="justify-content:center">ì´ë¯¸ì§€ ì‚½ì…</button>
            <button type="button" class="btn btn-g btn-sm img-side-tab" data-tab="ai" onclick="AiImage.switchTab('ai')" style="justify-content:center">AI ì´ë¯¸ì§€</button>
          </div>
          <div id="img-insert-panel" style="flex:1;overflow-y:auto;padding:8px">
            <div id="img-dropzone" style="border:2px dashed var(--bd);border-radius:8px;padding:16px;text-align:center;cursor:pointer;background:var(--bg4)" onclick="document.getElementById('img-file-input').click()" ondragover="IMG.dragOver(event)" ondragleave="IMG.dragLeave(event)" ondrop="IMG.drop(event)">
              <div id="img-drop-text" style="font-size:12px;color:var(--tx2)">ğŸ–¼ í´ë¦­ ë˜ëŠ” ë“œë˜ê·¸</div>
              <input type="file" id="img-file-input" accept="image/*" style="display:none" onchange="IMG.fileSelected(event)">
            </div>
            <div style="margin-top:8px;font-size:11px;color:var(--tx3)">ë˜ëŠ” URL</div>
            <input class="fi" id="img-url" type="text" placeholder="https://..." style="margin-top:4px;padding:6px 8px;font-size:12px">
            <div id="img-preview-wrap" style="display:none;margin-top:8px;text-align:center">
              <img id="img-preview" style="max-width:100%;max-height:120px;border-radius:4px;border:1px solid var(--bd)">
            </div>
            <div style="margin-top:8px;display:flex;gap:6px;flex-wrap:wrap">
              <button type="button" class="btn btn-g btn-sm" style="font-size:11px" onclick="ImgCrop.openForInsert()" id="img-insert-crop-btn" disabled>âœ‚ í¬ë¡­</button>
            </div>
            <div class="fg" style="margin-top:10px">
              <label class="fl">Alt í…ìŠ¤íŠ¸</label>
              <input class="fi" id="img-alt" type="text" placeholder="ì„¤ëª…" style="padding:6px 8px;font-size:12px">
            </div>
            <div style="margin-top:10px;display:flex;gap:6px">
              <button class="btn btn-p btn-sm" onclick="ED.image()" style="font-size:11px">ë¬¸ì„œì— ì‚½ì…</button>
              <button class="btn btn-g btn-sm" style="font-size:11px" onclick="ImgInsert.insertToNewFile()">+ ìƒˆíŒŒì¼</button>
            </div>
          </div>
          <div id="aiimg-history-panel" style="display:none;flex:1;flex-direction:column;overflow:hidden;min-height:0">
            <div class="aiimg-history-header" style="padding:8px 10px;font-size:11px;color:var(--tx3);font-weight:600;border-bottom:1px solid var(--bd);flex-shrink:0;display:flex;align-items:center;justify-content:space-between;gap:8px;min-height:36px">
              <span>íˆìŠ¤í† ë¦¬</span>
              <button type="button" class="btn btn-g btn-sm" style="font-size:10px;flex-shrink:0" onclick="AiImage.clearAllHistory()" title="íˆìŠ¤í† ë¦¬ ì „ì²´ ì‚­ì œ">íˆìŠ¤í† ë¦¬ ì§€ìš°ê¸°</button>
            </div>
            <div id="aiimg-history-list" style="flex:1;min-height:0;overflow-y:auto;overflow-x:hidden;padding:6px" data-empty="ìƒì„±ëœ ì´ë¯¸ì§€ê°€ ì—¬ê¸°ì— ì €ì¥ë©ë‹ˆë‹¤."></div>
          </div>
        </div>
        <div id="img-center" style="flex:1;min-width:0;display:flex;flex-direction:column;overflow:hidden;border-right:1px solid var(--bd)">
          <div id="img-center-insert" style="flex:1;display:flex;align-items:center;justify-content:center;color:var(--tx3);font-size:13px;padding:20px">ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ê±°ë‚˜ AI ì´ë¯¸ì§€ íƒ­ì—ì„œ ìƒì„±í•˜ì„¸ìš”.</div>
          <div id="img-center-ai" style="display:none;flex:1;flex-direction:column;overflow:hidden">
            <div style="padding:8px 12px;display:flex;gap:8px;flex-wrap:wrap;border-bottom:1px solid var(--bd);flex-shrink:0">
              <button type="button" class="btn btn-p btn-sm" onclick="AiImage.setResultAsSeed()">ê²°ê³¼ë¥¼ ì‹œë“œë¡œ ì„¤ì •</button>
              <button type="button" class="btn btn-g btn-sm" onclick="AiImage.downloadAll()">ì¼ê´„ ë‹¤ìš´ë¡œë“œ</button>
              <button type="button" class="btn btn-g btn-sm" onclick="AiImage.downloadZip()">ZIP ë‹¤ìš´ë¡œë“œ</button>
              <button type="button" class="btn btn-g btn-sm" onclick="AiImage.downloadProject()">í”„ë¡œì íŠ¸ ë‹¤ìš´ë¡œë“œ (.mdp)</button>
            </div>
            <div style="padding:8px 12px;display:flex;gap:8px;flex-wrap:wrap;border-bottom:1px solid var(--bd);flex-shrink:0;align-items:center">
              <button type="button" class="btn btn-p btn-sm" onclick="AiImage.insertToEditor()">ì´ë¯¸ì§€ ì‚½ì…</button>
              <button type="button" class="btn btn-g btn-sm" onclick="AiImage.insertToNewFile()">+ ìƒˆíŒŒì¼ì— ì‚½ì…</button>
              <button type="button" class="btn btn-g btn-sm" id="aiimg-center-crop-btn" onclick="AiImage.cropCurrentResult()" style="font-size:11px" disabled>âœ‚ í¬ë¡­</button>
              <button type="button" class="btn btn-g btn-sm" id="aiimg-center-big-btn" onclick="AiImage.openCurrentResultInNewWindow()" style="font-size:11px" disabled>í¬ê²Œ ë³´ê¸°</button>
            </div>
            <div id="aiimg-loading" style="display:none;flex-direction:column;align-items:stretch;gap:8px;padding:12px 16px;border-bottom:1px solid var(--bd);flex-shrink:0">
              <div style="display:flex;align-items:center;gap:8px">
                <div style="flex:1;height:10px;background:var(--bg4);border-radius:5px;overflow:hidden">
                  <div id="aiimg-progress-bar" style="height:100%;width:0%;background:var(--ac);border-radius:5px;transition:width 0.2s"></div>
                </div>
                <span id="aiimg-progress-pct" style="font-size:13px;font-weight:600;min-width:36px">0%</span>
              </div>
              <span style="font-size:12px;color:var(--tx3)">ìƒì„± ì¤‘â€¦</span>
            </div>
            <div id="aiimg-result-wrap" style="flex:1;overflow:auto;padding:12px;display:none">
              <div id="aiimg-result-images" style="display:flex;flex-wrap:wrap;gap:12px;justify-content:center;align-content:flex-start"></div>
            </div>
            <div id="aiimg-empty-result" style="flex:1;display:flex;align-items:center;justify-content:center;color:var(--tx3);font-size:13px;padding:20px">ì˜¤ë¥¸ìª½ì—ì„œ í”„ë¡¬í”„íŠ¸ ì…ë ¥ í›„ ì´ë¯¸ì§€ ìƒì„±</div>
          </div>
        </div>
        <div id="img-right-sidebar" style="display:none;width:280px;flex-shrink:0;flex-direction:column;overflow-y:auto;padding:10px;gap:12px">
          <div style="display:flex;justify-content:flex-end">
            <button type="button" class="btn btn-g btn-sm" style="font-size:11px" onclick="AiImage.resetModal()" title="ì‹œë“œÂ·ê²°ê³¼Â·í”„ë¡¬í”„íŠ¸Â·íˆìŠ¤í† ë¦¬ ì´ˆê¸°í™”">ì „ì²´ ì´ˆê¸°í™”</button>
          </div>
          <div>
            <label style="font-size:11px;color:var(--tx3)">ì‹œë“œ ì´ë¯¸ì§€ (ì„ íƒ)</label>
            <div style="display:flex;gap:6px;margin-top:4px">
              <button type="button" class="btn btn-g btn-sm" style="font-size:11px;flex:1" onclick="document.getElementById('aiimg-seed-input').click()">ì¼ë°˜ ì—…ë¡œë“œ</button>
              <button type="button" class="btn btn-g btn-sm" style="font-size:11px;flex:1" onclick="AiImage.openCropUpload()">í¬ë¡­í•˜ì—¬ ì—…ë¡œë“œ</button>
            </div>
            <input type="file" id="aiimg-seed-input" accept="image/*" style="display:none" onchange="AiImage.onSeedFile(event)">
            <div id="aiimg-seed-wrap" style="margin-top:8px;width:100%;aspect-ratio:1;max-height:140px;border:2px dashed var(--bd);border-radius:8px;background:var(--bg3);display:flex;align-items:center;justify-content:center;overflow:hidden;cursor:pointer;position:relative" onclick="document.getElementById('aiimg-seed-input').click()">
              <img id="aiimg-seed-preview" alt="" style="max-width:100%;max-height:100%;object-fit:contain;display:none">
              <span id="aiimg-seed-placeholder" style="font-size:11px;color:var(--tx3)">ì—…ë¡œë“œ</span>
              <button type="button" id="aiimg-seed-big-btn" class="btn btn-g btn-sm" style="display:none;position:absolute;bottom:4px;right:4px;font-size:10px;padding:2px 6px;z-index:2" onclick="event.stopPropagation(); AiImage.openSeedInNewWindow()" title="ìƒˆ ì°½ì—ì„œ í¬ê²Œ ë³´ê¸°">í¬ê²Œ ë³´ê¸°</button>
            </div>
            <div style="margin-top:6px;display:flex;gap:6px;flex-wrap:wrap;align-items:center">
              <button type="button" class="btn btn-g btn-sm" style="font-size:11px" id="aiimg-crop-btn" onclick="AiImage.openCropEdit()" disabled>âœ‚ í¬ë¡­ í¸ì§‘</button>
              <button type="button" class="btn btn-g btn-sm" style="font-size:11px" onclick="AiImage.clearSeed()">ì‹œë“œ ì§€ìš°ê¸°</button>
              <button type="button" class="btn btn-g btn-sm aiimg-fix-btn" style="font-size:11px" onclick="AiImage.applyPreset('person')" title="ì¸ë¬¼ ê³ ì •">ì¸ë¬¼ ê³ ì •</button>
              <button type="button" class="btn btn-g btn-sm aiimg-fix-btn" style="font-size:11px" onclick="AiImage.applyPreset('outfit')" title="ë³µì¥ ê³ ì •">ë³µì¥ ê³ ì •</button>
            </div>
            <div style="margin-top:8px;padding:6px 8px;background:var(--bg3);border-radius:6px;border:1px solid var(--bd)">
              <div style="font-size:11px;color:var(--tx3);margin-bottom:4px;display:flex;align-items:center;justify-content:space-between;gap:6px">
                <span>ì´ë¯¸ì§€ë¶„ì„ê²°ê³¼</span>
                <span style="display:flex;gap:4px">
                  <button type="button" class="btn btn-g btn-sm" style="font-size:10px" onclick="AiImage.showAnalysisHistory()" title="ë¶„ì„ íˆìŠ¤í† ë¦¬">íˆìŠ¤í† ë¦¬</button>
                  <button type="button" class="btn btn-g btn-sm" style="font-size:10px" id="aiimg-copy-analysis-btn" onclick="AiImage.copyAnalysisResult()" title="í˜„ì¬ ë¶„ì„ ê²°ê³¼ ë³µì‚¬">ë³µì‚¬</button>
                  <button type="button" class="btn btn-g btn-sm" style="font-size:10px" id="aiimg-analyze-btn" onclick="AiImage.analyzeSeedImage()" disabled>ë¶„ì„ ì‹¤í–‰</button>
                </span>
              </div>
              <div id="aiimg-analysis-text" style="font-size:10px;color:var(--tx2);max-height:60px;overflow-y:auto;white-space:pre-wrap;word-break:break-word"></div>
              <div style="margin-top:6px;display:flex;gap:12px;flex-wrap:wrap">
                <label style="display:flex;align-items:center;gap:4px;font-size:11px;cursor:pointer">
                  <input type="checkbox" id="aiimg-fix-person-cb" style="width:14px;height:14px">
                  <span>ì¸ë¬¼ ë¶„ì„</span>
                </label>
                <label style="display:flex;align-items:center;gap:4px;font-size:11px;cursor:pointer">
                  <input type="checkbox" id="aiimg-fix-outfit-cb" style="width:14px;height:14px">
                  <span>ë³µì¥ ë¶„ì„</span>
                </label>
                <button type="button" class="btn btn-g btn-sm" style="font-size:10px" onclick="AiImage.sendAnalysisToPrompt()" title="ë¶„ì„ ê²°ê³¼ë¥¼ í”„ë¡¬í”„íŠ¸ ì…ë ¥ë€ìœ¼ë¡œ">Toí”„ë¡¬í”„íŠ¸</button>
              </div>
            </div>
            <div style="margin-top:8px;display:flex;gap:6px;flex-wrap:wrap">
              <button type="button" class="btn btn-p btn-sm" style="font-size:11px" onclick="AiImage.insertSeedToEditor()">ì´ë¯¸ì§€ ì‚½ì…</button>
              <button type="button" class="btn btn-g btn-sm" style="font-size:11px" onclick="AiImage.insertSeedToNewFile()">+ ìƒˆíŒŒì¼</button>
              <button type="button" class="btn btn-g btn-sm" style="font-size:11px" onclick="AiImage.insertAnalysisToEditor()" title="í˜„ì¬ ë¶„ì„ ê²°ê³¼ í…ìŠ¤íŠ¸ë¥¼ ë¬¸ì„œì— ì‚½ì…">ë¶„ì„ê²°ê³¼ ë¬¸ì„œì— ë„£ê¸°</button>
            </div>
          </div>
          <div>
            <label style="font-size:11px;color:var(--tx3)">ëª¨ë¸</label>
            <select id="aiimg-model" class="fi" style="width:100%;margin-top:4px;padding:6px 8px;font-size:12px">
              <option value="gemini-2.0-flash-exp-image-generation">Nano Banana (Gemini 2.5 Flash Preview Image)</option>
              <option value="gemini-3-pro-image">Nano Banana Pro (Gemini 3 Pro Image)</option>
              <option value="gemini-3.1-flash-image">Gemini 3.1 Flash Image</option>
            </select>
          </div>
          <div>
            <label style="font-size:11px;color:var(--tx3)">ë©”ë‰´ type</label>
            <div style="display:flex;gap:6px;flex-wrap:wrap;margin-top:4px">
              <button type="button" class="btn btn-g btn-sm aiimg-menu-type" style="font-size:10px" data-type="ê·¹ì‚¬ì‹¤ì£¼ì˜" onclick="AiImage.applyMenuType('ê·¹ì‚¬ì‹¤ì£¼ì˜')">ê·¹ì‚¬ì‹¤ì£¼ì˜</button>
              <button type="button" class="btn btn-g btn-sm aiimg-menu-type" style="font-size:10px" data-type="ìŠ¤íŠœë””ì˜¤" onclick="AiImage.applyMenuType('ìŠ¤íŠœë””ì˜¤')">ìŠ¤íŠœë””ì˜¤</button>
              <button type="button" class="btn btn-g btn-sm aiimg-menu-type" style="font-size:10px" data-type="íŒ¨ì…˜" onclick="AiImage.applyMenuType('íŒ¨ì…˜')">íŒ¨ì…˜</button>
              <button type="button" class="btn btn-g btn-sm aiimg-menu-type" style="font-size:10px" data-type="ì¼ë³¸ë§Œí™”" onclick="AiImage.applyMenuType('ì¼ë³¸ë§Œí™”')">ì¼ë³¸ë§Œí™”</button>
              <button type="button" class="btn btn-g btn-sm aiimg-menu-type" style="font-size:10px" data-type="ìˆ˜ì±„í™”" onclick="AiImage.applyMenuType('ìˆ˜ì±„í™”')">ìˆ˜ì±„í™”</button>
              <button type="button" class="btn btn-g btn-sm aiimg-menu-type" style="font-size:10px" data-type="ë‹¨ìˆœí™”ê·¸ë¦¼ì²´" onclick="AiImage.applyMenuType('ë‹¨ìˆœí™”ê·¸ë¦¼ì²´')">ë‹¨ìˆœí™”ê·¸ë¦¼ì²´</button>
            </div>
          </div>
          <div>
            <label style="font-size:11px;color:var(--tx3)">ë©”ë‰´</label>
            <div style="display:flex;gap:6px;flex-wrap:wrap;margin-top:4px">
              <button type="button" class="btn btn-g btn-sm" style="font-size:10px" onclick="AiImage.applyPreset('person')">ì¸ë¬¼</button>
              <button type="button" class="btn btn-g btn-sm" style="font-size:10px" onclick="AiImage.applyPreset('diagram')">ë„í‘œ</button>
              <button type="button" class="btn btn-g btn-sm" style="font-size:10px" onclick="AiImage.applyPreset('chart')">ì°¨íŠ¸</button>
              <button type="button" class="btn btn-g btn-sm" style="font-size:10px" onclick="AiImage.applyPreset('story')">ìŠ¤í† ë¦¬</button>
            </div>
          </div>
          <div>
            <label style="font-size:11px;color:var(--tx3)">í”„ë¡¬í”„íŠ¸</label>
            <textarea id="aiimg-prompt" class="fi" rows="4" placeholder="ì´ë¯¸ì§€ ì„¤ëª…â€¦" style="margin-top:4px;resize:vertical;min-height:80px;font-size:13px"></textarea>
          </div>
          <button type="button" class="btn btn-p" onclick="AiImage.generate()" id="aiimg-generate-btn" style="font-weight:600">ğŸ–¼ ì´ë¯¸ì§€ ìƒì„±</button>
          <div style="margin-top:10px;padding:8px;background:var(--bg3);border-radius:6px;border:1px solid var(--bd)">
            <label style="font-size:11px;color:var(--tx3)">Virtual try-on ì´ë¯¸ì§€</label>
            <p id="aiimg-virtual-tryon-desc" style="font-size:10px;color:var(--tx3);margin:4px 0 6px">ì´ë¯¸ì§€ê°€ ì—†ëŠ” ê²½ìš° ì°¸ê³ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
            <div style="display:flex;gap:6px;align-items:center;flex-wrap:wrap">
              <button type="button" class="btn btn-g btn-sm" style="font-size:11px" onclick="document.getElementById('aiimg-virtual-tryon-input').click()">ì—…ë¡œë“œ</button>
              <button type="button" class="btn btn-g btn-sm" style="font-size:11px" id="aiimg-virtual-tryon-clear" onclick="AiImage.clearVirtualTryOn()" disabled>ì§€ìš°ê¸°</button>
              <button type="button" class="btn btn-g btn-sm" style="font-size:11px" id="aiimg-virtual-tryon-reextract" onclick="AiImage.extractClothingForTryOn()" disabled title="ë‹¤ì‹œ ì¶”ì¶œ">ë‹¤ì‹œ ì¶”ì¶œí•˜ê¸°</button>
              <span id="aiimg-virtual-tryon-name" style="font-size:11px;color:var(--tx2);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:140px"></span>
            </div>
            <input type="file" id="aiimg-virtual-tryon-input" accept="image/*" style="display:none" onchange="AiImage.onVirtualTryOnFile(event)">
            <div style="margin-top:6px;padding:6px 8px;background:var(--bg4);border-radius:6px;border:1px solid var(--bd)">
              <span style="font-size:10px;color:var(--tx3)">ìƒì„± ì‹œ ì°¸ê³ </span>
              <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:4px">
                <label style="display:flex;align-items:center;gap:4px;font-size:11px;cursor:pointer">
                  <input type="radio" name="aiimg-tryon-ref" id="aiimg-tryon-ref-origin" value="origin" style="width:14px;height:14px">
                  <span>ì›ë³¸ ì´ë¯¸ì§€</span>
                </label>
                <label style="display:flex;align-items:center;gap:4px;font-size:11px;cursor:pointer">
                  <input type="radio" name="aiimg-tryon-ref" id="aiimg-tryon-ref-extracted" value="extracted" checked style="width:14px;height:14px">
                  <span>ì¶”ì¶œ ì´ë¯¸ì§€(ì˜·)</span>
                </label>
              </div>
            </div>
            <div style="margin-top:8px;display:flex;gap:10px;flex-wrap:wrap;align-items:flex-start">
              <div id="aiimg-virtual-tryon-preview" style="flex:1;min-width:80px;max-height:100px;display:none;border-radius:4px;overflow:hidden;border:1px solid var(--bd)">
                <div style="font-size:10px;color:var(--tx3);margin-bottom:2px">ì›ë³¸ ì´ë¯¸ì§€
                  <button type="button" class="btn btn-g btn-sm" style="font-size:9px;padding:1px 4px;margin-left:4px" onclick="AiImage.openTryOnImageInNewWindow('upload')" title="ìƒˆ ì°½ì—ì„œ í¬ê²Œ ë³´ê¸°">í¬ê²Œ ë³´ê¸°</button>
                  <button type="button" class="btn btn-g btn-sm" style="font-size:9px;padding:1px 4px;margin-left:2px" onclick="AiImage.openTryOnCropEdit()" title="í¬ë¡­ í¸ì§‘">í¬ë¡­</button>
                </div>
                <img id="aiimg-virtual-tryon-img" alt="" style="max-width:100%;max-height:80px;object-fit:contain;display:block;cursor:pointer" onclick="AiImage.openTryOnImageInNewWindow('upload')" title="í´ë¦­: ìƒˆ ì°½ì—ì„œ í¬ê²Œ ë³´ê¸°">
              </div>
              <div id="aiimg-virtual-tryon-extracted-wrap" style="flex:1;min-width:80px;max-height:100px;display:none;border-radius:4px;overflow:hidden;border:1px solid var(--bd)">
                <div style="font-size:10px;color:var(--tx3);margin-bottom:2px">ì¶”ì¶œëœ ì˜·
                  <button type="button" class="btn btn-g btn-sm" style="font-size:9px;padding:1px 4px;margin-left:4px" onclick="AiImage.openTryOnImageInNewWindow('extracted')" title="ìƒˆ ì°½ì—ì„œ í¬ê²Œ ë³´ê¸°">í¬ê²Œ ë³´ê¸°</button>
                  <button type="button" class="btn btn-g btn-sm" style="font-size:9px;padding:1px 4px;margin-left:2px" onclick="AiImage.openTryOnExtractedCropEdit()" title="í¬ë¡­ í¸ì§‘">í¬ë¡­</button>
                </div>
                <img id="aiimg-virtual-tryon-extracted-img" alt="" style="max-width:100%;max-height:80px;object-fit:contain;display:block;cursor:pointer" onclick="AiImage.openTryOnImageInNewWindow('extracted')" title="í´ë¦­: ìƒˆ ì°½ì—ì„œ í¬ê²Œ ë³´ê¸°">
                <div id="aiimg-virtual-tryon-extracted-loading" style="display:none;font-size:10px;color:var(--tx3);padding:8px">ì¶”ì¶œ ì¤‘â€¦</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- COLOR PICKER MODAL -->
  <!-- SCHOLAR SEARCH MODAL -->
  <div class="ov" id="scholar-modal">
    <div class="modal" style="max-width:560px">
      <h3>ğŸ” í•™ìˆ  ë…¼ë¬¸ ê²€ìƒ‰</h3>
      <div class="tab-row scholar-tabs" style="margin-top:8px;flex-wrap:wrap;gap:2px">
        <div class="tab active" onclick="Scholar.tab('google')">Google Scholar</div>
        <div class="tab" onclick="Scholar.tab('yonsei')">ì—°ì„¸ëŒ€</div>
        <div class="tab" onclick="Scholar.tab('sciencedirect')">ScienceDirect</div>
        <div class="tab" onclick="Scholar.tab('riss')">RISS</div>
        <div class="tab" onclick="Scholar.tab('kci')">KCI</div>
        <div class="tab" onclick="Scholar.tab('dbpia')">DBpia</div>
        <div class="tab" onclick="Scholar.tab('ieee')">IEEE</div>
      </div>
      <!-- Google Scholar -->
      <div class="tp active" id="scholar-panel-google">
        <div class="fg">
          <label class="fl">ê²€ìƒ‰ì–´ (ë…¼ë¬¸ ì œëª©, ì €ì, í‚¤ì›Œë“œ ë“±)</label>
          <div style="display:flex;gap:7px">
            <input class="fi" id="scholar-q" type="text" placeholder="ì˜ˆ) structural equation modeling education Korea"
              style="flex:1" onkeydown="if(event.key==='Enter')Scholar.search()">
            <button class="btn btn-p" onclick="Scholar.search()" style="white-space:nowrap">ê²€ìƒ‰ â†’</button>
          </div>
        </div>
        <div class="fg">
          <label class="fl">ê²€ìƒ‰ ì˜µì…˜</label>
          <div style="display:flex;gap:8px;flex-wrap:wrap;align-items:center">
            <label style="font-size:12px;color:var(--tx2)">ì–¸ì–´:</label>
            <select id="scholar-lang" class="fi" style="width:auto;padding:4px 8px">
              <option value="ko">í•œêµ­ì–´ ìš°ì„ </option>
              <option value="">ì „ì²´</option>
              <option value="en">ì˜ì–´ ìš°ì„ </option>
            </select>
            <label style="font-size:12px;color:var(--tx2)">ê¸°ê°„:</label>
            <select id="scholar-year" class="fi" style="width:auto;padding:4px 8px">
              <option value="">ì „ì²´ ê¸°ê°„</option>
              <option value="2024">2024ë…„~</option>
              <option value="2022">2022ë…„~</option>
              <option value="2020">2020ë…„~</option>
              <option value="2015">2015ë…„~</option>
              <option value="2010">2010ë…„~</option>
            </select>
            <label style="display:flex;align-items:center;gap:4px;font-size:12px;color:var(--tx2);cursor:pointer">
              <input type="checkbox" id="scholar-review" style="accent-color:var(--ac)"> ë¦¬ë·° ë…¼ë¬¸ë§Œ
            </label>
          </div>
        </div>
        <div style="font-size:11px;color:var(--tx3);margin-bottom:10px;line-height:1.6">ğŸ’¡ ê²€ìƒ‰ ê²°ê³¼ëŠ” ìƒˆ ì°½ì—ì„œ ì—´ë¦½ë‹ˆë‹¤.</div>
      </div>
      <!-- ì—°ì„¸ëŒ€ í•™ìˆ ì •ë³´ì› -->
      <div class="tp" id="scholar-panel-yonsei">
        <div class="fg">
          <label class="fl">ê²€ìƒ‰ì–´</label>
          <div style="display:flex;gap:7px">
            <input class="fi" id="scholar-yonsei-q" type="text" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥"
              style="flex:1" onkeydown="if(event.key==='Enter')Scholar.search()">
            <button class="btn btn-p" onclick="Scholar.search()" style="white-space:nowrap">ê²€ìƒ‰ â†’</button>
          </div>
        </div>
        <div style="font-size:11px;color:var(--tx3);margin-bottom:10px">ì—°ì„¸ëŒ€í•™êµ í•™ìˆ ì •ë³´ì› í†µí•©ê²€ìƒ‰</div>
      </div>
      <!-- ScienceDirect -->
      <div class="tp" id="scholar-panel-sciencedirect">
        <div class="fg">
          <label class="fl">í‚¤ì›Œë“œ (qs)</label>
          <input class="fi" id="scholar-sd-qs" type="text" placeholder="ê²€ìƒ‰ í‚¤ì›Œë“œ" style="margin-bottom:8px">
        </div>
        <div class="fg">
          <label class="fl">ì €ì (authors)</label>
          <input class="fi" id="scholar-sd-authors" type="text" placeholder="ì €ìëª… (ì„ íƒ)" style="margin-bottom:8px">
        </div>
        <div class="fg">
          <label class="fl">ê°„í–‰ë¬¼/ì €ë„ (pub)</label>
          <input class="fi" id="scholar-sd-pub" type="text" placeholder="ì €ë„ëª… (ì„ íƒ)" style="margin-bottom:8px">
        </div>
        <div style="display:flex;gap:7px;margin-top:8px">
          <button class="btn btn-p" onclick="Scholar.search()" style="white-space:nowrap">ê²€ìƒ‰ â†’</button>
        </div>
      </div>
      <!-- RISS -->
      <div class="tp" id="scholar-panel-riss">
        <div class="fg">
          <label class="fl">ê²€ìƒ‰ì–´ (query)</label>
          <div style="display:flex;gap:7px">
            <input class="fi" id="scholar-riss-q" type="text" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥"
              style="flex:1" onkeydown="if(event.key==='Enter')Scholar.search()">
            <button class="btn btn-p" onclick="Scholar.search()" style="white-space:nowrap">ê²€ìƒ‰ â†’</button>
          </div>
        </div>
        <div style="font-size:11px;color:var(--tx3);margin-bottom:10px">RISS í•™ìˆ ì—°êµ¬ì •ë³´ì„œë¹„ìŠ¤</div>
      </div>
      <!-- KCI -->
      <div class="tp" id="scholar-panel-kci">
        <div class="fg">
          <label class="fl">ì¼ë°˜ ê²€ìƒ‰ (mainSearchKeyword)</label>
          <input class="fi" id="scholar-kci-main" type="text" placeholder="ê²€ìƒ‰ì–´" style="margin-bottom:8px">
        </div>
        <div class="fg">
          <label class="fl">ì €ìëª…</label>
          <input class="fi" id="scholar-kci-author" type="text" placeholder="ì €ìëª… (ì„ íƒ)" style="margin-bottom:8px">
        </div>
        <div class="fg">
          <label class="fl">ê°„í–‰ì§€ëª…</label>
          <input class="fi" id="scholar-kci-journal" type="text" placeholder="ê°„í–‰ì§€ëª… (ì„ íƒ)" style="margin-bottom:8px">
        </div>
        <div class="fg">
          <label class="fl">ë°œí–‰ê¸°ê´€ëª…</label>
          <input class="fi" id="scholar-kci-publisher" type="text" placeholder="ë°œí–‰ê¸°ê´€ëª… (ì„ íƒ)" style="margin-bottom:8px">
        </div>
        <div style="display:flex;gap:7px;margin-top:8px">
          <button class="btn btn-p" onclick="Scholar.search()" style="white-space:nowrap">ê²€ìƒ‰ â†’</button>
        </div>
        <div style="font-size:10px;color:var(--tx3);margin-top:6px">â€» ì…ë ¥ë€ì´ ì±„ì›Œì§€ì§€ ì•Šìœ¼ë©´ #mainSearchKeywordì— Ctrl+Vë¡œ ë¶™ì—¬ë„£ê¸°</div>
      </div>
      <!-- DBpia -->
      <div class="tp" id="scholar-panel-dbpia">
        <div class="fg">
          <label class="fl">ê²€ìƒ‰ì–´</label>
          <div style="display:flex;gap:7px">
            <input class="fi" id="scholar-dbpia-q" type="text" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥"
              style="flex:1" onkeydown="if(event.key==='Enter')Scholar.search()">
            <button class="btn btn-p" onclick="Scholar.search()" style="white-space:nowrap">ê²€ìƒ‰ â†’</button>
          </div>
        </div>
        <div style="font-size:11px;color:var(--tx3);margin-bottom:10px">DBpia í•™ìˆ ì½˜í…ì¸  í”Œë«í¼</div>
      </div>
      <!-- IEEE -->
      <div class="tp" id="scholar-panel-ieee">
        <div class="fg">
          <label class="fl">ê²€ìƒ‰ì–´</label>
          <div style="display:flex;gap:7px">
            <input class="fi" id="scholar-ieee-q" type="text" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥"
              style="flex:1" onkeydown="if(event.key==='Enter')Scholar.search()">
            <button class="btn btn-p" onclick="Scholar.search()" style="white-space:nowrap">ê²€ìƒ‰ â†’</button>
          </div>
        </div>
        <div style="font-size:11px;color:var(--tx3);margin-bottom:10px">IEEE Xplore Digital Library</div>
      </div>
      <div class="fg" id="scholar-recent-wrap" style="margin-top:10px">
        <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap">
          <label class="fl">ìµœê·¼ ê²€ìƒ‰ì–´</label>
          <button type="button" class="btn btn-g btn-sm" onclick="Scholar.openApaGuide()" style="font-size:11px;padding:2px 8px" title="APA 7íŒ ì°¸ê³ ë¬¸í—Œ ì‘ì„± ê°€ì´ë“œ">APAê·œì¹™</button>
        </div>
        <div id="scholar-recent" style="display:flex;gap:5px;flex-wrap:wrap;margin-top:6px"></div>
      </div>
      <div class="mf">
        <button class="btn btn-g btn-sm" onclick="Scholar.clear()">ê²€ìƒ‰ì–´ ì´ˆê¸°í™”</button>
        <button class="btn btn-g btn-sm" onclick="App.hideModal('scholar-modal')">ë‹«ê¸°</button>
        <button class="btn btn-p btn-sm" onclick="Scholar.search()">ğŸ” ê²€ìƒ‰</button>
      </div>
    </div>
  </div>

  <div class="ov" id="color-modal">
    <div class="modal" style="max-width:400px">
      <h3 id="color-modal-title">ê¸€ì ìƒ‰ìƒ ì„¤ì •</h3>
      <div class="fg">
        <label class="fl">ë¹ ë¥¸ ì„ íƒ</label>
        <div class="csw-row" id="color-swatches"></div>
      </div>
      <div class="fg">
        <div style="display:flex;gap:6px;align-items:center">
          <div style="flex:1">
            <label class="fl">ì§ì ‘ ì…ë ¥ (Hex ë˜ëŠ” ìƒ‰ìƒëª…)</label>
            <input class="fi" id="color-hex" type="text" placeholder="#ff0000" style="font-family:var(--fm)"
              oninput="ColorPicker.updatePreview(this.value)">
          </div>
          <!-- ë„¤ì´í‹°ë¸Œ color input (hidden) -->
          <div style="display:flex;flex-direction:column;align-items:center;gap:3px;flex-shrink:0;margin-top:14px">
            <label id="eyedrop-btn" class="btn btn-g btn-sm"
              style="cursor:pointer;padding:5px 8px;display:flex;flex-direction:column;align-items:center;gap:2px"
              title="ìŠ¤í¬ì´ë“œ / ìƒ‰ìƒ íŒ”ë ˆíŠ¸">
              <span style="font-size:16px">ğŸ¨</span>
              <span style="font-size:9px">íŒ”ë ˆíŠ¸</span>
              <input type="color" id="color-native"
                style="position:absolute;opacity:0;width:0;height:0;pointer-events:none"
                oninput="ColorPicker.fromNative(this.value)" onchange="ColorPicker.fromNative(this.value)">
            </label>
            <button id="eyedropper-btn" class="btn btn-g btn-sm"
              style="padding:5px 8px;display:flex;flex-direction:column;align-items:center;gap:2px"
              onclick="ColorPicker.eyedrop()" title="í™”ë©´ì—ì„œ ìƒ‰ìƒ ì¶”ì¶œ (ìŠ¤í¬ì´ë“œ)">
              <span style="font-size:16px">ğŸ’‰</span>
              <span style="font-size:9px">ìŠ¤í¬ì´ë“œ</span>
            </button>
          </div>
        </div>
      </div>
      <div style="display:flex;align-items:center;gap:10px;margin-bottom:12px">
        <label class="fl" style="margin:0;flex-shrink:0">ë¯¸ë¦¬ë³´ê¸°:</label>
        <div id="color-preview"
          style="flex:1;padding:5px 12px;border-radius:4px;font-size:13px;border:1px solid var(--bd);transition:all .15s">
          ìƒ˜í”Œ í…ìŠ¤íŠ¸ / Sample Text</div>
      </div>
      <div id="eyedrop-support-msg" style="font-size:10px;color:var(--tx3);margin-bottom:8px;display:none">âš  ìŠ¤í¬ì´ë“œëŠ”
        Chrome/Edgeì—ì„œë§Œ ì§€ì›ë©ë‹ˆë‹¤.</div>
      <div class="mf">
        <button class="btn btn-g btn-sm" onclick="App.hideModal('color-modal')">ì·¨ì†Œ</button>
        <button class="btn btn-p btn-sm" onclick="App.applyColor()">ì ìš©</button>
      </div>
    </div>
  </div>

  <!-- CAPTION MODAL -->
  <div class="ov" id="caption-modal">
    <div class="modal" style="max-width:520px">
      <h3 id="cap-title">í‘œ ìº¡ì…˜ ì‚½ì…</h3>
      <div class="fg">
        <label class="fl">í˜•ì‹ ì„ íƒ (í´ë¦­ìœ¼ë¡œ ì„ íƒ)</label>
        <div id="cap-opts" style="display:flex;gap:6px;flex-wrap:wrap;margin-top:4px"></div>
      </div>
      <div style="display:flex;gap:10px;margin-bottom:10px">
        <div class="fg" style="flex:0 0 80px">
          <label class="fl">ë²ˆí˜¸</label>
          <input class="fi" id="cap-num" type="text" placeholder="1" oninput="App.updateCapPreview()">
        </div>
        <div class="fg" style="flex:1">
          <label class="fl">ì„¤ëª… / ì œëª©</label>
          <input class="fi" id="cap-desc" type="text" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" oninput="App.updateCapPreview()">
        </div>
      </div>
      <div class="fg">
        <label class="fl">ë¯¸ë¦¬ë³´ê¸°</label>
        <div id="cap-preview"
          style="background:var(--bg3);border:1px solid var(--bd);border-radius:var(--r);padding:8px 12px;font-family:var(--fm);font-size:12px;color:var(--tx);min-height:28px">
        </div>
      </div>
      <div class="mf">
        <button class="btn btn-g btn-sm" onclick="App.hideModal('caption-modal')">ì·¨ì†Œ</button>
        <button class="btn btn-p btn-sm" onclick="App.insertCaption()">ì‚½ì…</button>
      </div>
    </div>
  </div>

  <!-- TEMPLATE MODAL -->
  <div class="ov" id="tmpl-modal">
    <div class="modal lg">
      <h3>ğŸ“‹ ë…¼ë¬¸ ì–‘ì‹ ì„ íƒ</h3>
      <p style="font-size:12px;color:var(--tx2);margin-bottom:14px">ì„ íƒí•˜ë©´ ì—ë””í„°ì— êµ¬ì¡°ê°€ ìë™ ì‚½ì…ë©ë‹ˆë‹¤. ê¸°ì¡´ ë‚´ìš©ì€ ìœ ì§€ë©ë‹ˆë‹¤.</p>
      <div class="tmpl-grid" id="tmpl-grid"></div>
      <div style="margin-top:16px;padding-top:14px;border-top:1px solid var(--bd)">
        <h4 style="font-size:12px;color:var(--tx2);margin-bottom:10px">ğŸ“½ ìŠ¬ë¼ì´ë“œ ì–‘ì‹</h4>
        <div style="display:flex;flex-wrap:wrap;align-items:center;gap:12px">
          <label style="font-size:11px;color:var(--tx3)">ìŠ¤íƒ€ì¼</label>
          <select id="slide-tmpl-style" style="font-size:11px;padding:4px 8px;background:var(--bg3);border:1px solid var(--bd);border-radius:4px;color:var(--tx1)">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
          </select>
          <label style="font-size:11px;color:var(--tx3)">ìƒì„± í˜ì´ì§€ ìˆ˜</label>
          <input type="number" id="slide-tmpl-count" min="1" max="50" value="5" style="width:60px;font-size:11px;padding:4px 8px;background:var(--bg3);border:1px solid var(--bd);border-radius:4px;color:var(--tx1)">
          <button type="button" class="btn btn-p btn-sm" onclick="App.insertSlideTmpl()">ìƒì„± í›„ ì‚½ì…</button>
        </div>
      </div>
      <div class="mf"><button class="btn btn-g btn-sm" onclick="App.hideModal('tmpl-modal')">ë‹«ê¸°</button></div>
    </div>
  </div>

  <!-- FORMAT QUICK PANEL (Alt+L) -->
  <div id="fmt-panel">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
      <h4 style="font-size:13px;font-weight:600;color:var(--txh);margin:0">âœï¸ ì„œì‹ ì„¤ì • <span
          style="font-size:10px;color:var(--tx3);font-weight:400">Alt+L</span></h4>
      <button class="btn-ic" onclick="FP.hide()" style="font-size:14px">âœ•</button>
    </div>
    <!-- font size -->
    <div class="fmt-row">
      <span class="fmt-lbl">ê¸€ì í¬ê¸°</span>
      <button class="btn btn-g btn-sm" style="padding:2px 8px;font-size:13px;font-weight:700"
        onclick="FP.fsz(-1)">âˆ’</button>
      <select id="fp-fsize" class="fi" style="flex:1;padding:3px 6px;font-size:12px" onchange="FP.applyFsize()">
        <option>8pt</option>
        <option>9pt</option>
        <option>10pt</option>
        <option>11pt</option>
        <option selected>12pt</option>
        <option>13pt</option>
        <option>14pt</option>
        <option>15pt</option>
        <option>16pt</option>
        <option>18pt</option>
        <option>20pt</option>
        <option>22pt</option>
        <option>24pt</option>
        <option>28pt</option>
        <option>32pt</option>
        <option>36pt</option>
        <option>40pt</option>
        <option>48pt</option>
        <option>50pt</option>
      </select>
      <button class="btn btn-g btn-sm" style="padding:2px 8px;font-size:13px;font-weight:700"
        onclick="FP.fsz(1)">+</button>
    </div>
    <!-- font color -->
    <div class="fmt-row">
      <span class="fmt-lbl">ê¸€ì ìƒ‰</span>
      <div style="display:flex;gap:4px;flex-wrap:wrap;flex:1">
        <input type="color" id="fp-fc" value="#e8e8f0"
          style="width:30px;height:26px;border:none;border-radius:4px;cursor:pointer;background:none;padding:0"
          onchange="FP.applyColor()">
        <div style="display:flex;gap:3px;flex-wrap:wrap">
          <div class="csw" style="background:#e8e8f0" onclick="FP.setFc('#e8e8f0')" title="í°ìƒ‰ê³„"></div>
          <div class="csw" style="background:#ff4444" onclick="FP.setFc('#ff4444')" title="ë¹¨ê°•"></div>
          <div class="csw" style="background:#ff8800" onclick="FP.setFc('#ff8800')" title="ì£¼í™©"></div>
          <div class="csw" style="background:#ffcc00" onclick="FP.setFc('#ffcc00')" title="ë…¸ë‘"></div>
          <div class="csw" style="background:#44cc44" onclick="FP.setFc('#44cc44')" title="ì´ˆë¡"></div>
          <div class="csw" style="background:#00aaff" onclick="FP.setFc('#00aaff')" title="íŒŒë‘"></div>
          <div class="csw" style="background:#aa44ff" onclick="FP.setFc('#aa44ff')" title="ë³´ë¼"></div>
          <div class="csw" style="background:#ff44aa" onclick="FP.setFc('#ff44aa')" title="í•‘í¬"></div>
          <div class="csw" style="background:#333333" onclick="FP.setFc('#333333')" title="ê²€ì •"></div>
          <div class="csw" style="background:#5b4ce4" onclick="FP.setFc('#5b4ce4')" title="ì¸ë””ê³ "></div>
        </div>
      </div>
    </div>
    <!-- highlight -->
    <div class="fmt-row">
      <span class="fmt-lbl">í˜•ê´‘íœ</span>
      <div style="display:flex;gap:4px;flex-wrap:wrap;flex:1">
        <input type="color" id="fp-hl" value="#fff176"
          style="width:30px;height:26px;border:none;border-radius:4px;cursor:pointer;background:none;padding:0"
          onchange="FP.applyHL()">
        <div style="display:flex;gap:3px;flex-wrap:wrap">
          <div class="csw" style="background:#fff176" onclick="FP.setHL('#fff176')" title="ë…¸ë‘"></div>
          <div class="csw" style="background:#ffcc80" onclick="FP.setHL('#ffcc80')" title="ì˜¤ë Œì§€"></div>
          <div class="csw" style="background:#ef9a9a" onclick="FP.setHL('#ef9a9a')" title="ë¹¨ê°•"></div>
          <div class="csw" style="background:#80cbc4" onclick="FP.setHL('#80cbc4')" title="ë¯¼íŠ¸"></div>
          <div class="csw" style="background:#a5d6a7" onclick="FP.setHL('#a5d6a7')" title="ì´ˆë¡"></div>
          <div class="csw" style="background:#90caf9" onclick="FP.setHL('#90caf9')" title="íŒŒë‘"></div>
          <div class="csw" style="background:#ce93d8" onclick="FP.setHL('#ce93d8')" title="ë³´ë¼"></div>
          <div class="csw" style="background:#f48fb1" onclick="FP.setHL('#f48fb1')" title="í•‘í¬"></div>
          <div class="csw" style="background:#ffecb3" onclick="FP.setHL('#ffecb3')" title="ì—°ë…¸ë‘"></div>
          <div class="csw"
            style="background:repeating-linear-gradient(45deg,#888,#888 2px,transparent 2px,transparent 6px);border:1px solid #888"
            onclick="FP.setHL('none')" title="ì—†ìŒ"></div>
        </div>
      </div>
    </div>
    <div style="text-align:right;margin-top:4px">
      <button class="btn btn-g btn-sm" onclick="FP.hide()">ë‹«ê¸°</button>
    </div>
  </div>

  <div id="tooltip"></div>

  <!-- íŒŒì¼ ì‚­ì œ í™•ì¸ ëª¨ë‹¬ -->
  <div class="ov" id="del-confirm-modal" onclick="if(event.target===this)DelConfirm.hide()">
    <div class="modal" style="max-width:400px">
      <div class="mh" style="border-bottom:2px solid rgba(247,106,106,.4)">
        <span style="color:#f76a6a;display:flex;align-items:center;gap:7px">
          <span style="font-size:18px">ğŸ—‘</span> íŒŒì¼ ì‚­ì œ
        </span>
        <button class="btn-ic" onclick="DelConfirm.hide()">âœ•</button>
      </div>
      <div style="padding:18px 18px 14px;display:flex;flex-direction:column;gap:12px">
        <!-- ê²½ê³  ì˜ì—­ -->
        <div style="background:rgba(247,106,106,.08);border:1px solid rgba(247,106,106,.3);border-radius:8px;padding:12px 14px">
          <div style="font-size:12px;color:var(--tx2);margin-bottom:6px">ì‚­ì œí•  íŒŒì¼</div>
          <div style="font-size:14px;font-weight:700;color:#f76a6a;word-break:break-all;margin-bottom:4px" id="dc-filename"></div>
          <div style="font-size:10px;color:var(--tx3);font-family:var(--fm);word-break:break-all" id="dc-filepath"></div>
        </div>
        <!-- ìœ í˜• ë°°ì§€ -->
        <div style="display:flex;align-items:center;gap:8px">
          <span id="dc-type-badge" style="font-size:10px;padding:2px 9px;border-radius:20px;border:1px solid;font-weight:600"></span>
          <span style="font-size:11px;color:var(--tx3)">ì´ íŒŒì¼ì„ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œí•©ë‹ˆë‹¤.</span>
        </div>
        <!-- GitHub ì»¤ë°‹ ë©”ì‹œì§€ (GitHubë§Œ í‘œì‹œ) -->
        <div id="dc-commit-wrap">
          <label style="font-size:11px;color:var(--tx2);display:block;margin-bottom:4px">ì»¤ë°‹ ë©”ì‹œì§€</label>
          <input type="text" id="dc-commit-msg" class="gh-input" placeholder="Delete íŒŒì¼ëª…" style="width:100%;box-sizing:border-box">
        </div>
        <!-- ê²½ê³  ë¬¸êµ¬ -->
        <div style="font-size:11px;color:#f7a06a;display:flex;align-items:flex-start;gap:6px">
          <span>âš </span>
          <span>ì‚­ì œëœ íŒŒì¼ì€ ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</span>
        </div>
      </div>
      <div class="mf" style="padding:10px 18px 16px">
        <button class="btn btn-g btn-sm" onclick="DelConfirm.hide()">ì·¨ì†Œ</button>
        <button class="btn btn-sm" id="dc-confirm-btn" onclick="DelConfirm.confirm()"
          style="background:rgba(247,106,106,.2);border:1px solid rgba(247,106,106,.5);color:#f76a6a;font-weight:600;padding:5px 18px">
          ğŸ—‘ ì‚­ì œ í™•ì¸
        </button>
      </div>
    </div>
  </div>

  <!-- ë²ˆì—­ê¸° ëª¨ë‹¬ -->
  <div class="ov" id="translator-modal" onclick="if(event.target===this)Translator.hide()">
    <div class="modal" id="translator-modal-inner" style="max-width:640px;max-height:88vh;display:flex;flex-direction:column;position:relative">
      <div style="display:flex;align-items:center;gap:8px;padding:8px 12px;border-bottom:1px solid var(--bd);flex-shrink:0;background:var(--bg3)">
        <button type="button" class="btn btn-g btn-sm" onclick="Translator.hide()" style="font-size:11px">ë‹«ê¸°</button>
        <button type="button" class="btn btn-g btn-sm" id="tr-fullscreen-btn" onclick="Translator.toggleFullscreen()" style="font-size:11px">ì „ì²´í™”ë©´</button>
      </div>
      <div class="mh">
        <span>ğŸŒ ë²ˆì—­ê¸°</span>
        <div style="display:flex;align-items:center;gap:8px">
          <span style="font-size:10px;color:var(--tx3)">Ctrl+Enter â†’ ë²ˆì—­ &nbsp;|&nbsp; Shift+Alt+G</span>
          <button class="btn-ic" onclick="Translator.hide()">âœ•</button>
        </div>
      </div>
      <!-- íƒ­ -->
      <div id="tr-tabs" style="display:flex;gap:2px;padding:8px 14px 0;border-bottom:1px solid var(--bd);flex-shrink:0">
        <button type="button" class="tr-tab active" data-tab="translate" onclick="Translator.switchTab('translate')">ë²ˆì—­</button>
        <button type="button" class="tr-tab" data-tab="ai-translate" onclick="Translator.switchTab('ai-translate')">AIí•™ìˆ ë²ˆì—­</button>
        <button type="button" class="tr-tab" data-tab="ai-write" onclick="Translator.switchTab('ai-write')">AIí•™ìˆ  ê¸€ì“°ê¸°</button>
      </div>
      <!-- AIí•™ìˆ ë²ˆì—­: í”„ë¡¬í”„íŠ¸ + ëª¨ë¸ (íƒ­ ì „í™˜ ì‹œ í‘œì‹œ) -->
      <div id="tr-ai-translate-panel" style="display:none;flex-direction:column;padding:10px 14px;border-bottom:1px solid var(--bd);flex-shrink:0;gap:8px">
        <div>
          <label style="font-size:10px;color:var(--tx3)">í”„ë¡¬í”„íŠ¸</label>
          <textarea id="tr-ai-translate-prompt" class="fi" rows="8" placeholder="AIì—ê²Œ ì§€ì‹œí•  ë‚´ìš©"
            style="width:561px;max-width:100%;height:151px;min-height:151px;margin-top:4px;font-size:12px;resize:vertical">You are a professional academic translator and scholarly editor.

Translate the following text into the target language specified below.
The translation must meet the standards of international peer-reviewed journals.

[Source Language]: (Korean or English)
[Target Language]: (Korean or English)

Translation Requirements:

1. Use a formal, academic, and research-oriented tone.
2. Ensure conceptual accuracy and terminological consistency.
3. Employ discipline-specific terminology commonly used in SSCI/SCI-indexed journals.
4. Do not translate literally; prioritize semantic equivalence and theoretical precision.
5. Preserve statistical expressions, methodological terms, and theoretical constructs accurately.
6. Adjust sentence structure to align with academic writing conventions of the target language.
7. Avoid colloquial expressions.
8. Improve clarity, coherence, and logical flow where necessary without altering meaning.
9. Maintain citation format and technical notation exactly as presented.

Output only the final translated text.
Do not provide explanations unless explicitly requested.</textarea>
        </div>
        <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap">
          <div style="flex:1;min-width:140px">
            <label style="font-size:10px;color:var(--tx3)">ëª¨ë¸</label>
            <select id="tr-model" class="fi" style="width:100%;padding:5px 8px;font-size:12px;margin-top:4px">
              <option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
              <option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
              <option value="gemini-3-flash-preview">Gemini 3 Flash</option>
              <option value="gemini-2.5-flash-lite">Gemini 2.5 Flash Lite</option>
            </select>
          </div>
        </div>
      </div>
      <!-- AIí•™ìˆ  ê¸€ì“°ê¸°: í”„ë¡¬í”„íŠ¸ + ëª¨ë¸ (ì–¸ì–´ ì„ íƒ ì—†ìŒ) -->
      <div id="tr-ai-write-panel" style="display:none;flex-direction:column;padding:10px 14px;border-bottom:1px solid var(--bd);flex-shrink:0;gap:8px">
        <div>
          <label style="font-size:10px;color:var(--tx3)">í”„ë¡¬í”„íŠ¸</label>
          <textarea id="tr-ai-write-prompt" class="fi" rows="8" placeholder="AIì—ê²Œ ì§€ì‹œí•  ë‚´ìš©"
            style="width:561px;max-width:100%;height:151px;min-height:151px;margin-top:4px;font-size:12px;resize:vertical">ë‹¹ì‹ ì€ í•´ë‹¹ ë¶„ì•¼ì˜ ëŒ€í•™êµìˆ˜ì´ì ì—°êµ¬ìì´ë‹¤. 
ì•„ë˜ì— ì œì‹œëœ í…ìŠ¤íŠ¸ë¥¼ í•™ìˆ  ì—°êµ¬ ë…¼ë¬¸ ìˆ˜ì¤€ì˜ ë¬¸ì²´ë¡œ ì¬ì‘ì„±í•˜ë¼.

ì‘ì„± ê¸°ì¤€ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

1. ëª¨ë“  ë¬¸ì¥ì€ '~ì´ë‹¤' ì²´ì˜ í•™ìˆ ì  ì„œìˆ  ë°©ì‹ìœ¼ë¡œ ì‘ì„±í•  ê²ƒ.
2. êµ¬ì–´ì Â·ì„œìˆ ì  í‘œí˜„ì„ ì œê±°í•˜ê³ , ì—°êµ¬ ì¤‘ì‹¬ì˜ ê°ê´€ì  ë¬¸ì²´ë¡œ ì „í™˜í•  ê²ƒ.
3. ê°œë…ì–´ëŠ” í•™ë¬¸ ë¶„ì•¼ì—ì„œ í†µìš©ë˜ëŠ” ì „ë¬¸ í•™ìˆ ìš©ì–´ë¡œ ì •êµí™”í•  ê²ƒ.
4. ì˜ë¯¸ë¥¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ” ë²”ìœ„ ë‚´ì—ì„œ ë¬¸ì¥ì„ ì¬êµ¬ì„±í•˜ì—¬ ë…¼ë¦¬ì  ì‘ì§‘ì„±ê³¼ êµ¬ì¡°ì  ëª…í™•ì„±ì„ ê°•í™”í•  ê²ƒ.
5. ëª¨í˜¸í•œ í‘œí˜„ì€ ì œê±°í•˜ê³  ê°œë…ì  ì •ë°€ì„±ì„ í™•ë³´í•  ê²ƒ.
6. ì¤‘ë³µ í‘œí˜„ì€ ì¶•ì•½í•˜ê³ , ë¬¸ì¥ì€ ê°„ê²°í•˜ë©´ì„œë„ ì´ë¡ ì ìœ¼ë¡œ ì—„ë°€í•˜ê²Œ êµ¬ì„±í•  ê²ƒ.
7. í•„ìš” ì‹œ ë¬¸ì¥ ê°„ ì¸ê³¼ê´€ê³„, ë…¼ë¦¬ì  ì—°ê²°ì„±, ì´ë¡ ì  ë§¥ë½ì„ ë³´ì™„í•  ê²ƒ.
8. ëŒ€í•™ì› ì´ìƒ ìˆ˜ì¤€ì˜ ì—°êµ¬ ë³´ê³ ì„œ ë˜ëŠ” í•™ìˆ ì§€ ë…¼ë¬¸ì— ì í•©í•œ ì–´íœ˜ë¥¼ ì‚¬ìš©í•  ê²ƒ.
9. ì„¤ëª…ì´ë‚˜ í•´ì„¤ ì—†ì´ ìµœì¢… ìˆ˜ì •ëœ ë¬¸ì¥ë§Œ ì œì‹œí•  ê²ƒ.</textarea>
        </div>
        <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap">
          <div style="flex:1;min-width:140px">
            <label style="font-size:10px;color:var(--tx3)">ëª¨ë¸</label>
            <select id="tr-model-write" class="fi" style="width:100%;padding:5px 8px;font-size:12px;margin-top:4px">
              <option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
              <option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
              <option value="gemini-3-flash-preview">Gemini 3 Flash</option>
              <option value="gemini-2.5-flash-lite">Gemini 2.5 Flash Lite</option>
            </select>
          </div>
          <button class="btn btn-p" onclick="Translator.aiWrite()" style="margin-top:16px;padding:5px 18px;font-size:12px;font-weight:600">âœ AI ìš”ì²­</button>
        </div>
      </div>
      <!-- ì–¸ì–´ ì„ íƒ (ë²ˆì—­ / AIí•™ìˆ ë²ˆì—­ íƒ­ì—ì„œë§Œ í‘œì‹œ) -->
      <div id="tr-lang-row" style="display:flex;align-items:center;gap:8px;padding:10px 14px;border-bottom:1px solid var(--bd);flex-shrink:0">
        <div style="flex:1;display:flex;flex-direction:column;gap:3px">
          <label style="font-size:10px;color:var(--tx3)">ì›ë³¸ ì–¸ì–´</label>
          <select id="tr-src-lang" class="fi" style="padding:5px 8px;font-size:12px">
            <option value="en">ğŸ‡ºğŸ‡¸ ì˜ì–´</option>
            <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
            <option value="ja">ğŸ‡¯ğŸ‡µ ì¼ë³¸ì–´</option>
            <option value="zh">ğŸ‡¨ğŸ‡³ ì¤‘êµ­ì–´</option>
            <option value="fr">ğŸ‡«ğŸ‡· í”„ë‘ìŠ¤ì–´</option>
            <option value="de">ğŸ‡©ğŸ‡ª ë…ì¼ì–´</option>
            <option value="es">ğŸ‡ªğŸ‡¸ ìŠ¤í˜ì¸ì–´</option>
            <option value="ru">ğŸ‡·ğŸ‡º ëŸ¬ì‹œì•„ì–´</option>
            <option value="pt">ğŸ‡µğŸ‡¹ í¬ë¥´íˆ¬ê°ˆì–´</option>
            <option value="it">ğŸ‡®ğŸ‡¹ ì´íƒˆë¦¬ì•„ì–´</option>
            <option value="ar">ğŸ‡¸ğŸ‡¦ ì•„ëì–´</option>
          </select>
        </div>
        <button class="btn btn-g" onclick="Translator.swapLang()"
          style="margin-top:16px;padding:5px 10px;font-size:16px;flex-shrink:0" title="ì–¸ì–´ ì „í™˜">â‡„</button>
        <div style="flex:1;display:flex;flex-direction:column;gap:3px">
          <label style="font-size:10px;color:var(--tx3)">ë²ˆì—­ ì–¸ì–´</label>
          <select id="tr-tgt-lang" class="fi" style="padding:5px 8px;font-size:12px">
            <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
            <option value="en">ğŸ‡ºğŸ‡¸ ì˜ì–´</option>
            <option value="ja">ğŸ‡¯ğŸ‡µ ì¼ë³¸ì–´</option>
            <option value="zh">ğŸ‡¨ğŸ‡³ ì¤‘êµ­ì–´</option>
            <option value="fr">ğŸ‡«ğŸ‡· í”„ë‘ìŠ¤ì–´</option>
            <option value="de">ğŸ‡©ğŸ‡ª ë…ì¼ì–´</option>
            <option value="es">ğŸ‡ªğŸ‡¸ ìŠ¤í˜ì¸ì–´</option>
            <option value="ru">ğŸ‡·ğŸ‡º ëŸ¬ì‹œì•„ì–´</option>
            <option value="pt">ğŸ‡µğŸ‡¹ í¬ë¥´íˆ¬ê°ˆì–´</option>
            <option value="it">ğŸ‡®ğŸ‡¹ ì´íƒˆë¦¬ì•„ì–´</option>
            <option value="ar">ğŸ‡¸ğŸ‡¦ ì•„ëì–´</option>
          </select>
        </div>
        <button class="btn btn-p" id="tr-translate-btn" onclick="Translator.translate()"
          style="margin-top:16px;padding:5px 18px;flex-shrink:0;font-size:12px;font-weight:600">ğŸŒ ë²ˆì—­</button>
      </div>
      <!-- ë²ˆì—­ ì—”ì§„ ì„ íƒ (ë²ˆì—­ íƒ­ì—ì„œë§Œ ì‚¬ìš©) -->
      <div id="tr-engine-row" style="display:flex;align-items:center;gap:8px;padding:6px 14px;border-bottom:1px solid var(--bd);flex-shrink:0">
        <label style="font-size:10px;color:var(--tx3);flex-shrink:0">ë²ˆì—­ ì—”ì§„</label>
        <select id="tr-engine" class="fi" style="padding:4px 8px;font-size:11px;max-width:220px">
          <option value="google">êµ¬ê¸€ ë²ˆì—­ ìŠ¤í¬ë˜í•‘</option>
          <option value="mymemory">MyMemory</option>
          <option value="libre">LibreTranslate</option>
        </select>
      </div>
      <!-- ë³¸ë¬¸ -->
      <div style="display:flex;flex:1;overflow:hidden;min-height:200px">
        <!-- ì…ë ¥ -->
        <div style="flex:1;display:flex;flex-direction:column;border-right:1px solid var(--bd)">
          <div style="padding:5px 12px;font-size:10px;color:var(--tx3);font-weight:600;border-bottom:1px solid var(--bd);flex-shrink:0;display:flex;justify-content:space-between;align-items:center">
            <span>ì›ë³¸</span>
            <button class="btn-ic" style="font-size:10px;color:var(--tx3)" onclick="Translator.clearInput()">âœ• ì§€ìš°ê¸°</button>
          </div>
          <textarea id="tr-input" class="fi"
            style="flex:1;resize:none;border:none;border-radius:0;background:var(--bg2);font-size:13px;line-height:1.7;padding:12px;outline:none;color:var(--tx);font-family:inherit;min-height:120px"
            placeholder="ë²ˆì—­í•  í…ìŠ¤íŠ¸ ì…ë ¥â€¦&#10;(ì—ë””í„°ì—ì„œ ì„ íƒ í›„ ì—´ë©´ ìë™ ì…ë ¥)"
            oninput="Translator.onInput()"></textarea>
          <div style="padding:3px 10px;font-size:10px;color:var(--tx3);border-top:1px solid var(--bd);flex-shrink:0">
            <span id="tr-input-count">0ì</span>
          </div>
        </div>
        <!-- ì¶œë ¥ -->
        <div style="flex:1;display:flex;flex-direction:column;position:relative">
          <div style="padding:5px 12px;font-size:10px;color:var(--tx3);font-weight:600;border-bottom:1px solid var(--bd);flex-shrink:0;display:flex;justify-content:space-between;align-items:center">
            <span>ë²ˆì—­ ê²°ê³¼</span>
            <div style="display:flex;gap:4px">
              <button class="btn-ic" style="font-size:10px;color:var(--tx3)" onclick="Translator.openBrowser()" title="êµ¬ê¸€ ë²ˆì—­ì—ì„œ ì—´ê¸°">êµ¬ê¸€ë²ˆì—­ê¸°</button>
              <button class="btn-ic" style="font-size:10px;color:var(--tx3)" onclick="Translator.openTranslationInNewWindow()" title="ë²ˆì—­ ê²°ê³¼ ë³µì‚¬ í›„ ìƒˆ ì°½ìœ¼ë¡œ ë³´ê¸°">ë²ˆì—­ê²°ê³¼ ìƒˆì°½</button>
              <button class="btn-ic" style="font-size:10px;color:var(--tx3)" onclick="Translator.openOriginalAndTranslationInNewWindow()" title="ì›ë¬¸ + ë²ˆì—­ ìƒˆ ì°½ìœ¼ë¡œ ë³´ê¸°">ì›ë¬¸+ë²ˆì—­ ìƒˆì°½</button>
              <button class="btn-ic" style="font-size:10px;color:var(--tx3)" onclick="Translator.copyResult()" title="ë³µì‚¬">ğŸ“‹</button>
            </div>
          </div>
          <textarea id="tr-output" class="fi"
            style="flex:1;resize:none;border:none;border-radius:0;background:var(--bg3);font-size:13px;line-height:1.7;padding:12px;outline:none;color:var(--tx);font-family:inherit;min-height:120px;white-space:pre-wrap;word-break:break-word"
            placeholder="ë²ˆì—­ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤."
            oninput="Translator.onOutputInput()"></textarea>
          <!-- ë¡œë”© -->
          <div id="tr-loading" style="display:none;position:absolute;inset:0;background:rgba(0,0,0,.45);z-index:5;align-items:center;justify-content:center;border-radius:0 0 8px 0">
            <div style="display:flex;flex-direction:column;align-items:center;gap:8px;color:#fff">
              <div class="tr-spinner"></div>
              <span style="font-size:12px">ë²ˆì—­ ì¤‘â€¦</span>
            </div>
          </div>
          <div id="tr-status" style="padding:3px 10px;font-size:10px;color:var(--tx3);border-top:1px solid var(--bd);flex-shrink:0;min-height:20px"></div>
        </div>
      </div>
      <!-- í•˜ë‹¨ -->
      <div style="padding:8px 12px;border-top:1px solid var(--bd);display:flex;align-items:center;gap:8px;flex-shrink:0;flex-wrap:wrap">
        <span style="font-size:11px;color:var(--tx2)">ì‚½ì…:</span>
        <span id="tr-insert-msg" style="font-size:11px;color:var(--ok);display:none"></span>
        <select id="tr-insert-mode" class="fi" style="padding:3px 6px;font-size:11px">
          <option value="replace">ì„ íƒ ì˜ì—­ êµì²´</option>
          <option value="after">ì„ íƒ ë’¤ì— ì¶”ê°€</option>
          <option value="newline">ë‹¤ìŒ ì¤„ì— ì‚½ì…</option>
          <option value="both">ì›ë¬¸ + ë²ˆì—­ í•¨ê»˜</option>
        </select>
        <div style="flex:1"></div>
        <button class="btn btn-g btn-sm" onclick="Translator.hide()">ë‹«ê¸°</button>
        <button class="btn btn-p btn-sm" id="tr-insert-btn" onclick="Translator.insertResult()" disabled>âœ” ì—ë””í„°ì— ì‚½ì…</button>
      </div>
    </div>
  </div>

  <!-- Deep Research ëª¨ë‹¬ -->
  <div class="ov" id="deep-research-modal" onclick="if(event.target===this)DeepResearch.hide()">
    <div id="dr-modal-box" class="modal dr-modal-draggable" style="max-width:960px;width:95vw;max-height:90vh;display:flex;flex-direction:column;position:relative">
      <div class="mh dr-modal-drag" style="cursor:move;user-select:none">
        <span>ğŸ“š Deep Research</span>
        <div style="display:flex;align-items:center;gap:6px">
          <button class="btn btn-g btn-sm" onclick="DeepResearch.hide();event.stopPropagation()" style="font-size:11px;padding:4px 10px">ë‹«ê¸°</button>
          <button class="btn-ic" id="dr-maximize-btn" onclick="DeepResearch.toggleMaximize();event.stopPropagation()" title="ìµœëŒ€í™”">â›¶</button>
          <button class="btn-ic" onclick="DeepResearch.hide()">âœ•</button>
        </div>
      </div>
      <div id="dr-body" style="flex:1;display:flex;overflow:hidden;min-height:0">
        <!-- ì™¼ìª½ íˆìŠ¤í† ë¦¬ ì‚¬ì´ë“œë°” -->
        <div id="dr-sidebar" style="width:220px;flex-shrink:0;border-right:1px solid var(--bd);display:flex;flex-direction:column;background:var(--bg3)">
          <div style="padding:8px;border-bottom:1px solid var(--bd);flex-shrink:0">
            <input type="text" id="dr-history-search" class="fi" placeholder="íˆìŠ¤í† ë¦¬ ê²€ìƒ‰â€¦"
              style="font-size:12px;padding:6px 8px" oninput="DeepResearch.filterHistory(this.value)">
          </div>
          <div id="dr-history-list" style="flex:1;overflow-y:auto;padding:6px"
            data-empty="ì§ˆë¬¸ í›„ ì—¬ê¸°ì— íˆìŠ¤í† ë¦¬ê°€ ì €ì¥ë©ë‹ˆë‹¤."></div>
          <div style="padding:8px;border-top:1px solid var(--bd);flex-shrink:0">
            <button type="button" class="btn btn-g btn-sm" id="dr-history-save-all-btn" onclick="DeepResearch.openHistorySaveModal()" style="width:100%;font-size:11px">íˆìŠ¤í† ë¦¬ ì „ì²´ì €ì¥</button>
          </div>
        </div>
        <!-- ì˜¤ë¥¸ìª½ ë©”ì¸ -->
        <div id="dr-main" style="flex:1;display:flex;flex-direction:column;overflow:hidden;min-width:0">
      <!-- íƒ­ -->
      <div id="dr-tabs" style="display:flex;gap:2px;padding:8px 14px 0;border-bottom:1px solid var(--bd);flex-shrink:0">
        <button type="button" class="tr-tab active" data-tab="question" onclick="DeepResearch.switchTab('question')">ì§ˆë¬¸</button>
        <button type="button" class="tr-tab" data-tab="pro-preview" onclick="DeepResearch.switchTab('pro-preview')">Deep Research Pro Preview</button>
        <button type="button" class="tr-tab" data-tab="ai-search" onclick="DeepResearch.switchTab('ai-search')">AI ê²€ìƒ‰</button>
        <button type="button" class="tr-tab" data-tab="data-research" onclick="DeepResearch.switchTab('data-research')">ìë£Œì¡°ì‚¬</button>
      </div>
      <!-- íƒ­: ì§ˆë¬¸ (ëª¨ë¸ ì„ íƒ) -->
      <div id="dr-panel-question" style="padding:8px 14px;border-bottom:1px solid var(--bd);flex-shrink:0;display:flex;flex-direction:column;gap:8px">
        <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap">
          <div style="flex:1;min-width:140px">
            <label style="font-size:10px;color:var(--tx3)">ëª¨ë¸</label>
            <select id="dr-model" class="fi" style="width:100%;padding:5px 8px;font-size:12px;margin-top:4px">
              <option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
              <option value="gemini-3-flash-preview">Gemini 3 Flash</option>
              <option value="gemini-2.5-flash-lite">Gemini 2.5 Flash Lite</option>
            </select>
          </div>
        </div>
        <div>
          <label style="font-size:10px;color:var(--tx3)">ì§ˆë¬¸</label>
          <textarea id="dr-prompt" class="fi" rows="3" placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”â€¦"
            style="width:100%;margin-top:4px;font-size:13px;resize:vertical;min-height:72px"></textarea>
        </div>
        <button class="btn btn-p" onclick="DeepResearch.run()" style="font-size:12px;font-weight:600">ğŸ’¬ ì§ˆë¬¸í•˜ê¸°</button>
      </div>
      <!-- íƒ­: Deep Research Pro Preview (ì—ì´ì „íŠ¸) -->
      <div id="dr-panel-pro" style="display:none;padding:8px 14px;border-bottom:1px solid var(--bd);flex-shrink:0;flex-direction:column;gap:8px;flex:0 0 auto">
        <div style="font-size:11px;color:var(--tx3);margin-bottom:4px">deep-research-pro-preview-12-2025 Â· Interactions API (ì¤€ë¹„ ì¤‘)</div>
        <div>
          <label style="font-size:10px;color:var(--tx3)">ë¦¬ì„œì¹˜ ì§ˆë¬¸</label>
          <textarea id="dr-prompt-pro" class="fi" rows="3" placeholder="ì—°êµ¬í•  ì£¼ì œë¥¼ ì…ë ¥í•˜ì„¸ìš”â€¦"
            style="width:100%;margin-top:4px;font-size:13px;resize:vertical;min-height:72px"></textarea>
        </div>
        <button class="btn btn-p" onclick="DeepResearch.runPro()" style="font-size:12px;font-weight:600">ğŸ” ë¦¬ì„œì¹˜ ì‹¤í–‰</button>
      </div>
      <!-- íƒ­: AI ê²€ìƒ‰ (ëª¨ë¸ â†’ ì‚¬ì „ í”„ë¡¬í”„íŠ¸ â†’ ì§ˆë¬¸ â†’ ì‹¤í–‰ â†’ ë‹µë³€) -->
      <div id="dr-panel-ai-search" style="display:none;padding:8px 14px;border-bottom:1px solid var(--bd);flex-shrink:0;flex-direction:column;gap:8px;flex:0 0 auto">
        <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap">
          <div style="flex:1;min-width:140px">
            <label style="font-size:10px;color:var(--tx3)">ëª¨ë¸</label>
            <select id="dr-ai-model" class="fi" style="width:100%;padding:5px 8px;font-size:12px;margin-top:4px">
              <option value="gemini-3-flash-preview" selected>Gemini 3 Flash</option>
              <option value="gemini-2.0-flash">Gemini 2 Flash</option>
              <option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
              <option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
              <option value="gemini-2.0-flash-exp">Gemini 2.0 Flash Exp</option>
            </select>
          </div>
        </div>
        <div>
          <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap;margin-bottom:4px">
            <label style="font-size:10px;color:var(--tx3)">ì‚¬ì „ í”„ë¡¬í”„íŠ¸ (ìˆ˜ì • ê°€ëŠ¥)</label>
            <select id="dr-ai-preset" class="fi" style="width:auto;padding:4px 8px;font-size:11px" onchange="DeepResearch.applyAiSearchPreset()" title="ì–‘ì‹ ë¶ˆëŸ¬ì˜¤ê¸°">
              <option value="basic">ê¸°ë³¸í˜•</option>
              <option value="research">ì—°êµ¬ìš©</option>
              <option value="meta">ë©”íƒ€ë¶„ì„Â·ë¬¸í—Œê³ ì°°</option>
              <option value="recommend">ì¶”ì²œí˜•</option>
              <option value="data-survey">ìë£Œì¡°ì‚¬ìš©</option>
              <option value="systematic-review">ì²´ê³„ì  ë¬¸í—Œì¡°ì‚¬</option>
              <option value="academic-paper">í•™ìˆ ë…¼ë¬¸í˜• ì¡°ì‚¬</option>
              <option value="citation">ì¸ìš©ì •ë³´ ìˆ˜ì§‘ìš©</option>
            </select>
            <button type="button" class="btn btn-g btn-sm" style="font-size:11px" onclick="DeepResearch.openPresetTextWindow()" title="ìƒˆ ì°½ì—ì„œ í”„ë¡¬í”„íŠ¸ ë³´ê¸°Â·í¸ì§‘">ìƒˆì°½ë³´ê¸°</button>
          </div>
          <textarea id="dr-ai-preset-text" class="fi" rows="3" placeholder="ì–‘ì‹ì„ ì„ íƒí•˜ë©´ ì—¬ê¸°ì— ì±„ì›Œì§‘ë‹ˆë‹¤. í•„ìš” ì‹œ ìˆ˜ì •í•˜ì„¸ìš”."
            style="width:100%;height:78px;min-height:78px;max-height:60vh;font-size:12px;resize:both;line-height:1.5;display:block"></textarea>
        </div>
        <div>
          <label style="font-size:10px;color:var(--tx3)">ì§ˆë¬¸</label>
          <textarea id="dr-ai-prompt" class="fi" rows="3" placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”â€¦"
            style="width:100%;margin-top:4px;font-size:13px;resize:vertical;min-height:72px"></textarea>
        </div>
        <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">
          <button class="btn btn-p btn-sm" onclick="DeepResearch.runCiteAiSearch()" style="font-size:12px">ğŸ” AI ê²€ìƒ‰ ì‹¤í–‰</button>
          <button class="btn btn-g btn-sm" onclick="DeepResearch.openCiteAiSearch()" style="font-size:11px">ì°¸ê³ ë¬¸í—Œ ëª¨ë‹¬ì—ì„œ ì—´ê¸°</button>
          <button type="button" class="btn btn-g btn-sm" style="font-size:11px" onclick="CiteAiSearchHistory.saveCurrent()" title="í˜„ì¬ ë‹µë³€ì„ íˆìŠ¤í† ë¦¬ì— ì €ì¥">íˆìŠ¤í† ë¦¬ ì €ì¥</button>
        </div>
      </div>
      <!-- íƒ­: ìë£Œì¡°ì‚¬ (AI ê²€ìƒ‰ê³¼ ë™ì¼ UI, ê¸°ë³¸ ëª¨ë¸ Gemini 3 Flash, ë²„íŠ¼ AIìë£Œì¡°ì‚¬) -->
      <div id="dr-panel-data-research" style="display:none;padding:8px 14px;border-bottom:1px solid var(--bd);flex-shrink:0;flex-direction:column;gap:8px;flex:0 0 auto">
        <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap">
          <div style="flex:1;min-width:140px">
            <label style="font-size:10px;color:var(--tx3)">ëª¨ë¸</label>
            <select id="dr-data-model" class="fi" style="width:100%;padding:5px 8px;font-size:12px;margin-top:4px">
              <option value="gemini-3-flash-preview" selected>Gemini 3 Flash</option>
              <option value="gemini-2.0-flash">Gemini 2 Flash</option>
              <option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
              <option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
              <option value="gemini-2.0-flash-exp">Gemini 2.0 Flash Exp</option>
            </select>
          </div>
        </div>
        <div>
          <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap;margin-bottom:4px">
            <label style="font-size:10px;color:var(--tx3)">ì‚¬ì „ í”„ë¡¬í”„íŠ¸ (ìˆ˜ì • ê°€ëŠ¥)</label>
            <select id="dr-data-preset" class="fi" style="width:auto;padding:4px 8px;font-size:11px" onchange="DeepResearch.applyDataResearchPreset()" title="ì–‘ì‹ ë¶ˆëŸ¬ì˜¤ê¸°">
              <option value="basic">ê¸°ë³¸í˜•</option>
              <option value="research">ì—°êµ¬ìš©</option>
              <option value="meta">ë©”íƒ€ë¶„ì„Â·ë¬¸í—Œê³ ì°°</option>
              <option value="recommend">ì¶”ì²œí˜•</option>
              <option value="data-survey">ìë£Œì¡°ì‚¬ìš©</option>
              <option value="systematic-review">ì²´ê³„ì  ë¬¸í—Œì¡°ì‚¬</option>
              <option value="academic-paper">í•™ìˆ ë…¼ë¬¸í˜• ì¡°ì‚¬</option>
              <option value="citation">ì¸ìš©ì •ë³´ ìˆ˜ì§‘ìš©</option>
            </select>
            <button type="button" class="btn btn-g btn-sm" style="font-size:11px" onclick="DeepResearch.openDataPresetTextWindow()" title="ìƒˆ ì°½ì—ì„œ í”„ë¡¬í”„íŠ¸ ë³´ê¸°Â·í¸ì§‘">ìƒˆì°½ë³´ê¸°</button>
          </div>
          <textarea id="dr-data-preset-text" class="fi" rows="3" placeholder="ì–‘ì‹ì„ ì„ íƒí•˜ë©´ ì—¬ê¸°ì— ì±„ì›Œì§‘ë‹ˆë‹¤. í•„ìš” ì‹œ ìˆ˜ì •í•˜ì„¸ìš”."
            style="width:100%;height:78px;min-height:78px;max-height:60vh;font-size:12px;resize:both;line-height:1.5;display:block"></textarea>
        </div>
        <div>
          <label style="font-size:10px;color:var(--tx3)">ì§ˆë¬¸</label>
          <textarea id="dr-data-prompt" class="fi" rows="3" placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”â€¦"
            style="width:100%;margin-top:4px;font-size:13px;resize:vertical;min-height:72px"></textarea>
        </div>
        <button class="btn btn-p" onclick="DeepResearch.runDataResearch()" style="font-size:12px;font-weight:600">ğŸ” AIìë£Œì¡°ì‚¬</button>
      </div>
      <!-- ì¶œë ¥ -->
      <div style="flex:1;display:flex;flex-direction:column;overflow:hidden;min-height:200px;position:relative">
        <div style="padding:6px 12px;font-size:10px;color:var(--tx3);font-weight:600;border-bottom:1px solid var(--bd);flex-shrink:0;display:flex;justify-content:space-between;align-items:center">
          <span>ë‹µë³€</span>
          <div style="display:flex;gap:4px;align-items:center">
            <label style="font-size:10px;color:var(--tx3);margin-right:2px">ë¬¸ì²´</label>
            <select id="dr-style-tone" class="fi" style="font-size:10px;padding:2px 6px;height:24px;width:auto;min-width:100px" title="ë‹µë³€ ë¬¸ì²´">
              <option value="academic">í•™ìˆ ì²´(~ì´ë‹¤)</option>
              <option value="report">ë³´ê³ ì²´(~ì„, ~í•¨)</option>
              <option value="polite">ì¼ë°˜ì²´(ì¡´ëŒ“ë§)</option>
            </select>
            <button class="btn btn-g btn-sm" id="dr-stop-btn" onclick="DeepResearch.stopRun()" style="font-size:10px;padding:2px 8px;display:none;color:var(--er);border-color:var(--er)">â¹ ì§„í–‰ ì¤‘ì§€</button>
            <button class="btn btn-g btn-sm" id="dr-thinking-btn" onclick="DeepResearch.toggleThinking()" style="font-size:10px;padding:2px 8px;display:none">ğŸ’­ ìƒê°</button>
            <button class="btn btn-sm" id="dr-translate-thinking-btn" onclick="DeepResearch.openThinkingForTranslate()" title="ìƒê° ë‚´ìš© ë²ˆì—­" style="display:none;font-size:10px;padding:2px 8px;color:#6ac8f7;border:1px solid rgba(106,200,247,.5);background:rgba(106,200,247,.2);font-weight:600">ìƒê°ë²ˆì—­</button>
            <button class="btn btn-sm" id="dr-open-thinking-btn" onclick="DeepResearch.openThinkingInNewWindow()" title="ìƒê° ë‚´ìš© ìƒˆ ì°½ìœ¼ë¡œ ë³´ê¸°" style="display:none;font-size:10px;padding:2px 8px;color:#6ac8f7;border:1px solid rgba(106,200,247,.5);background:rgba(106,200,247,.2);font-weight:600">ìƒê°ìƒˆì°½</button>
            <button class="btn btn-sm" id="dr-copy-thinking-btn" onclick="DeepResearch.copyThinking()" title="ìƒê° ë‚´ìš© ë³µì‚¬" style="display:none;font-size:10px;padding:2px 8px;color:#6ac8f7;border:1px solid rgba(106,200,247,.5);background:rgba(106,200,247,.2);font-weight:600">ìƒê°ë³µì‚¬</button>
            <button class="btn btn-sm" onclick="DeepResearch.openResultForTranslate()" title="ê²°ê³¼ ë²ˆì—­" style="font-size:10px;padding:2px 8px;color:#6ac8f7;border:1px solid rgba(106,200,247,.5);background:rgba(106,200,247,.2);font-weight:600">ê²°ê³¼ë²ˆì—­</button>
            <button class="btn btn-sm" onclick="DeepResearch.openResultInNewWindow()" title="ìƒˆ ì°½ì—ì„œ ë§ˆí¬ë‹¤ìš´ ì ìš© ê²°ê³¼ ë³´ê¸°" style="font-size:10px;padding:2px 8px;color:#6ac8f7;border:1px solid rgba(106,200,247,.5);background:rgba(106,200,247,.2);font-weight:600">ê²°ê³¼ìƒˆì°½</button>
            <button class="btn btn-sm" onclick="DeepResearch.copyResult()" title="ê²°ê³¼ ë³µì‚¬" style="font-size:10px;padding:2px 8px;color:#6ac8f7;border:1px solid rgba(106,200,247,.5);background:rgba(106,200,247,.2);font-weight:600">ê²°ê³¼ë³µì‚¬</button>
          </div>
        </div>
        <div id="dr-loading" style="display:none;position:absolute;inset:0;background:rgba(0,0,0,.5);z-index:5;align-items:center;justify-content:center;color:#fff;font-size:13px;gap:10px;flex-direction:column">
          <div class="tr-spinner"></div>
          <span>ë‹µë³€ ìƒì„± ì¤‘â€¦</span>
        </div>
        <textarea id="dr-output" class="fi"
          style="flex:1;resize:vertical;min-height:180px;border:none;border-radius:0;background:var(--bg3);font-size:13px;line-height:1.7;padding:12px;outline:none;color:var(--tx);font-family:inherit;white-space:pre-wrap"
          placeholder="ë‹µë³€ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤."></textarea>
        <div id="dr-thinking-wrap" style="display:none;flex:1;flex-direction:column;min-height:80px;border-top:1px solid var(--bd)">
          <div style="flex-shrink:0;display:flex;gap:2px;padding:2px 8px;align-items:center;background:var(--bg2);border-bottom:1px solid var(--bd)">
            <button type="button" class="btn-ic" id="dr-thinking-google-btn" onclick="DeepResearch.thinkingTranslateGoogle()" title="êµ¬ê¸€ ë²ˆì—­ì—ì„œ ì—´ê¸° (enâ†”ko)" style="font-size:9px;padding:2px 6px;color:var(--tx3)">êµ¬ê¸€ë²ˆì—­ê¸°</button>
            <button type="button" class="btn-ic" id="dr-thinking-result-win-btn" onclick="DeepResearch.thinkingTranslateResultNewWindow()" title="êµ¬ê¸€ ìŠ¤í¬ë˜í•‘ ë²ˆì—­ í›„ ë²ˆì—­ë§Œ ìƒˆì°½ (enâ†”ko)" style="font-size:9px;padding:2px 6px;color:var(--tx3)">ë²ˆì—­ê²°ê³¼ ìƒˆì°½</button>
            <button type="button" class="btn-ic" id="dr-thinking-both-win-btn" onclick="DeepResearch.thinkingTranslateBothNewWindow()" title="êµ¬ê¸€ ìŠ¤í¬ë˜í•‘ ë²ˆì—­ í›„ ì›ë¬¸+ë²ˆì—­ ìƒˆì°½ (enâ†”ko)" style="font-size:9px;padding:2px 6px;color:var(--tx3)">ì›ë¬¸+ë²ˆì—­ ìƒˆì°½</button>
          </div>
          <textarea id="dr-thinking" class="fi" readonly
            style="flex:1;resize:none;border:none;border-radius:0;background:var(--bg2);font-size:12px;line-height:1.6;padding:12px;outline:none;color:var(--tx3);font-family:inherit;min-height:60px;white-space:pre-wrap"
            placeholder="ìƒê° (thinking) ë‚´ìš©"></textarea>
        </div>
      </div>
      <!-- ì‚½ì… -->
      <div style="padding:8px 12px;border-top:1px solid var(--bd);display:flex;align-items:center;gap:8px;flex-shrink:0;flex-wrap:wrap">
        <button class="btn btn-p btn-sm" id="dr-insert-btn" onclick="DeepResearch.insert()" disabled>ë¬¸ì„œì— ì‚½ì…</button>
        <button class="btn btn-sm" id="dr-newfile-btn" onclick="DeepResearch.insertToNewFile()" title="ìƒˆ íŒŒì¼ë¡œ ì‚½ì… (íŒŒì¼ëª…ì€ ì˜† ì…ë ¥ë€ì— ë¯¸ë¦¬ ì…ë ¥ ê°€ëŠ¥)"
          style="color:#6ac8f7;border:1px solid rgba(106,200,247,.5);background:rgba(106,200,247,.2);font-weight:600;padding:2px 10px">ï¼‹</button>
        <input type="text" id="dr-insert-hint" class="fi" placeholder="ìƒˆíŒŒì¼ë¡œ ì‚½ì… (íŒŒì¼ëª… ì…ë ¥)"
          style="font-size:11px;color:var(--tx2);width:140px;min-width:0;padding:4px 8px"
          title="ë¹„ìš°ë©´ ìë™ íŒŒì¼ëª…(dr-ë‚ ì§œì‹œê°), ì…ë ¥í•˜ë©´ í•´ë‹¹ ì´ë¦„ìœ¼ë¡œ ìƒˆ íŒŒì¼ ìƒì„±">
        <div style="flex:1"></div>
        <button class="btn btn-g btn-sm" onclick="DeepResearch.hide()">ë‹«ê¸°</button>
      </div>
        </div>
      </div>
      <!-- íˆìŠ¤í† ë¦¬ ì „ì²´ì €ì¥ ì„ íƒ ëª¨ë‹¬ -->
      <div id="dr-history-save-modal" style="display:none;position:absolute;inset:0;background:rgba(0,0,0,.6);z-index:10;align-items:center;justify-content:center;border-radius:0 0 8px 0" onclick="if(event.target===this)DeepResearch.closeHistorySaveModal()">
        <div style="background:var(--bg2);border:1px solid var(--bd);border-radius:8px;padding:20px;min-width:260px;box-shadow:0 8px 32px rgba(0,0,0,.4)">
          <div style="font-size:13px;font-weight:600;margin-bottom:12px;color:var(--tx)">íˆìŠ¤í† ë¦¬ ì €ì¥</div>
          <div style="display:flex;flex-direction:column;gap:8px">
            <button type="button" class="btn btn-p btn-sm" onclick="DeepResearch.saveHistoryAsZip();DeepResearch.closeHistorySaveModal()" style="width:100%;font-size:12px">ZIPìœ¼ë¡œ ì €ì¥ (ë¡œì»¬)</button>
            <button type="button" class="btn btn-g btn-sm" onclick="DeepResearch.saveHistoryBatch();DeepResearch.closeHistorySaveModal()" style="width:100%;font-size:12px">ì¼ê´„ ì €ì¥ (ê° í•­ëª©ì„ .md íŒŒì¼ë¡œ)</button>
            <button type="button" class="btn btn-g btn-sm" onclick="DeepResearch.closeHistorySaveModal()" style="width:100%;font-size:12px">ì·¨ì†Œ</button>
          </div>
        </div>
      </div>
      <!-- ìƒê° í¬í•¨ ì—¬ë¶€ í™•ì¸ ëª¨ë‹¬ (í•­ëª© ì €ì¥ / ë¬¸ì„œì— ì‚½ì…) -->
      <div id="dr-thinking-include-modal" style="display:none;position:absolute;inset:0;background:rgba(0,0,0,.6);z-index:11;align-items:center;justify-content:center;border-radius:0 0 8px 0" onclick="if(event.target===this)DeepResearch.closeThinkingIncludeModal()">
        <div style="background:var(--bg2);border:1px solid var(--bd);border-radius:8px;padding:20px;min-width:280px;box-shadow:0 8px 32px rgba(0,0,0,.4)" onclick="event.stopPropagation()">
          <div style="font-size:13px;font-weight:600;margin-bottom:12px;color:var(--tx)" id="dr-thinking-modal-title">ìƒê° í¬í•¨</div>
          <p style="font-size:11px;color:var(--tx2);margin:0 0 12px;line-height:1.5">ì¸ê³µì§€ëŠ¥ì˜ ì‚¬ê³  ê³¼ì •(ìƒê°)ì„ í•˜ë‹¨ì— ë¶™ì—¬ì„œ í¬í•¨í• ê¹Œìš”?</p>
          <label style="display:flex;align-items:center;gap:8px;cursor:pointer;font-size:12px;color:var(--tx2);margin-bottom:16px">
            <input type="checkbox" id="dr-thinking-include-chk" style="accent-color:var(--ac)">
            <span id="dr-thinking-include-label">ìƒê° í¬í•¨í•˜ì—¬ ì €ì¥</span>
          </label>
          <div style="display:flex;gap:8px;justify-content:flex-end">
            <button type="button" class="btn btn-g btn-sm" onclick="DeepResearch.closeThinkingIncludeModal()">ì·¨ì†Œ</button>
            <button type="button" class="btn btn-p btn-sm" id="dr-thinking-include-confirm-btn" onclick="DeepResearch.confirmThinkingInclude()">ì €ì¥</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="ov" id="charmap-modal" onclick="if(event.target===this)CharMap.hide()">
    <div class="modal" style="max-width:620px;max-height:85vh;display:flex;flex-direction:column">
      <div class="mh">
        <span>Î© ë¬¸ìí‘œ â€” íŠ¹ìˆ˜ë¬¸ì ì‚½ì…</span>
        <button class="btn-ic" onclick="CharMap.hide()">âœ•</button>
      </div>
      <!-- ì¹´í…Œê³ ë¦¬ íƒ­ -->
      <div id="cm-cat-tabs" style="display:flex;flex-wrap:wrap;gap:4px;padding:8px 12px;border-bottom:1px solid var(--bd);flex-shrink:0"></div>
      <!-- ê²€ìƒ‰ -->
      <div style="padding:6px 12px;border-bottom:1px solid var(--bd);flex-shrink:0">
        <input type="text" id="cm-search" class="fi" placeholder="ë¬¸ì ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰ (ì˜ˆ: arrow, star, í™”ì‚´í‘œ)..." oninput="CharMap.search(this.value)" style="width:100%;box-sizing:border-box">
      </div>
      <!-- ë¬¸ì ê·¸ë¦¬ë“œ -->
      <div id="cm-grid" style="flex:1;overflow-y:auto;padding:10px 12px;display:flex;flex-wrap:wrap;gap:4px;align-content:flex-start"></div>
      <!-- í•˜ë‹¨ ë¯¸ë¦¬ë³´ê¸° + ì‚½ì… -->
      <div style="padding:8px 12px;border-top:1px solid var(--bd);display:flex;align-items:center;gap:10px;flex-shrink:0">
        <div id="cm-preview" style="font-size:28px;min-width:38px;text-align:center;line-height:1.2">â€”</div>
        <div style="flex:1">
          <div id="cm-name" style="font-size:11px;color:var(--tx2)">ë¬¸ìë¥¼ ì„ íƒí•˜ì„¸ìš”</div>
          <div id="cm-code" style="font-size:10px;color:var(--tx3);font-family:var(--fm)"></div>
        </div>
        <button class="btn btn-p btn-sm" onclick="CharMap.insert()" id="cm-insert-btn" disabled>ì‚½ì…</button>
        <button class="btn btn-g btn-sm" onclick="CharMap.hide()">ë‹«ê¸°</button>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="index.js"></script>
  

<!-- â•â•â• AppLock ì ê¸ˆ ì˜¤ë²„ë ˆì´ â•â•â• -->
<div id="app-lock-overlay" style="
  display:none; position:fixed; inset:0; z-index:99990;
  background:rgba(10,10,20,.97); backdrop-filter:blur(12px);
  justify-content:center; align-items:center; flex-direction:column;">
  <div style="
    background:rgba(30,30,50,.98); border:1px solid rgba(255,255,255,.12);
    border-radius:16px; padding:36px 40px; width:340px; max-width:90vw;
    box-shadow:0 20px 80px rgba(0,0,0,.7); text-align:center; color:#eee;
    font-family:sans-serif;">
    <div id="lock-title" style="font-size:22px;font-weight:700;margin-bottom:6px;">ğŸ”’ MD Pro Locked</div>
    <div id="lock-sub" style="font-size:12px;color:#888;margin-bottom:24px;">ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì—¬ ì ê¸ˆ í•´ì œ</div>
    <input id="lock-pw-input" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸"
      onkeydown="if(event.key==='Enter')AppLock.handleLockBtn()"
      style="width:100%;box-sizing:border-box;padding:10px 14px;border-radius:8px;
             border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.07);
             color:#eee;font-size:15px;outline:none;margin-bottom:10px;">
    <div id="lock-pw2-row" style="display:none;margin-bottom:10px;">
      <input id="lock-pw2-input" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸ í™•ì¸"
        onkeydown="if(event.key==='Enter')AppLock.handleLockBtn()"
        style="width:100%;box-sizing:border-box;padding:10px 14px;border-radius:8px;
               border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.07);
               color:#eee;font-size:15px;outline:none;">
    </div>
    <div id="lock-error" style="color:#f08080;font-size:12px;min-height:18px;margin-bottom:10px;"></div>
    <button id="lock-btn" onclick="AppLock.handleLockBtn()" style="
      width:100%;padding:11px;border-radius:8px;border:none;
      background:linear-gradient(135deg,#5b4ce4,#7c6ff7);
      color:#fff;font-size:15px;font-weight:600;cursor:pointer;">ì ê¸ˆ í•´ì œ</button>
    <!-- ë¹„ë°€ë²ˆí˜¸ ë¶„ì‹¤ ë§í¬ -->
    <div id="lock-forgot-row" style="margin-top:14px;">
      <button onclick="AppLock.showReset()" style="
        background:none;border:none;color:#6af7b0;font-size:11px;
        cursor:pointer;text-decoration:underline;padding:0;">
        ë¹„ë°€ë²ˆí˜¸ë¥¼ ìŠìœ¼ì…¨ë‚˜ìš”?
      </button>
    </div>

    <!-- â”€â”€ ë¦¬ì…‹ íŒ¨ë„ (ê¸°ë³¸ ìˆ¨ê¹€) â”€â”€ -->
    <div id="lock-reset-panel" style="display:none;margin-top:16px;border-top:1px solid rgba(255,255,255,.1);padding-top:16px;text-align:left;">
      <div style="font-size:12px;color:#aaa;margin-bottom:10px;line-height:1.6;">
        âš  ë¹„ë°€ë²ˆí˜¸ë¥¼ ìƒì–´ë²„ë¦¬ì…¨ë‚˜ìš”?<br>
        <span style="color:#f7d06a;">GitHub í† í°ì„ ì…ë ¥í•˜ë©´ ë°ì´í„°ë¥¼ ë³µí˜¸í™” í›„<br>ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¡œ ì¬ì„¤ì •í•©ë‹ˆë‹¤.</span>
      </div>
      <input id="lock-reset-token" type="password" placeholder="GitHub í† í° ì…ë ¥ (ghp_...)"
        style="width:100%;box-sizing:border-box;padding:9px 12px;border-radius:8px;
               border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.07);
               color:#eee;font-size:13px;outline:none;margin-bottom:8px;"
        onkeydown="if(event.key==='Enter')AppLock.doReset()">
      <input id="lock-reset-pw" type="password" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ (4ì ì´ìƒ)"
        style="width:100%;box-sizing:border-box;padding:9px 12px;border-radius:8px;
               border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.07);
               color:#eee;font-size:13px;outline:none;margin-bottom:8px;"
        onkeydown="if(event.key==='Enter')AppLock.doReset()">
      <input id="lock-reset-pw2" type="password" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸"
        style="width:100%;box-sizing:border-box;padding:9px 12px;border-radius:8px;
               border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.07);
               color:#eee;font-size:13px;outline:none;margin-bottom:8px;"
        onkeydown="if(event.key==='Enter')AppLock.doReset()">
      <div id="lock-reset-error" style="color:#f08080;font-size:11px;min-height:16px;margin-bottom:8px;"></div>
      <div style="display:flex;gap:8px;">
        <button onclick="AppLock.doReset()" style="
          flex:1;padding:9px;border-radius:8px;border:none;
          background:linear-gradient(135deg,#e44c4c,#f77c6a);
          color:#fff;font-size:13px;font-weight:600;cursor:pointer;">ì¬ì„¤ì •</button>
        <button onclick="AppLock.hideReset()" style="
          flex:1;padding:9px;border-radius:8px;border:1px solid rgba(255,255,255,.15);
          background:none;color:#aaa;font-size:13px;cursor:pointer;">ì·¨ì†Œ</button>
      </div>
      <div style="margin-top:10px;font-size:10px;color:#555;line-height:1.5;">
        * ê¸°ì¡´ ì•”í˜¸í™” ë°ì´í„°ë¥¼ ì‚­ì œí•˜ê³  ë‹¤ì‹œ ì•”í˜¸í™”í•©ë‹ˆë‹¤.<br>
        * GitHub í† í°ì€ ì„œë²„ë¡œ ì „ì†¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
      </div>
    </div>

    <div style="margin-top:16px;font-size:11px;color:#555;">
      MD Pro Â· ë¡œì»¬ AES-256 ì•”í˜¸í™”
    </div>
  </div>
</div>

</body>

</html>